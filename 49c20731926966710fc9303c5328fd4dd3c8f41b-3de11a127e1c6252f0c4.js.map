{"version":3,"file":"49c20731926966710fc9303c5328fd4dd3c8f41b-3de11a127e1c6252f0c4.js","mappings":"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","sources":["webpack://my-gatsby-site/./node_modules/@snek-at/functions/dist/ lazy namespace object","webpack://my-gatsby-site/./node_modules/@mui/material/esm/Typography/typographyClasses.js","webpack://my-gatsby-site/./node_modules/@mui/material/esm/Typography/Typography.js","webpack://my-gatsby-site/./node_modules/@mui/material/esm/utils/useForkRef.js","webpack://my-gatsby-site/./node_modules/@mui/utils/esm/useIsFocusVisible.js","webpack://my-gatsby-site/./node_modules/@mui/material/esm/utils/useIsFocusVisible.js","webpack://my-gatsby-site/./node_modules/@mui/system/esm/styleFunctionSx/extendSxProp.js","webpack://my-gatsby-site/./node_modules/@mui/utils/esm/setRef.js","webpack://my-gatsby-site/./node_modules/@mui/utils/esm/useForkRef.js","webpack://my-gatsby-site/./node_modules/@snek-at/functions/dist/utils.js","webpack://my-gatsby-site/./node_modules/@snek-at/functions/dist/makeFn.js","webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/constants.js","webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/factory.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/definitions.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/context/LazyContext.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/use-features.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/context/MotionConfigContext.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/context/MotionContext/index.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/context/PresenceContext.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/use-constant.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/context/LayoutGroupContext.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/is-browser.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/utils/use-visual-element.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/is-ref-object.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/variants.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/context/MotionContext/create.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/context/MotionContext/utils.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/index.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/motion-proxy.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/lowercase-elements.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/projection/scale-correction.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/utils/transform.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/utils/is-forced-motion-value.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/value/utils/is-motion-value.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/utils/build-transform.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/get-as-type.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/utils.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/numbers/units.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/numbers/index.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/type-int.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/number.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/utils/build-styles.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/utils/create-render-state.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/use-props.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/utils/valid-prop.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/filter-props.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/utils/transform-origin.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/utils/path.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/utils/create-render-state.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/use-props.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/use-render.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/utils/render.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/utils/render.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/value/utils/resolve-motion-value.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/resolve-value.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/utils/use-visual-state.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/config-motion.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/config-motion.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/types.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/events/use-dom-event.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/utils/event-type.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/events/event-info.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/events/use-pointer-event.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/events/utils.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/drag/utils/lock.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/use-hover-gesture.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/use-unmount-effect.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/pipe.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/utils/make-renderless-component.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/gestures.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/use-tap-gesture.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/use-focus-gesture.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/shallow-compare.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/clamp.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/animations/utils/find-spring.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/animations/generators/spring.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/progress.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/mix.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/color/utils.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/color/rgba.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/color/hex.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/color/hsla.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/mix-color.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/color/index.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/complex/index.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/inc.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/mix-complex.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/interpolate.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/easing/utils.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/easing/index.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/animations/generators/keyframes.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/animations/utils/detect-animation-from-options.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/animations/generators/decay.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/animations/utils/elapsed.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/animations/index.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/velocity-per-second.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/time-conversion.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/easing/cubic-bezier.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/animation/utils/easing.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/animation/utils/is-animatable.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/animation/utils/default-transitions.js","webpack://my-gatsby-site/./node_modules/style-value-types/dist/es/complex/filter.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/defaults.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/animation/utils/transitions.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/animations/inertia.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/array.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/subscription-manager.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/value/index.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/test.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/dimensions.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/type-auto.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/value-types/find.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/setters.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/animation.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/animation-state.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/animations.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/is-point.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/is-point-3d.js","webpack://my-gatsby-site/./node_modules/popmotion/dist/es/utils/distance.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/PanSession.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/noop.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/geometry/index.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/each-axis.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/projection/measure.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/geometry/delta-calc.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/compare-by-depth.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/projection/utils.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/layout/utils.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/is-draggable.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/geometry/delta-apply.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/batch-layout.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/projection/convert-to-relative.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/drag.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/types.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/use-pan-gesture.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/gestures/drag/use-drag.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/projection/default-scale-correctors.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/layout/Animate.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/utils/batcher.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/context/SharedLayoutContext.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/layout/Measure.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/motion/features/layout/index.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/state.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/utils/build-projection-transform.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/lifecycles.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/projection.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/flat-tree.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/index.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/utils/motion-values.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/projection/relative-set.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/parse-dom-variant.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/html/visual-element.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/utils/is-numerical-string.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/svg/visual-element.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/create-visual-element.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/motion.js","webpack://my-gatsby-site/./node_modules/framer-motion/dist/es/render/dom/utils/create-config.js","webpack://my-gatsby-site/./node_modules/framer-motion/node_modules/@emotion/memoize/dist/memoize.browser.esm.js","webpack://my-gatsby-site/./node_modules/framer-motion/node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js","webpack://my-gatsby-site/./src/common/getLangRootNavigationPath.ts","webpack://my-gatsby-site/./src/components/Layout/NavbarPadding.tsx","webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/decorators/loginRequired.js","webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/decorators/loginOptional.js","webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/jsonFetch.js","webpack://my-gatsby-site/./node_modules/@snek-functions/authentication/dist/factory.js","webpack://my-gatsby-site/./node_modules/@snek-functions/authentication/dist/authenticate.js","webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/login.js","webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/logout.js","webpack://my-gatsby-site/./node_modules/@snek-functions/email/dist/factory.js","webpack://my-gatsby-site/./node_modules/@snek-functions/email/dist/send.js","webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/signup.js","webpack://my-gatsby-site/./src/model/types/type.api.ts","webpack://my-gatsby-site/./src/model/model.api.ts","webpack://my-gatsby-site/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://my-gatsby-site/./node_modules/@babel/runtime/helpers/createClass.js"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 9770;\nmodule.exports = webpackEmptyAsyncContext;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getTypographyUtilityClass(slot) {\n  return generateUtilityClass('MuiTypography', slot);\n}\nvar typographyClasses = generateUtilityClasses('MuiTypography', ['root', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'subtitle1', 'subtitle2', 'body1', 'body2', 'inherit', 'button', 'caption', 'overline', 'alignLeft', 'alignRight', 'alignCenter', 'alignJustify', 'noWrap', 'gutterBottom', 'paragraph']);\nexport default typographyClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"align\", \"className\", \"component\", \"gutterBottom\", \"noWrap\", \"paragraph\", \"variant\", \"variantMapping\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_extendSxProp as extendSxProp } from '@mui/system';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport capitalize from '../utils/capitalize';\nimport { getTypographyUtilityClass } from './typographyClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var align = ownerState.align,\n      gutterBottom = ownerState.gutterBottom,\n      noWrap = ownerState.noWrap,\n      paragraph = ownerState.paragraph,\n      variant = ownerState.variant,\n      classes = ownerState.classes;\n  var slots = {\n    root: ['root', variant, ownerState.align !== 'inherit' && \"align\".concat(capitalize(align)), gutterBottom && 'gutterBottom', noWrap && 'noWrap', paragraph && 'paragraph']\n  };\n  return composeClasses(slots, getTypographyUtilityClass, classes);\n};\n\nexport var TypographyRoot = styled('span', {\n  name: 'MuiTypography',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.variant && styles[ownerState.variant], ownerState.align !== 'inherit' && styles[\"align\".concat(capitalize(ownerState.align))], ownerState.noWrap && styles.noWrap, ownerState.gutterBottom && styles.gutterBottom, ownerState.paragraph && styles.paragraph];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    margin: 0\n  }, ownerState.variant && theme.typography[ownerState.variant], ownerState.align !== 'inherit' && {\n    textAlign: ownerState.align\n  }, ownerState.noWrap && {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }, ownerState.gutterBottom && {\n    marginBottom: '0.35em'\n  }, ownerState.paragraph && {\n    marginBottom: 16\n  });\n});\nvar defaultVariantMapping = {\n  h1: 'h1',\n  h2: 'h2',\n  h3: 'h3',\n  h4: 'h4',\n  h5: 'h5',\n  h6: 'h6',\n  subtitle1: 'h6',\n  subtitle2: 'h6',\n  body1: 'p',\n  body2: 'p',\n  inherit: 'p'\n}; // TODO v6: deprecate these color values in v5.x and remove the transformation in v6\n\nvar colorTransformations = {\n  primary: 'primary.main',\n  textPrimary: 'text.primary',\n  secondary: 'secondary.main',\n  textSecondary: 'text.secondary',\n  error: 'error.main'\n};\n\nvar transformDeprecatedColors = function transformDeprecatedColors(color) {\n  return colorTransformations[color] || color;\n};\n\nvar Typography = /*#__PURE__*/React.forwardRef(function Typography(inProps, ref) {\n  var themeProps = useThemeProps({\n    props: inProps,\n    name: 'MuiTypography'\n  });\n  var color = transformDeprecatedColors(themeProps.color);\n  var props = extendSxProp(_extends({}, themeProps, {\n    color: color\n  }));\n\n  var _props$align = props.align,\n      align = _props$align === void 0 ? 'inherit' : _props$align,\n      className = props.className,\n      component = props.component,\n      _props$gutterBottom = props.gutterBottom,\n      gutterBottom = _props$gutterBottom === void 0 ? false : _props$gutterBottom,\n      _props$noWrap = props.noWrap,\n      noWrap = _props$noWrap === void 0 ? false : _props$noWrap,\n      _props$paragraph = props.paragraph,\n      paragraph = _props$paragraph === void 0 ? false : _props$paragraph,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'body1' : _props$variant,\n      _props$variantMapping = props.variantMapping,\n      variantMapping = _props$variantMapping === void 0 ? defaultVariantMapping : _props$variantMapping,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    align: align,\n    color: color,\n    className: className,\n    component: component,\n    gutterBottom: gutterBottom,\n    noWrap: noWrap,\n    paragraph: paragraph,\n    variant: variant,\n    variantMapping: variantMapping\n  });\n\n  var Component = component || (paragraph ? 'p' : variantMapping[variant] || defaultVariantMapping[variant]) || 'span';\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(TypographyRoot, _extends({\n    as: Component,\n    ref: ref,\n    ownerState: ownerState,\n    className: clsx(classes.root, className)\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Typography;","import { unstable_useForkRef as useForkRef } from '@mui/utils';\nexport default useForkRef;","// based on https://github.com/WICG/focus-visible/blob/v4.1.5/src/focus-visible.js\nimport * as React from 'react';\nvar hadKeyboardEvent = true;\nvar hadFocusVisibleRecently = false;\nvar hadFocusVisibleRecentlyTimeout;\nvar inputTypesWhitelist = {\n  text: true,\n  search: true,\n  url: true,\n  tel: true,\n  email: true,\n  password: true,\n  number: true,\n  date: true,\n  month: true,\n  week: true,\n  time: true,\n  datetime: true,\n  'datetime-local': true\n};\n/**\n * Computes whether the given element should automatically trigger the\n * `focus-visible` class being added, i.e. whether it should always match\n * `:focus-visible` when focused.\n * @param {Element} node\n * @returns {boolean}\n */\n\nfunction focusTriggersKeyboardModality(node) {\n  var type = node.type,\n      tagName = node.tagName;\n\n  if (tagName === 'INPUT' && inputTypesWhitelist[type] && !node.readOnly) {\n    return true;\n  }\n\n  if (tagName === 'TEXTAREA' && !node.readOnly) {\n    return true;\n  }\n\n  if (node.isContentEditable) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * Keep track of our keyboard modality state with `hadKeyboardEvent`.\n * If the most recent user interaction was via the keyboard;\n * and the key press did not include a meta, alt/option, or control key;\n * then the modality is keyboard. Otherwise, the modality is not keyboard.\n * @param {KeyboardEvent} event\n */\n\n\nfunction handleKeyDown(event) {\n  if (event.metaKey || event.altKey || event.ctrlKey) {\n    return;\n  }\n\n  hadKeyboardEvent = true;\n}\n/**\n * If at any point a user clicks with a pointing device, ensure that we change\n * the modality away from keyboard.\n * This avoids the situation where a user presses a key on an already focused\n * element, and then clicks on a different element, focusing it with a\n * pointing device, while we still think we're in keyboard modality.\n */\n\n\nfunction handlePointerDown() {\n  hadKeyboardEvent = false;\n}\n\nfunction handleVisibilityChange() {\n  if (this.visibilityState === 'hidden') {\n    // If the tab becomes active again, the browser will handle calling focus\n    // on the element (Safari actually calls it twice).\n    // If this tab change caused a blur on an element with focus-visible,\n    // re-apply the class when the user switches back to the tab.\n    if (hadFocusVisibleRecently) {\n      hadKeyboardEvent = true;\n    }\n  }\n}\n\nfunction prepare(doc) {\n  doc.addEventListener('keydown', handleKeyDown, true);\n  doc.addEventListener('mousedown', handlePointerDown, true);\n  doc.addEventListener('pointerdown', handlePointerDown, true);\n  doc.addEventListener('touchstart', handlePointerDown, true);\n  doc.addEventListener('visibilitychange', handleVisibilityChange, true);\n}\n\nexport function teardown(doc) {\n  doc.removeEventListener('keydown', handleKeyDown, true);\n  doc.removeEventListener('mousedown', handlePointerDown, true);\n  doc.removeEventListener('pointerdown', handlePointerDown, true);\n  doc.removeEventListener('touchstart', handlePointerDown, true);\n  doc.removeEventListener('visibilitychange', handleVisibilityChange, true);\n}\n\nfunction isFocusVisible(event) {\n  var target = event.target;\n\n  try {\n    return target.matches(':focus-visible');\n  } catch (error) {// Browsers not implementing :focus-visible will throw a SyntaxError.\n    // We use our own heuristic for those browsers.\n    // Rethrow might be better if it's not the expected error but do we really\n    // want to crash if focus-visible malfunctioned?\n  } // No need for validFocusTarget check. The user does that by attaching it to\n  // focusable events only.\n\n\n  return hadKeyboardEvent || focusTriggersKeyboardModality(target);\n}\n\nexport default function useIsFocusVisible() {\n  var ref = React.useCallback(function (node) {\n    if (node != null) {\n      prepare(node.ownerDocument);\n    }\n  }, []);\n  var isFocusVisibleRef = React.useRef(false);\n  /**\n   * Should be called if a blur event is fired\n   */\n\n  function handleBlurVisible() {\n    // checking against potential state variable does not suffice if we focus and blur synchronously.\n    // React wouldn't have time to trigger a re-render so `focusVisible` would be stale.\n    // Ideally we would adjust `isFocusVisible(event)` to look at `relatedTarget` for blur events.\n    // This doesn't work in IE11 due to https://github.com/facebook/react/issues/3751\n    // TODO: check again if React releases their internal changes to focus event handling (https://github.com/facebook/react/pull/19186).\n    if (isFocusVisibleRef.current) {\n      // To detect a tab/window switch, we look for a blur event followed\n      // rapidly by a visibility change.\n      // If we don't see a visibility change within 100ms, it's probably a\n      // regular focus change.\n      hadFocusVisibleRecently = true;\n      window.clearTimeout(hadFocusVisibleRecentlyTimeout);\n      hadFocusVisibleRecentlyTimeout = window.setTimeout(function () {\n        hadFocusVisibleRecently = false;\n      }, 100);\n      isFocusVisibleRef.current = false;\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Should be called if a blur event is fired\n   */\n\n\n  function handleFocusVisible(event) {\n    if (isFocusVisible(event)) {\n      isFocusVisibleRef.current = true;\n      return true;\n    }\n\n    return false;\n  }\n\n  return {\n    isFocusVisibleRef: isFocusVisibleRef,\n    onFocus: handleFocusVisible,\n    onBlur: handleBlurVisible,\n    ref: ref\n  };\n}","import { unstable_useIsFocusVisible as useIsFocusVisible } from '@mui/utils';\nexport default useIsFocusVisible;","import _toConsumableArray from \"/workspaces/photonq-jaen/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"sx\"];\nimport { isPlainObject } from '@mui/utils';\nimport { propToStyleFunction } from '../getThemeValue';\n\nvar splitProps = function splitProps(props) {\n  var result = {\n    systemProps: {},\n    otherProps: {}\n  };\n  Object.keys(props).forEach(function (prop) {\n    if (propToStyleFunction[prop]) {\n      result.systemProps[prop] = props[prop];\n    } else {\n      result.otherProps[prop] = props[prop];\n    }\n  });\n  return result;\n};\n\nexport default function extendSxProp(props) {\n  var inSx = props.sx,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var _splitProps = splitProps(other),\n      systemProps = _splitProps.systemProps,\n      otherProps = _splitProps.otherProps;\n\n  var finalSx;\n\n  if (Array.isArray(inSx)) {\n    finalSx = [systemProps].concat(_toConsumableArray(inSx));\n  } else if (typeof inSx === 'function') {\n    finalSx = function finalSx() {\n      var result = inSx.apply(void 0, arguments);\n\n      if (!isPlainObject(result)) {\n        return systemProps;\n      }\n\n      return _extends({}, systemProps, result);\n    };\n  } else {\n    finalSx = _extends({}, systemProps, inSx);\n  }\n\n  return _extends({}, otherProps, {\n    sx: finalSx\n  });\n}","/**\n * TODO v5: consider making it private\n *\n * passes {value} to {ref}\n *\n * WARNING: Be sure to only call this inside a callback that is passed as a ref.\n * Otherwise, make sure to cleanup the previous {ref} if it changes. See\n * https://github.com/mui/material-ui/issues/13539\n *\n * Useful if you want to expose the ref of an inner component to the public API\n * while still using it inside the component.\n * @param ref A ref callback or ref object. If anything falsy, this is a no-op.\n */\nexport default function setRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}","import * as React from 'react';\nimport setRef from './setRef';\nexport default function useForkRef(refA, refB) {\n  /**\n   * This will create a new function if the ref props change and are defined.\n   * This means react will call the old forkRef with `null` and the new forkRef\n   * with the ref. Cleanup naturally emerges from this behavior.\n   */\n  return React.useMemo(function () {\n    if (refA == null && refB == null) {\n      return null;\n    }\n\n    return function (refValue) {\n      setRef(refA, refValue);\n      setRef(refB, refValue);\n    };\n  }, [refA, refB]);\n}","import _regeneratorRuntime from \"/workspaces/photonq-jaen/node_modules/@babel/runtime/regenerator/index.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nexport function importFresh(modulePath) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var cacheBustingModulePath;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cacheBustingModulePath = \"\".concat(modulePath, \"?update=\").concat(Date.now());\n            _context.next = 3;\n            return import(cacheBustingModulePath);\n\n          case 3:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nexport function stringify(data) {\n  if (typeof data !== 'object' || Array.isArray(data)) {\n    return JSON.stringify(data);\n  }\n\n  var props = Object.keys(data).map(function (key) {\n    return \"\".concat(key, \":\").concat(stringify(data[key]));\n  }).join(',');\n  return \"{\".concat(props, \"}\");\n}\nexport var buildGraphqlQueryString = function buildGraphqlQueryString(_ref) {\n  var name = _ref.name,\n      args = _ref.args;\n  var argsQuery = args ? \"(fnArgs: \".concat(stringify(args), \")\") : '';\n  return JSON.stringify({\n    query: \"\\n        mutation {\\n          \".concat(name).concat(argsQuery, \" \\n        }\\n      \")\n  });\n};","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"/workspaces/photonq-jaen/node_modules/@babel/runtime/regenerator/index.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { KeyManager } from '@snek-at/snek-api-client';\nimport { buildGraphqlQueryString } from './utils.js';\nexport var makeFn = function makeFn(_ref) {\n  var url = _ref.url,\n      decorators = _ref.decorators;\n  return function (snekFunction, options) {\n    var fn = function fn(args) {\n      return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _yield$fn$execute, data, errors;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fn.execute(args);\n\n              case 2:\n                _yield$fn$execute = _context.sent;\n                data = _yield$fn$execute.data;\n                errors = _yield$fn$execute.errors;\n\n                if (!(errors.length > 0)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new Error(errors[0].message);\n\n              case 7:\n                return _context.abrupt(\"return\", data);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    };\n\n    fn.options = options;\n\n    fn.execute = function (args, init) {\n      return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var snekApiHeaders, res, _yield$res$json, data, errors;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                snekApiHeaders = KeyManager.getHeaders();\n                console.log('snekApiHeaders', snekApiHeaders);\n                _context2.prev = 2;\n                _context2.next = 5;\n                return fetch(url, {\n                  method: 'POST',\n                  headers: Object.assign(Object.assign({\n                    'Content-Type': 'application/json'\n                  }, snekApiHeaders), init === null || init === void 0 ? void 0 : init.headers),\n                  body: buildGraphqlQueryString({\n                    name: options.name,\n                    args: args\n                  }),\n                  credentials: 'include'\n                });\n\n              case 5:\n                res = _context2.sent;\n                _context2.next = 8;\n                return res.json();\n\n              case 8:\n                _yield$res$json = _context2.sent;\n                data = _yield$res$json.data;\n                errors = _yield$res$json.errors;\n                return _context2.abrupt(\"return\", {\n                  res: res,\n                  data: JSON.parse(data[options.name]),\n                  errors: errors || []\n                });\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](2);\n                console.error(_context2.t0);\n                return _context2.abrupt(\"return\", {\n                  res: undefined,\n                  data: null,\n                  errors: [_context2.t0]\n                });\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[2, 14]]);\n      }));\n    };\n\n    fn.server = snekFunction;\n\n    if (decorators) {\n      fn.globalDecorators = [];\n\n      var shouldSkipDecorator = function shouldSkipDecorator(decorator, includes, excludes) {\n        if (includes) {\n          return !includes.includes(decorator.name);\n        } else if (excludes) {\n          return excludes.includes(decorator.name);\n        } else {\n          return false;\n        }\n      };\n\n      var _iterator = _createForOfIteratorHelper(decorators),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _step.value,\n              decorator = _step$value.decorator,\n              inclds = _step$value.includes,\n              exclds = _step$value.excludes;\n\n          if (!shouldSkipDecorator(decorator, inclds, exclds)) {\n            fn.globalDecorators.push(decorator);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n\n    return fn;\n  };\n};\nexport var browserMakeFn = function browserMakeFn(args) {\n  return function (snekFunction, options) {\n    var fn = makeFn(args)(snekFunction, options);\n\n    fn.server = function () {\n      throw new Error('Executing a server function in the browser is not supported.');\n    };\n\n    return fn;\n  };\n};","import { url } from \"./factory.js\";\nexport var SHARED_SECRET = \"<your-service-secret>\";\nexport var TOKEN_COOKIE_NAME = \"T\";\nexport var REFRESH_TOKEN_COOKIE_NAME = \"RT\";\nexport var USER_DATA_TOKEN_NAME = \"U\";\nexport var LOGIN_COOKIE_SECURE = true;\nexport var LOGIN_COOKIE_SAME_SITE = \"none\";\nexport var LOGIN_COOKIE_PATH = \"/\";\nexport var LOGIN_COOKIE_DOMAIN = new URL(url).hostname;\nexport var LOGIN_COOKIE_HTTP_ONLY = true;\nexport var LOGIN_TOKEN_COOKIE_MAX_AGE = 60 * 15 // 15 minutes\n;\nexport var LOGIN_REFRESH_TOKEN_COOKIE_MAX_AGE = 60 * 60 * 24 * 7 // 7 days\n;\nexport var COOKIE_OPTIONS = {\n  httpOnly: LOGIN_COOKIE_HTTP_ONLY,\n  secure: LOGIN_COOKIE_SECURE,\n  sameSite: LOGIN_COOKIE_SAME_SITE,\n  path: LOGIN_COOKIE_PATH,\n  domain: LOGIN_COOKIE_DOMAIN\n};","import { makeFn } from \"@snek-at/functions\";\nexport var url = process.env.IS_OFFLINE ? process.env.CODESPACE_NAME ? \"https://\".concat(process.env.CODESPACE_NAME, \"-4010.githubpreview.dev/graphql\") : \"http://localhost:4010/graphql\" : process.env.ENDPOINT_URL_ORIGIN || process.env.GATSBY_ENDPOINT_URL_ORIGIN;\nexport var fn = makeFn({\n  url: url\n});","var createDefinition = function createDefinition(propNames) {\n  return {\n    isEnabled: function isEnabled(props) {\n      return propNames.some(function (name) {\n        return !!props[name];\n      });\n    }\n  };\n};\n\nvar featureDefinitions = {\n  measureLayout: createDefinition([\"layout\", \"layoutId\", \"drag\", \"_layoutResetTransform\"]),\n  animation: createDefinition([\"animate\", \"exit\", \"variants\", \"whileHover\", \"whileTap\", \"whileFocus\", \"whileDrag\"]),\n  exit: createDefinition([\"exit\"]),\n  drag: createDefinition([\"drag\", \"dragControls\"]),\n  focus: createDefinition([\"whileFocus\"]),\n  hover: createDefinition([\"whileHover\", \"onHoverStart\", \"onHoverEnd\"]),\n  tap: createDefinition([\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"]),\n  pan: createDefinition([\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"]),\n  layoutAnimation: createDefinition([\"layout\", \"layoutId\"])\n};\n\nfunction loadFeatures(features) {\n  for (var key in features) {\n    var Component = features[key];\n    if (Component !== null) featureDefinitions[key].Component = Component;\n  }\n}\n\nexport { featureDefinitions, loadFeatures };","import { createContext } from 'react';\nvar LazyContext = createContext({\n  strict: false\n});\nexport { LazyContext };","import { __assign } from 'tslib';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { featureDefinitions } from './definitions.js';\nimport { invariant } from 'hey-listen';\nimport { LazyContext } from '../../context/LazyContext.js';\nvar featureNames = Object.keys(featureDefinitions);\nvar numFeatures = featureNames.length;\n/**\n * Load features via renderless components based on the provided MotionProps.\n */\n\nfunction useFeatures(props, visualElement, preloadedFeatures) {\n  var features = [];\n  var lazyContext = useContext(LazyContext);\n  if (!visualElement) return null;\n  /**\n   * If we're in development mode, check to make sure we're not rendering a motion component\n   * as a child of LazyMotion, as this will break the file-size benefits of using it.\n   */\n\n  if (process.env.NODE_ENV !== \"production\" && preloadedFeatures && lazyContext.strict) {\n    invariant(false, \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\");\n  }\n\n  for (var i = 0; i < numFeatures; i++) {\n    var name_1 = featureNames[i];\n    var _a = featureDefinitions[name_1],\n        isEnabled = _a.isEnabled,\n        Component = _a.Component;\n    /**\n     * It might be possible in the future to use this moment to\n     * dynamically request functionality. In initial tests this\n     * was producing a lot of duplication amongst bundles.\n     */\n\n    if (isEnabled(props) && Component) {\n      features.push(React.createElement(Component, __assign({\n        key: name_1\n      }, props, {\n        visualElement: visualElement\n      })));\n    }\n  }\n\n  return features;\n}\n\nexport { useFeatures };","import { createContext } from 'react';\n/**\n * @public\n */\n\nvar MotionConfigContext = createContext({\n  transformPagePoint: function transformPagePoint(p) {\n    return p;\n  },\n  isStatic: false\n});\nexport { MotionConfigContext };","import { useContext, createContext } from 'react';\nvar MotionContext = createContext({});\n\nfunction useVisualElementContext() {\n  return useContext(MotionContext).visualElement;\n}\n\nexport { MotionContext, useVisualElementContext };","import { createContext } from 'react';\n/**\n * @public\n */\n\nvar PresenceContext = createContext(null);\nexport { PresenceContext };","import { useRef } from 'react';\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\n\nfunction useConstant(init) {\n  var ref = useRef(null);\n\n  if (ref.current === null) {\n    ref.current = init();\n  }\n\n  return ref.current;\n}\n\nexport { useConstant };","import { useContext, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { useConstant } from '../../utils/use-constant.js';\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\n\nfunction usePresence() {\n  var context = useContext(PresenceContext);\n  if (context === null) return [true, null];\n  var isPresent = context.isPresent,\n      onExitComplete = context.onExitComplete,\n      register = context.register; // It's safe to call the following hooks conditionally (after an early return) because the context will always\n  // either be null or non-null for the lifespan of the component.\n  // Replace with useOpaqueId when released in React\n\n  var id = useUniqueId();\n  useEffect(function () {\n    return register(id);\n  }, []);\n\n  var safeToRemove = function safeToRemove() {\n    return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id);\n  };\n\n  return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\n\n\nfunction useIsPresent() {\n  return isPresent(useContext(PresenceContext));\n}\n\nfunction isPresent(context) {\n  return context === null ? true : context.isPresent;\n}\n\nvar counter = 0;\n\nvar incrementId = function incrementId() {\n  return counter++;\n};\n\nvar useUniqueId = function useUniqueId() {\n  return useConstant(incrementId);\n};\n\nexport { isPresent, useIsPresent, usePresence };","import { createContext } from 'react';\n/**\n * @internal\n */\n\nvar LayoutGroupContext = createContext(null);\nexport { LayoutGroupContext };","var isBrowser = typeof window !== \"undefined\";\nexport { isBrowser };","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.js';\nvar useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\nexport { useIsomorphicLayoutEffect };","import { __assign } from 'tslib';\nimport { useContext, useRef, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { isPresent } from '../../components/AnimatePresence/use-presence.js';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.js';\nimport { useVisualElementContext } from '../../context/MotionContext/index.js';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.js';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { LazyContext } from '../../context/LazyContext.js';\n\nfunction useLayoutId(_a) {\n  var layoutId = _a.layoutId;\n  var layoutGroupId = useContext(LayoutGroupContext);\n  return layoutGroupId && layoutId !== undefined ? layoutGroupId + \"-\" + layoutId : layoutId;\n}\n\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n  var config = useContext(MotionConfigContext);\n  var lazyContext = useContext(LazyContext);\n  var parent = useVisualElementContext();\n  var presenceContext = useContext(PresenceContext);\n  var layoutId = useLayoutId(props);\n  var visualElementRef = useRef(undefined);\n  /**\n   * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n   */\n\n  if (!createVisualElement) createVisualElement = lazyContext.renderer;\n\n  if (!visualElementRef.current && createVisualElement) {\n    visualElementRef.current = createVisualElement(Component, {\n      visualState: visualState,\n      parent: parent,\n      props: __assign(__assign({}, props), {\n        layoutId: layoutId\n      }),\n      presenceId: presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id,\n      blockInitialAnimation: (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false\n    });\n  }\n\n  var visualElement = visualElementRef.current;\n  useIsomorphicLayoutEffect(function () {\n    if (!visualElement) return;\n    visualElement.setProps(__assign(__assign(__assign({}, config), props), {\n      layoutId: layoutId\n    }));\n    visualElement.isPresent = isPresent(presenceContext);\n    visualElement.isPresenceRoot = !parent || parent.presenceId !== (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id);\n    /**\n     * Fire a render to ensure the latest state is reflected on-screen.\n     */\n\n    visualElement.syncRender();\n  });\n  useEffect(function () {\n    var _a;\n\n    if (!visualElement) return;\n    /**\n     * In a future refactor we can replace the features-as-components and\n     * have this loop through them all firing \"effect\" listeners\n     */\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.animateChanges();\n  });\n  useIsomorphicLayoutEffect(function () {\n    return function () {\n      return visualElement === null || visualElement === void 0 ? void 0 : visualElement.notifyUnmount();\n    };\n  }, []);\n  return visualElement;\n}\n\nexport { useVisualElement };","function isRefObject(ref) {\n  return typeof ref === \"object\" && Object.prototype.hasOwnProperty.call(ref, \"current\");\n}\n\nexport { isRefObject };","/**\n * Decides if the supplied variable is an array of variant labels\n */\nfunction isVariantLabels(v) {\n  return Array.isArray(v);\n}\n/**\n * Decides if the supplied variable is variant label\n */\n\n\nfunction isVariantLabel(v) {\n  return typeof v === \"string\" || isVariantLabels(v);\n}\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\n\n\nfunction getCurrent(visualElement) {\n  var current = {};\n  visualElement.forEachValue(function (value, key) {\n    return current[key] = value.get();\n  });\n  return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\n\n\nfunction getVelocity(visualElement) {\n  var velocity = {};\n  visualElement.forEachValue(function (value, key) {\n    return velocity[key] = value.getVelocity();\n  });\n  return velocity;\n}\n\nfunction resolveVariantFromProps(props, definition, custom, currentValues, currentVelocity) {\n  var _a;\n\n  if (currentValues === void 0) {\n    currentValues = {};\n  }\n\n  if (currentVelocity === void 0) {\n    currentVelocity = {};\n  }\n\n  if (typeof definition === \"string\") {\n    definition = (_a = props.variants) === null || _a === void 0 ? void 0 : _a[definition];\n  }\n\n  return typeof definition === \"function\" ? definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity) : definition;\n}\n\nfunction resolveVariant(visualElement, definition, custom) {\n  var props = visualElement.getProps();\n  return resolveVariantFromProps(props, definition, custom !== null && custom !== void 0 ? custom : props.custom, getCurrent(visualElement), getVelocity(visualElement));\n}\n\nfunction checkIfControllingVariants(props) {\n  var _a;\n\n  return typeof ((_a = props.animate) === null || _a === void 0 ? void 0 : _a.start) === \"function\" || isVariantLabel(props.initial) || isVariantLabel(props.animate) || isVariantLabel(props.whileHover) || isVariantLabel(props.whileDrag) || isVariantLabel(props.whileTap) || isVariantLabel(props.whileFocus) || isVariantLabel(props.exit);\n}\n\nfunction checkIfVariantNode(props) {\n  return Boolean(checkIfControllingVariants(props) || props.variants);\n}\n\nexport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel, isVariantLabels, resolveVariant, resolveVariantFromProps };","import { useMemo, useContext } from 'react';\nimport { MotionContext } from './index.js';\nimport { getCurrentTreeVariants } from './utils.js';\n\nfunction useCreateMotionContext(props, isStatic) {\n  var _a = getCurrentTreeVariants(props, useContext(MotionContext)),\n      initial = _a.initial,\n      animate = _a.animate;\n\n  return useMemo(function () {\n    return {\n      initial: initial,\n      animate: animate\n    };\n  },\n  /**\n   * Only break memoisation in static mode\n   */\n  isStatic ? [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)] : []);\n}\n\nfunction variantLabelsAsDependency(prop) {\n  return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\nexport { useCreateMotionContext };","import { checkIfControllingVariants, isVariantLabel } from '../../render/utils/variants.js';\n\nfunction getCurrentTreeVariants(props, context) {\n  if (checkIfControllingVariants(props)) {\n    var initial = props.initial,\n        animate = props.animate;\n    return {\n      initial: initial === false || isVariantLabel(initial) ? initial : undefined,\n      animate: isVariantLabel(animate) ? animate : undefined\n    };\n  }\n\n  return props.inherit !== false ? context : {};\n}\n\nexport { getCurrentTreeVariants };","import * as React from 'react';\nimport { forwardRef, useContext } from 'react';\nimport { useFeatures } from './features/use-features.js';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { MotionContext } from '../context/MotionContext/index.js';\nimport { useVisualElement } from './utils/use-visual-element.js';\nimport { useMotionRef } from './utils/use-motion-ref.js';\nimport { useCreateMotionContext } from '../context/MotionContext/create.js';\nimport { loadFeatures } from './features/definitions.js';\nimport { isBrowser } from '../utils/is-browser.js';\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n *\n * @internal\n */\n\nfunction createMotionComponent(_a) {\n  var preloadedFeatures = _a.preloadedFeatures,\n      createVisualElement = _a.createVisualElement,\n      useRender = _a.useRender,\n      useVisualState = _a.useVisualState,\n      Component = _a.Component;\n  preloadedFeatures && loadFeatures(preloadedFeatures);\n\n  function MotionComponent(props, externalRef) {\n    /**\n     * If we're rendering in a static environment, we only visually update the component\n     * as a result of a React-rerender rather than interactions or animations. This\n     * means we don't need to load additional memory structures like VisualElement,\n     * or any gesture/animation features.\n     */\n    var isStatic = useContext(MotionConfigContext).isStatic;\n    var features = null;\n    /**\n     * Create the tree context. This is memoized and will only trigger renders\n     * when the current tree variant changes in static mode.\n     */\n\n    var context = useCreateMotionContext(props, isStatic);\n    /**\n     *\n     */\n\n    var visualState = useVisualState(props, isStatic);\n\n    if (!isStatic && isBrowser) {\n      /**\n       * Create a VisualElement for this component. A VisualElement provides a common\n       * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n       * providing a way of rendering to these APIs outside of the React render loop\n       * for more performant animations and interactions\n       */\n      context.visualElement = useVisualElement(Component, visualState, props, createVisualElement);\n      /**\n       * Load Motion gesture and animation features. These are rendered as renderless\n       * components so each feature can optionally make use of React lifecycle methods.\n       *\n       * TODO: The intention is to move these away from a React-centric to a\n       * VisualElement-centric lifecycle scheme.\n       */\n\n      features = useFeatures(props, context.visualElement, preloadedFeatures);\n    }\n    /**\n     * The mount order and hierarchy is specific to ensure our element ref\n     * is hydrated by the time features fire their effects.\n     */\n\n\n    return React.createElement(React.Fragment, null, React.createElement(MotionContext.Provider, {\n      value: context\n    }, useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic)), features);\n  }\n\n  return forwardRef(MotionComponent);\n}\n\nexport { createMotionComponent };","import { useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.js';\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\n\nfunction useMotionRef(visualState, visualElement, externalRef) {\n  return useCallback(function (instance) {\n    var _a;\n\n    instance && ((_a = visualState.mount) === null || _a === void 0 ? void 0 : _a.call(visualState, instance));\n\n    if (visualElement) {\n      instance ? visualElement.mount(instance) : visualElement.unmount();\n    }\n\n    if (externalRef) {\n      if (typeof externalRef === \"function\") {\n        externalRef(instance);\n      } else if (isRefObject(externalRef)) {\n        externalRef.current = instance;\n      }\n    }\n  },\n  /**\n   * Only pass a new ref callback to React if we've received a visual element\n   * factory. Otherwise we'll be mounting/remounting every time externalRef\n   * or other dependencies change.\n   */\n  [visualElement]);\n}\n\nexport { useMotionRef };","import { createMotionComponent } from '../../motion/index.js';\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\n\nfunction createMotionProxy(createConfig) {\n  function custom(Component, customMotionComponentConfig) {\n    if (customMotionComponentConfig === void 0) {\n      customMotionComponentConfig = {};\n    }\n\n    return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n  }\n  /**\n   * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n   * Rather than generating them anew every render.\n   */\n\n\n  var componentCache = new Map();\n  return new Proxy(custom, {\n    /**\n     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n     * The prop name is passed through as `key` and we can use that to generate a `motion`\n     * DOM component with that name.\n     */\n    get: function get(_target, key) {\n      /**\n       * If this element doesn't exist in the component cache, create it and cache.\n       */\n      if (!componentCache.has(key)) {\n        componentCache.set(key, custom(key));\n      }\n\n      return componentCache.get(key);\n    }\n  });\n}\n\nexport { createMotionProxy };","/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nvar lowercaseSVGElements = [\"animate\", \"circle\", \"defs\", \"desc\", \"ellipse\", \"g\", \"image\", \"line\", \"filter\", \"marker\", \"mask\", \"metadata\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"rect\", \"stop\", \"svg\", \"switch\", \"symbol\", \"text\", \"tspan\", \"use\", \"view\"];\nexport { lowercaseSVGElements };","import { lowercaseSVGElements } from '../../svg/lowercase-elements.js';\n\nfunction isSVGComponent(Component) {\n  if (\n  /**\n   * If it's not a string, it's a custom React component. Currently we only support\n   * HTML custom React components.\n   */\n  typeof Component !== \"string\" ||\n  /**\n   * If it contains a dash, the element is a custom HTML webcomponent.\n   */\n  Component.includes(\"-\")) {\n    return false;\n  } else if (\n  /**\n   * If it's in our list of lowercase SVG tags, it's an SVG component\n   */\n  lowercaseSVGElements.indexOf(Component) > -1 ||\n  /**\n   * If it contains a capital letter, it's an SVG component\n   */\n  /[A-Z]/.test(Component)) {\n    return true;\n  }\n\n  return false;\n}\n\nexport { isSVGComponent };","var valueScaleCorrection = {};\n/**\n * @internal\n */\n\nfunction addScaleCorrection(correctors) {\n  for (var key in correctors) {\n    valueScaleCorrection[key] = correctors[key];\n  }\n}\n\nexport { addScaleCorrection, valueScaleCorrection };","/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\n\nvar order = [\"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\n\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n  return transformAxes.forEach(function (axesKey) {\n    return transformProps.push(operationKey + axesKey);\n  });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\n\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\n\n\nvar transformPropSet = new Set(transformProps);\n\nfunction isTransformProp(key) {\n  return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\n\n\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\n\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\n\nexport { isTransformOriginProp, isTransformProp, sortTransformProps, transformAxes, transformProps };","import { valueScaleCorrection } from '../../render/dom/projection/scale-correction.js';\nimport { isTransformProp, isTransformOriginProp } from '../../render/html/utils/transform.js';\n\nfunction isForcedMotionValue(key, _a) {\n  var layout = _a.layout,\n      layoutId = _a.layoutId;\n  return isTransformProp(key) || isTransformOriginProp(key) || (layout || layoutId !== undefined) && (!!valueScaleCorrection[key] || key === \"opacity\");\n}\n\nexport { isForcedMotionValue };","var isMotionValue = function isMotionValue(value) {\n  return value !== null && typeof value === \"object\" && value.getVelocity;\n};\n\nexport { isMotionValue };","import { sortTransformProps } from './transform.js';\nvar translateAlias = {\n  x: \"translateX\",\n  y: \"translateY\",\n  z: \"translateZ\",\n  transformPerspective: \"perspective\"\n};\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\n\nfunction buildTransform(_a, _b, transformIsDefault, transformTemplate) {\n  var transform = _a.transform,\n      transformKeys = _a.transformKeys;\n  var _c = _b.enableHardwareAcceleration,\n      enableHardwareAcceleration = _c === void 0 ? true : _c,\n      _d = _b.allowTransformNone,\n      allowTransformNone = _d === void 0 ? true : _d; // The transform string we're going to build into.\n\n  var transformString = \"\"; // Transform keys into their default order - this will determine the output order.\n\n  transformKeys.sort(sortTransformProps); // Track whether the defined transform has a defined z so we don't add a\n  // second to enable hardware acceleration\n\n  var transformHasZ = false; // Loop over each transform and build them into transformString\n\n  var numTransformKeys = transformKeys.length;\n\n  for (var i = 0; i < numTransformKeys; i++) {\n    var key = transformKeys[i];\n    transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n    if (key === \"z\") transformHasZ = true;\n  }\n\n  if (!transformHasZ && enableHardwareAcceleration) {\n    transformString += \"translateZ(0)\";\n  } else {\n    transformString = transformString.trim();\n  } // If we have a custom `transform` template, pass our transform values and\n  // generated transformString to that before returning\n\n\n  if (transformTemplate) {\n    transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n  } else if (allowTransformNone && transformIsDefault) {\n    transformString = \"none\";\n  }\n\n  return transformString;\n}\n/**\n * Build a transformOrigin style. Uses the same defaults as the browser for\n * undefined origins.\n */\n\n\nfunction buildTransformOrigin(_a) {\n  var _b = _a.originX,\n      originX = _b === void 0 ? \"50%\" : _b,\n      _c = _a.originY,\n      originY = _c === void 0 ? \"50%\" : _c,\n      _d = _a.originZ,\n      originZ = _d === void 0 ? 0 : _d;\n  return originX + \" \" + originY + \" \" + originZ;\n}\n\nexport { buildTransform, buildTransformOrigin };","/**\n * Returns true if the provided key is a CSS variable\n */\nfunction isCSSVariable(key) {\n  return key.startsWith(\"--\");\n}\n\nexport { isCSSVariable };","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nvar getValueAsType = function getValueAsType(value, type) {\n  return type && typeof value === \"number\" ? type.transform(value) : value;\n};\n\nexport { getValueAsType };","var clamp = function clamp(min, max) {\n  return function (v) {\n    return Math.max(Math.min(v, max), min);\n  };\n};\n\nvar sanitize = function sanitize(v) {\n  return v % 1 ? Number(v.toFixed(5)) : v;\n};\n\nvar floatRegex = /(-)?([\\d]*\\.?[\\d])+/g;\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))/gi;\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))$/i;\n\nfunction isString(v) {\n  return typeof v === 'string';\n}\n\nexport { clamp, colorRegex, floatRegex, isString, sanitize, singleColorRegex };","import { __assign } from 'tslib';\nimport { isString } from '../utils.js';\n\nvar createUnitType = function createUnitType(unit) {\n  return {\n    test: function test(v) {\n      return isString(v) && v.endsWith(unit) && v.split(' ').length === 1;\n    },\n    parse: parseFloat,\n    transform: function transform(v) {\n      return \"\" + v + unit;\n    }\n  };\n};\n\nvar degrees = createUnitType('deg');\nvar percent = createUnitType('%');\nvar px = createUnitType('px');\nvar vh = createUnitType('vh');\nvar vw = createUnitType('vw');\n\nvar progressPercentage = __assign(__assign({}, percent), {\n  parse: function parse(v) {\n    return percent.parse(v) / 100;\n  },\n  transform: function transform(v) {\n    return percent.transform(v * 100);\n  }\n});\n\nexport { degrees, percent, progressPercentage, px, vh, vw };","import { __assign } from 'tslib';\nimport { clamp } from '../utils.js';\nvar number = {\n  test: function test(v) {\n    return typeof v === 'number';\n  },\n  parse: parseFloat,\n  transform: function transform(v) {\n    return v;\n  }\n};\n\nvar alpha = __assign(__assign({}, number), {\n  transform: clamp(0, 1)\n});\n\nvar scale = __assign(__assign({}, number), {\n  default: 1\n});\n\nexport { alpha, number, scale };","import { __assign } from 'tslib';\nimport { number } from 'style-value-types';\n\nvar int = __assign(__assign({}, number), {\n  transform: Math.round\n});\n\nexport { int };","import { px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { int } from './type-int.js';\nvar numberValueTypes = {\n  // Border props\n  borderWidth: px,\n  borderTopWidth: px,\n  borderRightWidth: px,\n  borderBottomWidth: px,\n  borderLeftWidth: px,\n  borderRadius: px,\n  radius: px,\n  borderTopLeftRadius: px,\n  borderTopRightRadius: px,\n  borderBottomRightRadius: px,\n  borderBottomLeftRadius: px,\n  // Positioning props\n  width: px,\n  maxWidth: px,\n  height: px,\n  maxHeight: px,\n  size: px,\n  top: px,\n  right: px,\n  bottom: px,\n  left: px,\n  // Spacing props\n  padding: px,\n  paddingTop: px,\n  paddingRight: px,\n  paddingBottom: px,\n  paddingLeft: px,\n  margin: px,\n  marginTop: px,\n  marginRight: px,\n  marginBottom: px,\n  marginLeft: px,\n  // Transform props\n  rotate: degrees,\n  rotateX: degrees,\n  rotateY: degrees,\n  rotateZ: degrees,\n  scale: scale,\n  scaleX: scale,\n  scaleY: scale,\n  scaleZ: scale,\n  skew: degrees,\n  skewX: degrees,\n  skewY: degrees,\n  distance: px,\n  translateX: px,\n  translateY: px,\n  translateZ: px,\n  x: px,\n  y: px,\n  z: px,\n  perspective: px,\n  transformPerspective: px,\n  opacity: alpha,\n  originX: progressPercentage,\n  originY: progressPercentage,\n  originZ: px,\n  // Misc\n  zIndex: int,\n  // SVG\n  fillOpacity: alpha,\n  strokeOpacity: alpha,\n  numOctaves: int\n};\nexport { numberValueTypes };","import { valueScaleCorrection } from '../../dom/projection/scale-correction.js';\nimport { buildTransform, buildTransformOrigin } from './build-transform.js';\nimport { isCSSVariable } from '../../dom/utils/is-css-variable.js';\nimport { isTransformProp, isTransformOriginProp } from './transform.js';\nimport { getValueAsType } from '../../dom/value-types/get-as-type.js';\nimport { numberValueTypes } from '../../dom/value-types/number.js';\n\nfunction buildHTMLStyles(state, latestValues, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n  var _a;\n\n  var style = state.style,\n      vars = state.vars,\n      transform = state.transform,\n      transformKeys = state.transformKeys,\n      transformOrigin = state.transformOrigin; // Empty the transformKeys array. As we're throwing out refs to its items\n  // this might not be as cheap as suspected. Maybe using the array as a buffer\n  // with a manual incrementation would be better.\n\n  transformKeys.length = 0; // Track whether we encounter any transform or transformOrigin values.\n\n  var hasTransform = false;\n  var hasTransformOrigin = false; // Does the calculated transform essentially equal \"none\"?\n\n  var transformIsNone = true;\n  /**\n   * Loop over all our latest animated values and decide whether to handle them\n   * as a style or CSS variable.\n   *\n   * Transforms and transform origins are kept seperately for further processing.\n   */\n\n  for (var key in latestValues) {\n    var value = latestValues[key];\n    /**\n     * If this is a CSS variable we don't do any further processing.\n     */\n\n    if (isCSSVariable(key)) {\n      vars[key] = value;\n      continue;\n    } // Convert the value to its default value type, ie 0 -> \"0px\"\n\n\n    var valueType = numberValueTypes[key];\n    var valueAsType = getValueAsType(value, valueType);\n\n    if (isTransformProp(key)) {\n      // If this is a transform, flag to enable further transform processing\n      hasTransform = true;\n      transform[key] = valueAsType;\n      transformKeys.push(key); // If we already know we have a non-default transform, early return\n\n      if (!transformIsNone) continue; // Otherwise check to see if this is a default transform\n\n      if (value !== ((_a = valueType.default) !== null && _a !== void 0 ? _a : 0)) transformIsNone = false;\n    } else if (isTransformOriginProp(key)) {\n      transformOrigin[key] = valueAsType; // If this is a transform origin, flag and enable further transform-origin processing\n\n      hasTransformOrigin = true;\n    } else {\n      /**\n       * If layout projection is on, and we need to perform scale correction for this\n       * value type, perform it.\n       */\n      if ((projection === null || projection === void 0 ? void 0 : projection.isHydrated) && (layoutState === null || layoutState === void 0 ? void 0 : layoutState.isHydrated) && valueScaleCorrection[key]) {\n        var correctedValue = valueScaleCorrection[key].process(value, layoutState, projection);\n        /**\n         * Scale-correctable values can define a number of other values to break\n         * down into. For instance borderRadius needs applying to borderBottomLeftRadius etc\n         */\n\n        var applyTo = valueScaleCorrection[key].applyTo;\n\n        if (applyTo) {\n          var num = applyTo.length;\n\n          for (var i = 0; i < num; i++) {\n            style[applyTo[i]] = correctedValue;\n          }\n        } else {\n          style[key] = correctedValue;\n        }\n      } else {\n        style[key] = valueAsType;\n      }\n    }\n  }\n\n  if (layoutState && projection && buildProjectionTransform && buildProjectionTransformOrigin) {\n    style.transform = buildProjectionTransform(layoutState.deltaFinal, layoutState.treeScale, hasTransform ? transform : undefined);\n\n    if (transformTemplate) {\n      style.transform = transformTemplate(transform, style.transform);\n    }\n\n    style.transformOrigin = buildProjectionTransformOrigin(layoutState);\n  } else {\n    if (hasTransform) {\n      style.transform = buildTransform(state, options, transformIsNone, transformTemplate);\n    }\n\n    if (hasTransformOrigin) {\n      style.transformOrigin = buildTransformOrigin(transformOrigin);\n    }\n  }\n}\n\nexport { buildHTMLStyles };","var createHtmlRenderState = function createHtmlRenderState() {\n  return {\n    style: {},\n    transform: {},\n    transformKeys: [],\n    transformOrigin: {},\n    vars: {}\n  };\n};\n\nexport { createHtmlRenderState };","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { createHtmlRenderState } from './utils/create-render-state.js';\n\nfunction copyRawValuesOnly(target, source, props) {\n  for (var key in source) {\n    if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n      target[key] = source[key];\n    }\n  }\n}\n\nfunction useInitialMotionValues(_a, visualState, isStatic) {\n  var transformTemplate = _a.transformTemplate;\n  return useMemo(function () {\n    var state = createHtmlRenderState();\n    buildHTMLStyles(state, visualState, undefined, undefined, {\n      enableHardwareAcceleration: !isStatic\n    }, transformTemplate);\n    var vars = state.vars,\n        style = state.style;\n    return __assign(__assign({}, vars), style);\n  }, [visualState]);\n}\n\nfunction useStyle(props, visualState, isStatic) {\n  var styleProp = props.style || {};\n  var style = {};\n  /**\n   * Copy non-Motion Values straight into style\n   */\n\n  copyRawValuesOnly(style, styleProp, props);\n  Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n\n  if (props.transformValues) {\n    style = props.transformValues(style);\n  }\n\n  return style;\n}\n\nfunction useHTMLProps(props, visualState, isStatic) {\n  // The `any` isn't ideal but it is the type of createElement props argument\n  var htmlProps = {};\n  var style = useStyle(props, visualState, isStatic);\n\n  if (Boolean(props.drag)) {\n    // Disable the ghost element when a user drags\n    htmlProps.draggable = false; // Disable text selection\n\n    style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout = \"none\"; // Disable scrolling on the draggable direction\n\n    style.touchAction = props.drag === true ? \"none\" : \"pan-\" + (props.drag === \"x\" ? \"y\" : \"x\");\n  }\n\n  htmlProps.style = style;\n  return htmlProps;\n}\n\nexport { copyRawValuesOnly, useHTMLProps, useStyle };","/**\n * A list of all valid MotionProps.\n *\n * @internalremarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set([\"initial\", \"animate\", \"exit\", \"style\", \"variants\", \"transition\", \"transformTemplate\", \"transformValues\", \"custom\", \"inherit\", \"layout\", \"layoutId\", \"_layoutResetTransform\", \"onLayoutAnimationComplete\", \"onViewportBoxUpdate\", \"onLayoutMeasure\", \"onBeforeLayoutMeasure\", \"onAnimationStart\", \"onAnimationComplete\", \"onUpdate\", \"onDragStart\", \"onDrag\", \"onDragEnd\", \"onMeasureDragConstraints\", \"onDirectionLock\", \"onDragTransitionEnd\", \"drag\", \"dragControls\", \"dragListener\", \"dragConstraints\", \"dragDirectionLock\", \"_dragX\", \"_dragY\", \"dragElastic\", \"dragMomentum\", \"dragPropagation\", \"dragTransition\", \"whileDrag\", \"onPan\", \"onPanStart\", \"onPanEnd\", \"onPanSessionStart\", \"onTap\", \"onTapStart\", \"onTapCancel\", \"onHoverStart\", \"onHoverEnd\", \"whileFocus\", \"whileTap\", \"whileHover\"]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\n\nfunction isValidMotionProp(key) {\n  return validMotionProps.has(key);\n}\n\nexport { isValidMotionProp };","import { isValidMotionProp } from '../../../motion/utils/valid-prop.js';\n\nvar shouldForward = function shouldForward(key) {\n  return !isValidMotionProp(key);\n};\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\n\n\ntry {\n  var emotionIsPropValid_1 = require(\"@emotion/is-prop-valid\").default;\n\n  shouldForward = function shouldForward(key) {\n    // Handle events explicitly as Emotion validates them all as true\n    if (key.startsWith(\"on\")) {\n      return !isValidMotionProp(key);\n    } else {\n      return emotionIsPropValid_1(key);\n    }\n  };\n} catch (_a) {// We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\n\nfunction filterProps(props, isDom, forwardMotionProps) {\n  var filteredProps = {};\n\n  for (var key in props) {\n    if (shouldForward(key) || forwardMotionProps === true && isValidMotionProp(key) || !isDom && !isValidMotionProp(key)) {\n      filteredProps[key] = props[key];\n    }\n  }\n\n  return filteredProps;\n}\n\nexport { filterProps };","import { px } from 'style-value-types';\n\nfunction calcOrigin(origin, offset, size) {\n  return typeof origin === \"string\" ? origin : px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\n\n\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n  var pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\n  var pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\n  return pxOriginX + \" \" + pxOriginY;\n}\n\nexport { calcSVGTransformOrigin };","import { px } from 'style-value-types'; // Convert a progress 0-1 to a pixels value based on the provided length\n\nvar progressToPixels = function progressToPixels(progress, length) {\n  return px.transform(progress * length);\n};\n\nvar dashKeys = {\n  offset: \"stroke-dashoffset\",\n  array: \"stroke-dasharray\"\n};\nvar camelKeys = {\n  offset: \"strokeDashoffset\",\n  array: \"strokeDasharray\"\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\n\nfunction buildSVGPath(attrs, totalLength, length, spacing, offset, useDashCase) {\n  if (spacing === void 0) {\n    spacing = 1;\n  }\n\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  if (useDashCase === void 0) {\n    useDashCase = true;\n  } // We use dash case when setting attributes directly to the DOM node and camel case\n  // when defining props on a React component.\n\n\n  var keys = useDashCase ? dashKeys : camelKeys; // Build the dash offset\n\n  attrs[keys.offset] = progressToPixels(-offset, totalLength); // Build the dash array\n\n  var pathLength = progressToPixels(length, totalLength);\n  var pathSpacing = progressToPixels(spacing, totalLength);\n  attrs[keys.array] = pathLength + \" \" + pathSpacing;\n}\n\nexport { buildSVGPath };","import { __rest } from 'tslib';\nimport { buildHTMLStyles } from '../../html/utils/build-styles.js';\nimport { calcSVGTransformOrigin } from './transform-origin.js';\nimport { buildSVGPath } from './path.js';\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\n\nfunction buildSVGAttrs(state, _a, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n  var attrX = _a.attrX,\n      attrY = _a.attrY,\n      originX = _a.originX,\n      originY = _a.originY,\n      pathLength = _a.pathLength,\n      _b = _a.pathSpacing,\n      pathSpacing = _b === void 0 ? 1 : _b,\n      _c = _a.pathOffset,\n      pathOffset = _c === void 0 ? 0 : _c,\n      // This is object creation, which we try to avoid per-frame.\n  latest = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n\n  buildHTMLStyles(state, latest, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin);\n  state.attrs = state.style;\n  state.style = {};\n  var attrs = state.attrs,\n      style = state.style,\n      dimensions = state.dimensions,\n      totalPathLength = state.totalPathLength;\n  /**\n   * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n   * and copy it into style.\n   */\n\n  if (attrs.transform) {\n    if (dimensions) style.transform = attrs.transform;\n    delete attrs.transform;\n  } // Parse transformOrigin\n\n\n  if (dimensions && (originX !== undefined || originY !== undefined || style.transform)) {\n    style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n  } // Treat x/y not as shortcuts but as actual attributes\n\n\n  if (attrX !== undefined) attrs.x = attrX;\n  if (attrY !== undefined) attrs.y = attrY; // Build SVG path if one has been measured\n\n  if (totalPathLength !== undefined && pathLength !== undefined) {\n    buildSVGPath(attrs, totalPathLength, pathLength, pathSpacing, pathOffset, false);\n  }\n}\n\nexport { buildSVGAttrs };","import { __assign } from 'tslib';\nimport { createHtmlRenderState } from '../../html/utils/create-render-state.js';\n\nvar createSvgRenderState = function createSvgRenderState() {\n  return __assign(__assign({}, createHtmlRenderState()), {\n    attrs: {}\n  });\n};\n\nexport { createSvgRenderState };","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { copyRawValuesOnly } from '../html/use-props.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { createSvgRenderState } from './utils/create-render-state.js';\n\nfunction useSVGProps(props, visualState) {\n  var visualProps = useMemo(function () {\n    var state = createSvgRenderState();\n    buildSVGAttrs(state, visualState, undefined, undefined, {\n      enableHardwareAcceleration: false\n    }, props.transformTemplate);\n    return __assign(__assign({}, state.attrs), {\n      style: __assign({}, state.style)\n    });\n  }, [visualState]);\n\n  if (props.style) {\n    var rawStyles = {};\n    copyRawValuesOnly(rawStyles, props.style, props);\n    visualProps.style = __assign(__assign({}, rawStyles), visualProps.style);\n  }\n\n  return visualProps;\n}\n\nexport { useSVGProps };","import { __assign } from 'tslib';\nimport { createElement } from 'react';\nimport { useHTMLProps } from '../html/use-props.js';\nimport { filterProps } from './utils/filter-props.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\nimport { useSVGProps } from '../svg/use-props.js';\n\nfunction createUseRender(forwardMotionProps) {\n  if (forwardMotionProps === void 0) {\n    forwardMotionProps = false;\n  }\n\n  var useRender = function useRender(Component, props, ref, _a, isStatic) {\n    var latestValues = _a.latestValues;\n    var useVisualProps = isSVGComponent(Component) ? useSVGProps : useHTMLProps;\n    var visualProps = useVisualProps(props, latestValues, isStatic);\n    var filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n\n    var elementProps = __assign(__assign(__assign({}, filteredProps), visualProps), {\n      ref: ref\n    });\n\n    return createElement(Component, elementProps);\n  };\n\n  return useRender;\n}\n\nexport { createUseRender };","var CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = \"$1-$2\";\n/**\n * Convert camelCase to dash-case properties.\n */\n\nvar camelToDash = function camelToDash(str) {\n  return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nexport { camelToDash };","function renderHTML(element, _a) {\n  var style = _a.style,\n      vars = _a.vars; // Directly assign style into the Element's style prop. In tests Object.assign is the\n  // fastest way to assign styles.\n\n  Object.assign(element.style, style); // Loop over any CSS variables and assign those.\n\n  for (var key in vars) {\n    element.style.setProperty(key, vars[key]);\n  }\n}\n\nexport { renderHTML };","/**\n * A set of attribute names that are always read/written as camel case.\n */\nvar camelCaseAttributes = new Set([\"baseFrequency\", \"diffuseConstant\", \"kernelMatrix\", \"kernelUnitLength\", \"keySplines\", \"keyTimes\", \"limitingConeAngle\", \"markerHeight\", \"markerWidth\", \"numOctaves\", \"targetX\", \"targetY\", \"surfaceScale\", \"specularConstant\", \"specularExponent\", \"stdDeviation\", \"tableValues\", \"viewBox\", \"gradientTransform\"]);\nexport { camelCaseAttributes };","import { camelToDash } from '../../dom/utils/camel-to-dash.js';\nimport { renderHTML } from '../../html/utils/render.js';\nimport { camelCaseAttributes } from './camel-case-attrs.js';\n\nfunction renderSVG(element, renderState) {\n  renderHTML(element, renderState);\n\n  for (var key in renderState.attrs) {\n    element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n  }\n}\n\nexport { renderSVG };","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.js';\nimport { isMotionValue } from '../../../value/utils/is-motion-value.js';\n\nfunction scrapeMotionValuesFromProps(props) {\n  var style = props.style;\n  var newValues = {};\n\n  for (var key in style) {\n    if (isMotionValue(style[key]) || isForcedMotionValue(key, props)) {\n      newValues[key] = style[key];\n    }\n  }\n\n  return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };","import { isMotionValue } from '../../../value/utils/is-motion-value.js';\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.js';\n\nfunction scrapeMotionValuesFromProps(props) {\n  var newValues = scrapeMotionValuesFromProps$1(props);\n\n  for (var key in props) {\n    if (isMotionValue(props[key])) {\n      var targetKey = key === \"x\" || key === \"y\" ? \"attr\" + key.toUpperCase() : key;\n      newValues[targetKey] = props[key];\n    }\n  }\n\n  return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };","function isAnimationControls(v) {\n  return typeof v === \"object\" && typeof v.start === \"function\";\n}\n\nexport { isAnimationControls };","var isKeyframesTarget = function isKeyframesTarget(v) {\n  return Array.isArray(v);\n};\n\nexport { isKeyframesTarget };","import { isCustomValue } from '../../utils/resolve-value.js';\nimport { isMotionValue } from './is-motion-value.js';\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n *\n * @internal\n */\n\nfunction resolveMotionValue(value) {\n  var unwrappedValue = isMotionValue(value) ? value.get() : value;\n  return isCustomValue(unwrappedValue) ? unwrappedValue.toValue() : unwrappedValue;\n}\n\nexport { resolveMotionValue };","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.js';\n\nvar isCustomValue = function isCustomValue(v) {\n  return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\n\nvar resolveFinalValueInKeyframes = function resolveFinalValueInKeyframes(v) {\n  // TODO maybe throw if v.length - 1 is placeholder token?\n  return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\nexport { isCustomValue, resolveFinalValueInKeyframes };","import { __rest } from 'tslib';\nimport { useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { checkIfControllingVariants, checkIfVariantNode, resolveVariantFromProps } from '../../render/utils/variants.js';\nimport { useConstant } from '../../utils/use-constant.js';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.js';\nimport { MotionContext } from '../../context/MotionContext/index.js';\n\nfunction makeState(_a, props, context, presenceContext) {\n  var scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps,\n      createRenderState = _a.createRenderState,\n      onMount = _a.onMount;\n  var state = {\n    latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n    renderState: createRenderState()\n  };\n\n  if (onMount) {\n    state.mount = function (instance) {\n      return onMount(props, instance, state);\n    };\n  }\n\n  return state;\n}\n\nvar makeUseVisualState = function makeUseVisualState(config) {\n  return function (props, isStatic) {\n    var context = useContext(MotionContext);\n    var presenceContext = useContext(PresenceContext);\n    return isStatic ? makeState(config, props, context, presenceContext) : useConstant(function () {\n      return makeState(config, props, context, presenceContext);\n    });\n  };\n};\n\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n  var values = {};\n  var blockInitialAnimation = (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false;\n  var motionValues = scrapeMotionValues(props);\n\n  for (var key in motionValues) {\n    values[key] = resolveMotionValue(motionValues[key]);\n  }\n\n  var initial = props.initial,\n      animate = props.animate;\n  var isControllingVariants = checkIfControllingVariants(props);\n  var isVariantNode = checkIfVariantNode(props);\n\n  if (context && isVariantNode && !isControllingVariants && props.inherit !== false) {\n    initial !== null && initial !== void 0 ? initial : initial = context.initial;\n    animate !== null && animate !== void 0 ? animate : animate = context.animate;\n  }\n\n  var variantToSet = blockInitialAnimation || initial === false ? animate : initial;\n\n  if (variantToSet && typeof variantToSet !== \"boolean\" && !isAnimationControls(variantToSet)) {\n    var list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n    list.forEach(function (definition) {\n      var resolved = resolveVariantFromProps(props, definition);\n      if (!resolved) return;\n      var transitionEnd = resolved.transitionEnd;\n      resolved.transition;\n\n      var target = __rest(resolved, [\"transitionEnd\", \"transition\"]);\n\n      for (var key in target) {\n        values[key] = target[key];\n      }\n\n      for (var key in transitionEnd) {\n        values[key] = transitionEnd[key];\n      }\n    });\n  }\n\n  return values;\n}\n\nexport { makeUseVisualState };","import { renderSVG } from './utils/render.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { makeUseVisualState } from '../../motion/utils/use-visual-state.js';\nimport { createSvgRenderState } from './utils/create-render-state.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nvar svgMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createSvgRenderState,\n    onMount: function onMount(props, instance, _a) {\n      var renderState = _a.renderState,\n          latestValues = _a.latestValues;\n\n      try {\n        renderState.dimensions = typeof instance.getBBox === \"function\" ? instance.getBBox() : instance.getBoundingClientRect();\n      } catch (e) {\n        // Most likely trying to measure an unrendered element under Firefox\n        renderState.dimensions = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (isPath(instance)) {\n        renderState.totalPathLength = instance.getTotalLength();\n      }\n\n      buildSVGAttrs(renderState, latestValues, undefined, undefined, {\n        enableHardwareAcceleration: false\n      }, props.transformTemplate); // TODO: Replace with direct assignment\n\n      renderSVG(instance, renderState);\n    }\n  })\n};\n\nfunction isPath(element) {\n  return element.tagName === \"path\";\n}\n\nexport { svgMotionConfig };","import { makeUseVisualState } from '../../motion/utils/use-visual-state.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { createHtmlRenderState } from './utils/create-render-state.js';\nvar htmlMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createHtmlRenderState\n  })\n};\nexport { htmlMotionConfig };","var AnimationType;\n\n(function (AnimationType) {\n  AnimationType[\"Animate\"] = \"animate\";\n  AnimationType[\"Hover\"] = \"whileHover\";\n  AnimationType[\"Tap\"] = \"whileTap\";\n  AnimationType[\"Drag\"] = \"whileDrag\";\n  AnimationType[\"Focus\"] = \"whileFocus\";\n  AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\n\nexport { AnimationType };","import { useEffect } from 'react';\n\nfunction addDomEvent(target, eventName, handler, options) {\n  target.addEventListener(eventName, handler, options);\n  return function () {\n    return target.removeEventListener(eventName, handler, options);\n  };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\n\n\nfunction useDomEvent(ref, eventName, handler, options) {\n  useEffect(function () {\n    var element = ref.current;\n\n    if (handler && element) {\n      return addDomEvent(element, eventName, handler, options);\n    }\n  }, [ref, eventName, handler, options]);\n}\n\nexport { addDomEvent, useDomEvent };","function isMouseEvent(event) {\n  // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n  if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n    return !!(event.pointerType === \"mouse\");\n  }\n\n  return event instanceof MouseEvent;\n}\n\nfunction isTouchEvent(event) {\n  var hasTouches = !!event.touches;\n  return hasTouches;\n}\n\nexport { isMouseEvent, isTouchEvent };","import { isTouchEvent } from '../gestures/utils/event-type.js';\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\n\nfunction filterPrimaryPointer(eventHandler) {\n  return function (event) {\n    var isMouseEvent = event instanceof MouseEvent;\n    var isPrimaryPointer = !isMouseEvent || isMouseEvent && event.button === 0;\n\n    if (isPrimaryPointer) {\n      eventHandler(event);\n    }\n  };\n}\n\nvar defaultPagePoint = {\n  pageX: 0,\n  pageY: 0\n};\n\nfunction pointFromTouch(e, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  var primaryTouch = e.touches[0] || e.changedTouches[0];\n  var point = primaryTouch || defaultPagePoint;\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction pointFromMouse(point, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction extractEventInfo(event, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    point: isTouchEvent(event) ? pointFromTouch(event, pointType) : pointFromMouse(event, pointType)\n  };\n}\n\nfunction getViewportPointFromEvent(event) {\n  return extractEventInfo(event, \"client\");\n}\n\nvar wrapHandler = function wrapHandler(handler, shouldFilterPrimaryPointer) {\n  if (shouldFilterPrimaryPointer === void 0) {\n    shouldFilterPrimaryPointer = false;\n  }\n\n  var listener = function listener(event) {\n    return handler(event, extractEventInfo(event));\n  };\n\n  return shouldFilterPrimaryPointer ? filterPrimaryPointer(listener) : listener;\n};\n\nexport { extractEventInfo, getViewportPointFromEvent, wrapHandler };","import { useDomEvent, addDomEvent } from './use-dom-event.js';\nimport { wrapHandler } from './event-info.js';\nimport { supportsPointerEvents, supportsTouchEvents, supportsMouseEvents } from './utils.js';\nvar mouseEventNames = {\n  pointerdown: \"mousedown\",\n  pointermove: \"mousemove\",\n  pointerup: \"mouseup\",\n  pointercancel: \"mousecancel\",\n  pointerover: \"mouseover\",\n  pointerout: \"mouseout\",\n  pointerenter: \"mouseenter\",\n  pointerleave: \"mouseleave\"\n};\nvar touchEventNames = {\n  pointerdown: \"touchstart\",\n  pointermove: \"touchmove\",\n  pointerup: \"touchend\",\n  pointercancel: \"touchcancel\"\n};\n\nfunction getPointerEventName(name) {\n  if (supportsPointerEvents()) {\n    return name;\n  } else if (supportsTouchEvents()) {\n    return touchEventNames[name];\n  } else if (supportsMouseEvents()) {\n    return mouseEventNames[name];\n  }\n\n  return name;\n}\n\nfunction addPointerEvent(target, eventName, handler, options) {\n  return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nfunction usePointerEvent(ref, eventName, handler, options) {\n  return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nexport { addPointerEvent, usePointerEvent };","import { isBrowser } from '../utils/is-browser.js'; // We check for event support via functions in case they've been mocked by a testing suite.\n\nvar supportsPointerEvents = function supportsPointerEvents() {\n  return isBrowser && window.onpointerdown === null;\n};\n\nvar supportsTouchEvents = function supportsTouchEvents() {\n  return isBrowser && window.ontouchstart === null;\n};\n\nvar supportsMouseEvents = function supportsMouseEvents() {\n  return isBrowser && window.onmousedown === null;\n};\n\nexport { supportsMouseEvents, supportsPointerEvents, supportsTouchEvents };","function createLock(name) {\n  var lock = null;\n  return function () {\n    var openLock = function openLock() {\n      lock = null;\n    };\n\n    if (lock === null) {\n      lock = name;\n      return openLock;\n    }\n\n    return false;\n  };\n}\n\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\n\nfunction getGlobalLock(drag) {\n  var lock = false;\n\n  if (drag === \"y\") {\n    lock = globalVerticalLock();\n  } else if (drag === \"x\") {\n    lock = globalHorizontalLock();\n  } else {\n    var openHorizontal_1 = globalHorizontalLock();\n    var openVertical_1 = globalVerticalLock();\n\n    if (openHorizontal_1 && openVertical_1) {\n      lock = function lock() {\n        openHorizontal_1();\n        openVertical_1();\n      };\n    } else {\n      // Release the locks because we don't use them\n      if (openHorizontal_1) openHorizontal_1();\n      if (openVertical_1) openVertical_1();\n    }\n  }\n\n  return lock;\n}\n\nfunction isDragActive() {\n  // Check the gesture lock - if we get it, it means no drag gesture is active\n  // and we can safely fire the tap gesture.\n  var openGestureLock = getGlobalLock(true);\n  if (!openGestureLock) return true;\n  openGestureLock();\n  return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };","import { isMouseEvent } from './utils/event-type.js';\nimport { AnimationType } from '../render/utils/types.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { isDragActive } from './drag/utils/lock.js';\n\nfunction createHoverEvent(visualElement, isActive, callback) {\n  return function (event, info) {\n    var _a;\n\n    if (!isMouseEvent(event) || isDragActive()) return;\n    callback === null || callback === void 0 ? void 0 : callback(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, isActive);\n  };\n}\n\nfunction useHoverGesture(_a) {\n  var onHoverStart = _a.onHoverStart,\n      onHoverEnd = _a.onHoverEnd,\n      whileHover = _a.whileHover,\n      visualElement = _a.visualElement;\n  usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover ? createHoverEvent(visualElement, true, onHoverStart) : undefined);\n  usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover ? createHoverEvent(visualElement, false, onHoverEnd) : undefined);\n}\n\nexport { useHoverGesture };","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function isNodeOrChild(parent, child) {\n  if (!child) {\n    return false;\n  } else if (parent === child) {\n    return true;\n  } else {\n    return isNodeOrChild(parent, child.parentElement);\n  }\n};\n\nexport { isNodeOrChild };","import { useEffect } from 'react';\n\nfunction useUnmountEffect(callback) {\n  return useEffect(function () {\n    return function () {\n      return callback();\n    };\n  }, []);\n}\n\nexport { useUnmountEffect };","var combineFunctions = function combineFunctions(a, b) {\n  return function (v) {\n    return b(a(v));\n  };\n};\n\nvar pipe = function pipe() {\n  var transformers = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    transformers[_i] = arguments[_i];\n  }\n\n  return transformers.reduce(combineFunctions);\n};\n\nexport { pipe };","var makeRenderlessComponent = function makeRenderlessComponent(hook) {\n  return function (props) {\n    hook(props);\n    return null;\n  };\n};\n\nexport { makeRenderlessComponent };","import { useFocusGesture } from '../../gestures/use-focus-gesture.js';\nimport { useHoverGesture } from '../../gestures/use-hover-gesture.js';\nimport { useTapGesture } from '../../gestures/use-tap-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar gestureAnimations = {\n  tap: makeRenderlessComponent(useTapGesture),\n  focus: makeRenderlessComponent(useFocusGesture),\n  hover: makeRenderlessComponent(useHoverGesture)\n};\nexport { gestureAnimations };","import { useRef } from 'react';\nimport { isNodeOrChild } from './utils/is-node-or-child.js';\nimport { usePointerEvent, addPointerEvent } from '../events/use-pointer-event.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { pipe } from 'popmotion';\nimport { AnimationType } from '../render/utils/types.js';\nimport { isDragActive } from './drag/utils/lock.js';\n/**\n * @param handlers -\n * @internal\n */\n\nfunction useTapGesture(_a) {\n  var onTap = _a.onTap,\n      onTapStart = _a.onTapStart,\n      onTapCancel = _a.onTapCancel,\n      whileTap = _a.whileTap,\n      visualElement = _a.visualElement;\n  var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n  var isPressing = useRef(false);\n  var cancelPointerEndListeners = useRef(null);\n\n  function removePointerEndListener() {\n    var _a;\n\n    (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n    cancelPointerEndListeners.current = null;\n  }\n\n  function checkPointerEnd() {\n    var _a;\n\n    removePointerEndListener();\n    isPressing.current = false;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n    return !isDragActive();\n  }\n\n  function onPointerUp(event, info) {\n    if (!checkPointerEnd()) return;\n    /**\n     * We only count this as a tap gesture if the event.target is the same\n     * as, or a child of, this component's element\n     */\n\n    !isNodeOrChild(visualElement.getInstance(), event.target) ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info) : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n  }\n\n  function onPointerCancel(event, info) {\n    if (!checkPointerEnd()) return;\n    onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n  }\n\n  function onPointerDown(event, info) {\n    var _a;\n\n    removePointerEndListener();\n    if (isPressing.current) return;\n    isPressing.current = true;\n    cancelPointerEndListeners.current = pipe(addPointerEvent(window, \"pointerup\", onPointerUp), addPointerEvent(window, \"pointercancel\", onPointerCancel));\n    onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n  useUnmountEffect(removePointerEndListener);\n}\n\nexport { useTapGesture };","import { AnimationType } from '../render/utils/types.js';\nimport { useDomEvent } from '../events/use-dom-event.js';\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\n\nfunction useFocusGesture(_a) {\n  var whileFocus = _a.whileFocus,\n      visualElement = _a.visualElement;\n\n  var onFocus = function onFocus() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n  };\n\n  var onBlur = function onBlur() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n  };\n\n  useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n  useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\n\nexport { useFocusGesture };","function shallowCompare(next, prev) {\n  if (!Array.isArray(prev)) return false;\n  var prevLength = prev.length;\n  if (prevLength !== next.length) return false;\n\n  for (var i = 0; i < prevLength; i++) {\n    if (prev[i] !== next[i]) return false;\n  }\n\n  return true;\n}\n\nexport { shallowCompare };","var clamp = function clamp(min, max, v) {\n  return Math.min(Math.max(v, min), max);\n};\n\nexport { clamp };","import { warning } from 'hey-listen';\nimport { clamp } from '../../utils/clamp.js';\nvar safeMin = 0.001;\nvar minDuration = 0.01;\nvar maxDuration = 10.0;\nvar minDamping = 0.05;\nvar maxDamping = 1;\n\nfunction findSpring(_a) {\n  var _b = _a.duration,\n      duration = _b === void 0 ? 800 : _b,\n      _c = _a.bounce,\n      bounce = _c === void 0 ? 0.25 : _c,\n      _d = _a.velocity,\n      velocity = _d === void 0 ? 0 : _d,\n      _e = _a.mass,\n      mass = _e === void 0 ? 1 : _e;\n  var envelope;\n  var derivative;\n  warning(duration <= maxDuration * 1000, \"Spring duration must be 10 seconds or less\");\n  var dampingRatio = 1 - bounce;\n  dampingRatio = clamp(minDamping, maxDamping, dampingRatio);\n  duration = clamp(minDuration, maxDuration, duration / 1000);\n\n  if (dampingRatio < 1) {\n    envelope = function envelope(undampedFreq) {\n      var exponentialDecay = undampedFreq * dampingRatio;\n      var delta = exponentialDecay * duration;\n      var a = exponentialDecay - velocity;\n      var b = calcAngularFreq(undampedFreq, dampingRatio);\n      var c = Math.exp(-delta);\n      return safeMin - a / b * c;\n    };\n\n    derivative = function derivative(undampedFreq) {\n      var exponentialDecay = undampedFreq * dampingRatio;\n      var delta = exponentialDecay * duration;\n      var d = delta * velocity + velocity;\n      var e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n      var f = Math.exp(-delta);\n      var g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n      var factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n      return factor * ((d - e) * f) / g;\n    };\n  } else {\n    envelope = function envelope(undampedFreq) {\n      var a = Math.exp(-undampedFreq * duration);\n      var b = (undampedFreq - velocity) * duration + 1;\n      return -safeMin + a * b;\n    };\n\n    derivative = function derivative(undampedFreq) {\n      var a = Math.exp(-undampedFreq * duration);\n      var b = (velocity - undampedFreq) * (duration * duration);\n      return a * b;\n    };\n  }\n\n  var initialGuess = 5 / duration;\n  var undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n  duration = duration * 1000;\n\n  if (isNaN(undampedFreq)) {\n    return {\n      stiffness: 100,\n      damping: 10,\n      duration: duration\n    };\n  } else {\n    var stiffness = Math.pow(undampedFreq, 2) * mass;\n    return {\n      stiffness: stiffness,\n      damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n      duration: duration\n    };\n  }\n}\n\nvar rootIterations = 12;\n\nfunction approximateRoot(envelope, derivative, initialGuess) {\n  var result = initialGuess;\n\n  for (var i = 1; i < rootIterations; i++) {\n    result = result - envelope(result) / derivative(result);\n  }\n\n  return result;\n}\n\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n  return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring, maxDamping, maxDuration, minDamping, minDuration };","import { __rest, __assign } from 'tslib';\nimport { findSpring, calcAngularFreq } from '../utils/find-spring.js';\nvar durationKeys = [\"duration\", \"bounce\"];\nvar physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\n\nfunction isSpringType(options, keys) {\n  return keys.some(function (key) {\n    return options[key] !== undefined;\n  });\n}\n\nfunction getSpringOptions(options) {\n  var springOptions = __assign({\n    velocity: 0.0,\n    stiffness: 100,\n    damping: 10,\n    mass: 1.0,\n    isResolvedFromDuration: false\n  }, options);\n\n  if (!isSpringType(options, physicsKeys) && isSpringType(options, durationKeys)) {\n    var derived = findSpring(options);\n    springOptions = __assign(__assign(__assign({}, springOptions), derived), {\n      velocity: 0.0,\n      mass: 1.0\n    });\n    springOptions.isResolvedFromDuration = true;\n  }\n\n  return springOptions;\n}\n\nfunction spring(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0.0 : _b,\n      _c = _a.to,\n      to = _c === void 0 ? 1.0 : _c,\n      _d = _a.restSpeed,\n      restSpeed = _d === void 0 ? 2 : _d,\n      restDelta = _a.restDelta,\n      options = __rest(_a, [\"from\", \"to\", \"restSpeed\", \"restDelta\"]);\n\n  var state = {\n    done: false,\n    value: from\n  };\n\n  var _e = getSpringOptions(options),\n      stiffness = _e.stiffness,\n      damping = _e.damping,\n      mass = _e.mass,\n      velocity = _e.velocity,\n      duration = _e.duration,\n      isResolvedFromDuration = _e.isResolvedFromDuration;\n\n  var resolveSpring = zero;\n  var resolveVelocity = zero;\n\n  function createSpring() {\n    var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n    var initialDelta = to - from;\n    var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n    var undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n    restDelta !== null && restDelta !== void 0 ? restDelta : restDelta = Math.abs(to - from) <= 1 ? 0.01 : 0.4;\n\n    if (dampingRatio < 1) {\n      var angularFreq_1 = calcAngularFreq(undampedAngularFreq, dampingRatio);\n\n      resolveSpring = function resolveSpring(t) {\n        var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n        return to - envelope * ((initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) / angularFreq_1 * Math.sin(angularFreq_1 * t) + initialDelta * Math.cos(angularFreq_1 * t));\n      };\n\n      resolveVelocity = function resolveVelocity(t) {\n        var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n        return dampingRatio * undampedAngularFreq * envelope * (Math.sin(angularFreq_1 * t) * (initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) / angularFreq_1 + initialDelta * Math.cos(angularFreq_1 * t)) - envelope * (Math.cos(angularFreq_1 * t) * (initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) - angularFreq_1 * initialDelta * Math.sin(angularFreq_1 * t));\n      };\n    } else if (dampingRatio === 1) {\n      resolveSpring = function resolveSpring(t) {\n        return to - Math.exp(-undampedAngularFreq * t) * (initialDelta + (initialVelocity + undampedAngularFreq * initialDelta) * t);\n      };\n    } else {\n      var dampedAngularFreq_1 = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n\n      resolveSpring = function resolveSpring(t) {\n        var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n        var freqForT = Math.min(dampedAngularFreq_1 * t, 300);\n        return to - envelope * ((initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) * Math.sinh(freqForT) + dampedAngularFreq_1 * initialDelta * Math.cosh(freqForT)) / dampedAngularFreq_1;\n      };\n    }\n  }\n\n  createSpring();\n  return {\n    next: function next(t) {\n      var current = resolveSpring(t);\n\n      if (!isResolvedFromDuration) {\n        var currentVelocity = resolveVelocity(t) * 1000;\n        var isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n        var isBelowDisplacementThreshold = Math.abs(to - current) <= restDelta;\n        state.done = isBelowVelocityThreshold && isBelowDisplacementThreshold;\n      } else {\n        state.done = t >= duration;\n      }\n\n      state.value = state.done ? to : current;\n      return state;\n    },\n    flipTarget: function flipTarget() {\n      var _a;\n\n      velocity = -velocity;\n      _a = [to, from], from = _a[0], to = _a[1];\n      createSpring();\n    }\n  };\n}\n\nspring.needsInterpolation = function (a, b) {\n  return typeof a === \"string\" || typeof b === \"string\";\n};\n\nvar zero = function zero(_t) {\n  return 0;\n};\n\nexport { spring };","var progress = function progress(from, to, value) {\n  var toFromDifference = to - from;\n  return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };","var mix = function mix(from, to, progress) {\n  return -progress * from + progress * to + from;\n};\n\nexport { mix };","import { isString, singleColorRegex, floatRegex } from '../utils.js';\n\nvar isColorString = function isColorString(type, testProp) {\n  return function (v) {\n    return Boolean(isString(v) && singleColorRegex.test(v) && v.startsWith(type) || testProp && Object.prototype.hasOwnProperty.call(v, testProp));\n  };\n};\n\nvar splitColor = function splitColor(aName, bName, cName) {\n  return function (v) {\n    var _a;\n\n    if (!isString(v)) return v;\n\n    var _b = v.match(floatRegex),\n        a = _b[0],\n        b = _b[1],\n        c = _b[2],\n        alpha = _b[3];\n\n    return _a = {}, _a[aName] = parseFloat(a), _a[bName] = parseFloat(b), _a[cName] = parseFloat(c), _a.alpha = alpha !== undefined ? parseFloat(alpha) : 1, _a;\n  };\n};\n\nexport { isColorString, splitColor };","import { __assign } from 'tslib';\nimport { number, alpha } from '../numbers/index.js';\nimport { sanitize, clamp } from '../utils.js';\nimport { isColorString, splitColor } from './utils.js';\nvar clampRgbUnit = clamp(0, 255);\n\nvar rgbUnit = __assign(__assign({}, number), {\n  transform: function transform(v) {\n    return Math.round(clampRgbUnit(v));\n  }\n});\n\nvar rgba = {\n  test: isColorString('rgb', 'red'),\n  parse: splitColor('red', 'green', 'blue'),\n  transform: function transform(_a) {\n    var red = _a.red,\n        green = _a.green,\n        blue = _a.blue,\n        _b = _a.alpha,\n        alpha$1 = _b === void 0 ? 1 : _b;\n    return 'rgba(' + rgbUnit.transform(red) + ', ' + rgbUnit.transform(green) + ', ' + rgbUnit.transform(blue) + ', ' + sanitize(alpha.transform(alpha$1)) + ')';\n  }\n};\nexport { rgbUnit, rgba };","import { rgba } from './rgba.js';\nimport { isColorString } from './utils.js';\n\nfunction parseHex(v) {\n  var r = '';\n  var g = '';\n  var b = '';\n  var a = '';\n\n  if (v.length > 5) {\n    r = v.substr(1, 2);\n    g = v.substr(3, 2);\n    b = v.substr(5, 2);\n    a = v.substr(7, 2);\n  } else {\n    r = v.substr(1, 1);\n    g = v.substr(2, 1);\n    b = v.substr(3, 1);\n    a = v.substr(4, 1);\n    r += r;\n    g += g;\n    b += b;\n    a += a;\n  }\n\n  return {\n    red: parseInt(r, 16),\n    green: parseInt(g, 16),\n    blue: parseInt(b, 16),\n    alpha: a ? parseInt(a, 16) / 255 : 1\n  };\n}\n\nvar hex = {\n  test: isColorString('#'),\n  parse: parseHex,\n  transform: rgba.transform\n};\nexport { hex };","import { alpha } from '../numbers/index.js';\nimport { percent } from '../numbers/units.js';\nimport { sanitize } from '../utils.js';\nimport { isColorString, splitColor } from './utils.js';\nvar hsla = {\n  test: isColorString('hsl', 'hue'),\n  parse: splitColor('hue', 'saturation', 'lightness'),\n  transform: function transform(_a) {\n    var hue = _a.hue,\n        saturation = _a.saturation,\n        lightness = _a.lightness,\n        _b = _a.alpha,\n        alpha$1 = _b === void 0 ? 1 : _b;\n    return 'hsla(' + Math.round(hue) + ', ' + percent.transform(sanitize(saturation)) + ', ' + percent.transform(sanitize(lightness)) + ', ' + sanitize(alpha.transform(alpha$1)) + ')';\n  }\n};\nexport { hsla };","import { __assign } from 'tslib';\nimport { mix } from './mix.js';\nimport { hex, rgba, hsla } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar mixLinearColor = function mixLinearColor(from, to, v) {\n  var fromExpo = from * from;\n  var toExpo = to * to;\n  return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\n};\n\nvar colorTypes = [hex, rgba, hsla];\n\nvar getColorType = function getColorType(v) {\n  return colorTypes.find(function (type) {\n    return type.test(v);\n  });\n};\n\nvar notAnimatable = function notAnimatable(color) {\n  return \"'\" + color + \"' is not an animatable color. Use the equivalent color code instead.\";\n};\n\nvar mixColor = function mixColor(from, to) {\n  var fromColorType = getColorType(from);\n  var toColorType = getColorType(to);\n  invariant(!!fromColorType, notAnimatable(from));\n  invariant(!!toColorType, notAnimatable(to));\n  invariant(fromColorType.transform === toColorType.transform, \"Both colors must be hex/RGBA, OR both must be HSLA.\");\n  var fromColor = fromColorType.parse(from);\n  var toColor = toColorType.parse(to);\n\n  var blended = __assign({}, fromColor);\n\n  var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\n  return function (v) {\n    for (var key in blended) {\n      if (key !== \"alpha\") {\n        blended[key] = mixFunc(fromColor[key], toColor[key], v);\n      }\n    }\n\n    blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\n    return fromColorType.transform(blended);\n  };\n};\n\nexport { mixColor, mixLinearColor };","import { isString } from '../utils.js';\nimport { hex } from './hex.js';\nimport { hsla } from './hsla.js';\nimport { rgba } from './rgba.js';\nvar color = {\n  test: function test(v) {\n    return rgba.test(v) || hex.test(v) || hsla.test(v);\n  },\n  parse: function parse(v) {\n    if (rgba.test(v)) {\n      return rgba.parse(v);\n    } else if (hsla.test(v)) {\n      return hsla.parse(v);\n    } else {\n      return hex.parse(v);\n    }\n  },\n  transform: function transform(v) {\n    return isString(v) ? v : v.hasOwnProperty('red') ? rgba.transform(v) : hsla.transform(v);\n  }\n};\nexport { color };","import { color } from '../color/index.js';\nimport { number } from '../numbers/index.js';\nimport { isString, floatRegex, colorRegex, sanitize } from '../utils.js';\nvar colorToken = '${c}';\nvar numberToken = '${n}';\n\nfunction test(v) {\n  var _a, _b, _c, _d;\n\n  return isNaN(v) && isString(v) && ((_b = (_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) + ((_d = (_c = v.match(colorRegex)) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0) > 0;\n}\n\nfunction analyse(v) {\n  var values = [];\n  var numColors = 0;\n  var colors = v.match(colorRegex);\n\n  if (colors) {\n    numColors = colors.length;\n    v = v.replace(colorRegex, colorToken);\n    values.push.apply(values, colors.map(color.parse));\n  }\n\n  var numbers = v.match(floatRegex);\n\n  if (numbers) {\n    v = v.replace(floatRegex, numberToken);\n    values.push.apply(values, numbers.map(number.parse));\n  }\n\n  return {\n    values: values,\n    numColors: numColors,\n    tokenised: v\n  };\n}\n\nfunction parse(v) {\n  return analyse(v).values;\n}\n\nfunction createTransformer(v) {\n  var _a = analyse(v),\n      values = _a.values,\n      numColors = _a.numColors,\n      tokenised = _a.tokenised;\n\n  var numValues = values.length;\n  return function (v) {\n    var output = tokenised;\n\n    for (var i = 0; i < numValues; i++) {\n      output = output.replace(i < numColors ? colorToken : numberToken, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\n    }\n\n    return output;\n  };\n}\n\nvar convertNumbersToZero = function convertNumbersToZero(v) {\n  return typeof v === 'number' ? 0 : v;\n};\n\nfunction getAnimatableNone(v) {\n  var parsed = parse(v);\n  var transformer = createTransformer(v);\n  return transformer(parsed.map(convertNumbersToZero));\n}\n\nvar complex = {\n  test: test,\n  parse: parse,\n  createTransformer: createTransformer,\n  getAnimatableNone: getAnimatableNone\n};\nexport { complex };","var zeroPoint = {\n  x: 0,\n  y: 0,\n  z: 0\n};\n\nvar isNum = function isNum(v) {\n  return typeof v === 'number';\n};\n\nexport { isNum, zeroPoint };","import { __spreadArray, __assign } from 'tslib';\nimport { complex, color } from 'style-value-types';\nimport { mix } from './mix.js';\nimport { mixColor } from './mix-color.js';\nimport { isNum } from './inc.js';\nimport { pipe } from './pipe.js';\nimport { invariant } from 'hey-listen';\n\nfunction getMixer(origin, target) {\n  if (isNum(origin)) {\n    return function (v) {\n      return mix(origin, target, v);\n    };\n  } else if (color.test(origin)) {\n    return mixColor(origin, target);\n  } else {\n    return mixComplex(origin, target);\n  }\n}\n\nvar mixArray = function mixArray(from, to) {\n  var output = __spreadArray([], from);\n\n  var numValues = output.length;\n  var blendValue = from.map(function (fromThis, i) {\n    return getMixer(fromThis, to[i]);\n  });\n  return function (v) {\n    for (var i = 0; i < numValues; i++) {\n      output[i] = blendValue[i](v);\n    }\n\n    return output;\n  };\n};\n\nvar mixObject = function mixObject(origin, target) {\n  var output = __assign(__assign({}, origin), target);\n\n  var blendValue = {};\n\n  for (var key in output) {\n    if (origin[key] !== undefined && target[key] !== undefined) {\n      blendValue[key] = getMixer(origin[key], target[key]);\n    }\n  }\n\n  return function (v) {\n    for (var key in blendValue) {\n      output[key] = blendValue[key](v);\n    }\n\n    return output;\n  };\n};\n\nfunction analyse(value) {\n  var parsed = complex.parse(value);\n  var numValues = parsed.length;\n  var numNumbers = 0;\n  var numRGB = 0;\n  var numHSL = 0;\n\n  for (var i = 0; i < numValues; i++) {\n    if (numNumbers || typeof parsed[i] === \"number\") {\n      numNumbers++;\n    } else {\n      if (parsed[i].hue !== undefined) {\n        numHSL++;\n      } else {\n        numRGB++;\n      }\n    }\n  }\n\n  return {\n    parsed: parsed,\n    numNumbers: numNumbers,\n    numRGB: numRGB,\n    numHSL: numHSL\n  };\n}\n\nvar mixComplex = function mixComplex(origin, target) {\n  var template = complex.createTransformer(target);\n  var originStats = analyse(origin);\n  var targetStats = analyse(target);\n  invariant(originStats.numHSL === targetStats.numHSL && originStats.numRGB === targetStats.numRGB && originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\n  return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\n};\n\nexport { mixArray, mixComplex, mixObject };","import { progress } from './progress.js';\nimport { mix } from './mix.js';\nimport { mixColor } from './mix-color.js';\nimport { mixComplex, mixArray, mixObject } from './mix-complex.js';\nimport { color } from 'style-value-types';\nimport { clamp } from './clamp.js';\nimport { pipe } from './pipe.js';\nimport { invariant } from 'hey-listen';\n\nvar mixNumber = function mixNumber(from, to) {\n  return function (p) {\n    return mix(from, to, p);\n  };\n};\n\nfunction detectMixerFactory(v) {\n  if (typeof v === 'number') {\n    return mixNumber;\n  } else if (typeof v === 'string') {\n    if (color.test(v)) {\n      return mixColor;\n    } else {\n      return mixComplex;\n    }\n  } else if (Array.isArray(v)) {\n    return mixArray;\n  } else if (typeof v === 'object') {\n    return mixObject;\n  }\n}\n\nfunction createMixers(output, ease, customMixer) {\n  var mixers = [];\n  var mixerFactory = customMixer || detectMixerFactory(output[0]);\n  var numMixers = output.length - 1;\n\n  for (var i = 0; i < numMixers; i++) {\n    var mixer = mixerFactory(output[i], output[i + 1]);\n\n    if (ease) {\n      var easingFunction = Array.isArray(ease) ? ease[i] : ease;\n      mixer = pipe(easingFunction, mixer);\n    }\n\n    mixers.push(mixer);\n  }\n\n  return mixers;\n}\n\nfunction fastInterpolate(_a, _b) {\n  var from = _a[0],\n      to = _a[1];\n  var mixer = _b[0];\n  return function (v) {\n    return mixer(progress(from, to, v));\n  };\n}\n\nfunction slowInterpolate(input, mixers) {\n  var inputLength = input.length;\n  var lastInputIndex = inputLength - 1;\n  return function (v) {\n    var mixerIndex = 0;\n    var foundMixerIndex = false;\n\n    if (v <= input[0]) {\n      foundMixerIndex = true;\n    } else if (v >= input[lastInputIndex]) {\n      mixerIndex = lastInputIndex - 1;\n      foundMixerIndex = true;\n    }\n\n    if (!foundMixerIndex) {\n      var i = 1;\n\n      for (; i < inputLength; i++) {\n        if (input[i] > v || i === lastInputIndex) {\n          break;\n        }\n      }\n\n      mixerIndex = i - 1;\n    }\n\n    var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\n    return mixers[mixerIndex](progressInRange);\n  };\n}\n\nfunction interpolate(input, output, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.clamp,\n      isClamp = _c === void 0 ? true : _c,\n      ease = _b.ease,\n      mixer = _b.mixer;\n\n  var inputLength = input.length;\n  invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\n  invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\n\n  if (input[0] > input[inputLength - 1]) {\n    input = [].concat(input);\n    output = [].concat(output);\n    input.reverse();\n    output.reverse();\n  }\n\n  var mixers = createMixers(output, ease, mixer);\n  var interpolator = inputLength === 2 ? fastInterpolate(input, mixers) : slowInterpolate(input, mixers);\n  return isClamp ? function (v) {\n    return interpolator(clamp(input[0], input[inputLength - 1], v));\n  } : interpolator;\n}\n\nexport { interpolate };","var reverseEasing = function reverseEasing(easing) {\n  return function (p) {\n    return 1 - easing(1 - p);\n  };\n};\n\nvar mirrorEasing = function mirrorEasing(easing) {\n  return function (p) {\n    return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n  };\n};\n\nvar createExpoIn = function createExpoIn(power) {\n  return function (p) {\n    return Math.pow(p, power);\n  };\n};\n\nvar createBackIn = function createBackIn(power) {\n  return function (p) {\n    return p * p * ((power + 1) * p - power);\n  };\n};\n\nvar createAnticipate = function createAnticipate(power) {\n  var backEasing = createBackIn(power);\n  return function (p) {\n    return (p *= 2) < 1 ? 0.5 * backEasing(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n  };\n};\n\nexport { createAnticipate, createBackIn, createExpoIn, mirrorEasing, reverseEasing };","import { createExpoIn, reverseEasing, mirrorEasing, createBackIn, createAnticipate } from './utils.js';\nvar DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar BOUNCE_FIRST_THRESHOLD = 4.0 / 11.0;\nvar BOUNCE_SECOND_THRESHOLD = 8.0 / 11.0;\nvar BOUNCE_THIRD_THRESHOLD = 9.0 / 10.0;\n\nvar linear = function linear(p) {\n  return p;\n};\n\nvar easeIn = createExpoIn(2);\nvar easeOut = reverseEasing(easeIn);\nvar easeInOut = mirrorEasing(easeIn);\n\nvar circIn = function circIn(p) {\n  return 1 - Math.sin(Math.acos(p));\n};\n\nvar circOut = reverseEasing(circIn);\nvar circInOut = mirrorEasing(circOut);\nvar backIn = createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = reverseEasing(backIn);\nvar backInOut = mirrorEasing(backIn);\nvar anticipate = createAnticipate(DEFAULT_OVERSHOOT_STRENGTH);\nvar ca = 4356.0 / 361.0;\nvar cb = 35442.0 / 1805.0;\nvar cc = 16061.0 / 1805.0;\n\nvar bounceOut = function bounceOut(p) {\n  if (p === 1 || p === 0) return p;\n  var p2 = p * p;\n  return p < BOUNCE_FIRST_THRESHOLD ? 7.5625 * p2 : p < BOUNCE_SECOND_THRESHOLD ? 9.075 * p2 - 9.9 * p + 3.4 : p < BOUNCE_THIRD_THRESHOLD ? ca * p2 - cb * p + cc : 10.8 * p * p - 20.52 * p + 10.72;\n};\n\nvar bounceIn = reverseEasing(bounceOut);\n\nvar bounceInOut = function bounceInOut(p) {\n  return p < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - p * 2.0)) : 0.5 * bounceOut(p * 2.0 - 1.0) + 0.5;\n};\n\nexport { anticipate, backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, easeIn, easeInOut, easeOut, linear };","import { interpolate } from '../../utils/interpolate.js';\nimport { easeInOut } from '../../easing/index.js';\n\nfunction defaultEasing(values, easing) {\n  return values.map(function () {\n    return easing || easeInOut;\n  }).splice(0, values.length - 1);\n}\n\nfunction defaultOffset(values) {\n  var numValues = values.length;\n  return values.map(function (_value, i) {\n    return i !== 0 ? i / (numValues - 1) : 0;\n  });\n}\n\nfunction convertOffsetToTimes(offset, duration) {\n  return offset.map(function (o) {\n    return o * duration;\n  });\n}\n\nfunction keyframes(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.to,\n      to = _c === void 0 ? 1 : _c,\n      ease = _a.ease,\n      offset = _a.offset,\n      _d = _a.duration,\n      duration = _d === void 0 ? 300 : _d;\n  var state = {\n    done: false,\n    value: from\n  };\n  var values = Array.isArray(to) ? to : [from, to];\n  var times = convertOffsetToTimes(offset && offset.length === values.length ? offset : defaultOffset(values), duration);\n\n  function createInterpolator() {\n    return interpolate(times, values, {\n      ease: Array.isArray(ease) ? ease : defaultEasing(values, ease)\n    });\n  }\n\n  var interpolator = createInterpolator();\n  return {\n    next: function next(t) {\n      state.value = interpolator(t);\n      state.done = t >= duration;\n      return state;\n    },\n    flipTarget: function flipTarget() {\n      values.reverse();\n      interpolator = createInterpolator();\n    }\n  };\n}\n\nexport { convertOffsetToTimes, defaultEasing, defaultOffset, keyframes };","import { spring } from '../generators/spring.js';\nimport { keyframes } from '../generators/keyframes.js';\nimport { decay } from '../generators/decay.js';\nvar types = {\n  keyframes: keyframes,\n  spring: spring,\n  decay: decay\n};\n\nfunction detectAnimationFromOptions(config) {\n  if (Array.isArray(config.to)) {\n    return keyframes;\n  } else if (types[config.type]) {\n    return types[config.type];\n  }\n\n  var keys = new Set(Object.keys(config));\n\n  if (keys.has(\"ease\") || keys.has(\"duration\") && !keys.has(\"dampingRatio\")) {\n    return keyframes;\n  } else if (keys.has(\"dampingRatio\") || keys.has(\"stiffness\") || keys.has(\"mass\") || keys.has(\"damping\") || keys.has(\"restSpeed\") || keys.has(\"restDelta\")) {\n    return spring;\n  }\n\n  return keyframes;\n}\n\nexport { detectAnimationFromOptions };","function decay(_a) {\n  var _b = _a.velocity,\n      velocity = _b === void 0 ? 0 : _b,\n      _c = _a.from,\n      from = _c === void 0 ? 0 : _c,\n      _d = _a.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = _a.timeConstant,\n      timeConstant = _e === void 0 ? 350 : _e,\n      _f = _a.restDelta,\n      restDelta = _f === void 0 ? 0.5 : _f,\n      modifyTarget = _a.modifyTarget;\n  var state = {\n    done: false,\n    value: from\n  };\n  var amplitude = power * velocity;\n  var ideal = from + amplitude;\n  var target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n  if (target !== ideal) amplitude = target - from;\n  return {\n    next: function next(t) {\n      var delta = -amplitude * Math.exp(-t / timeConstant);\n      state.done = !(delta > restDelta || delta < -restDelta);\n      state.value = state.done ? target : target + delta;\n      return state;\n    },\n    flipTarget: function flipTarget() {}\n  };\n}\n\nexport { decay };","function loopElapsed(elapsed, duration, delay) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n\n  return elapsed - duration - delay;\n}\n\nfunction reverseElapsed(elapsed, duration, delay, isForwardPlayback) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n\n  if (isForwardPlayback === void 0) {\n    isForwardPlayback = true;\n  }\n\n  return isForwardPlayback ? loopElapsed(duration + -elapsed, duration, delay) : duration - (elapsed - duration) + delay;\n}\n\nfunction hasRepeatDelayElapsed(elapsed, duration, delay, isForwardPlayback) {\n  return isForwardPlayback ? elapsed >= duration + delay : elapsed <= -delay;\n}\n\nexport { hasRepeatDelayElapsed, loopElapsed, reverseElapsed };","import { __rest, __assign } from 'tslib';\nimport { detectAnimationFromOptions } from './utils/detect-animation-from-options.js';\nimport sync, { cancelSync } from 'framesync';\nimport { interpolate } from '../utils/interpolate.js';\nimport { hasRepeatDelayElapsed, reverseElapsed, loopElapsed } from './utils/elapsed.js';\n\nvar framesync = function framesync(update) {\n  var passTimestamp = function passTimestamp(_a) {\n    var delta = _a.delta;\n    return update(delta);\n  };\n\n  return {\n    start: function start() {\n      return sync.update(passTimestamp, true);\n    },\n    stop: function stop() {\n      return cancelSync.update(passTimestamp);\n    }\n  };\n};\n\nfunction animate(_a) {\n  var _b, _c;\n\n  var from = _a.from,\n      _d = _a.autoplay,\n      autoplay = _d === void 0 ? true : _d,\n      _e = _a.driver,\n      driver = _e === void 0 ? framesync : _e,\n      _f = _a.elapsed,\n      elapsed = _f === void 0 ? 0 : _f,\n      _g = _a.repeat,\n      repeatMax = _g === void 0 ? 0 : _g,\n      _h = _a.repeatType,\n      repeatType = _h === void 0 ? \"loop\" : _h,\n      _j = _a.repeatDelay,\n      repeatDelay = _j === void 0 ? 0 : _j,\n      onPlay = _a.onPlay,\n      onStop = _a.onStop,\n      onComplete = _a.onComplete,\n      onRepeat = _a.onRepeat,\n      onUpdate = _a.onUpdate,\n      options = __rest(_a, [\"from\", \"autoplay\", \"driver\", \"elapsed\", \"repeat\", \"repeatType\", \"repeatDelay\", \"onPlay\", \"onStop\", \"onComplete\", \"onRepeat\", \"onUpdate\"]);\n\n  var to = options.to;\n  var driverControls;\n  var repeatCount = 0;\n  var computedDuration = options.duration;\n  var latest;\n  var isComplete = false;\n  var isForwardPlayback = true;\n  var interpolateFromNumber;\n  var animator = detectAnimationFromOptions(options);\n\n  if ((_c = (_b = animator).needsInterpolation) === null || _c === void 0 ? void 0 : _c.call(_b, from, to)) {\n    interpolateFromNumber = interpolate([0, 100], [from, to], {\n      clamp: false\n    });\n    from = 0;\n    to = 100;\n  }\n\n  var animation = animator(__assign(__assign({}, options), {\n    from: from,\n    to: to\n  }));\n\n  function repeat() {\n    repeatCount++;\n\n    if (repeatType === \"reverse\") {\n      isForwardPlayback = repeatCount % 2 === 0;\n      elapsed = reverseElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback);\n    } else {\n      elapsed = loopElapsed(elapsed, computedDuration, repeatDelay);\n      if (repeatType === \"mirror\") animation.flipTarget();\n    }\n\n    isComplete = false;\n    onRepeat && onRepeat();\n  }\n\n  function complete() {\n    driverControls.stop();\n    onComplete && onComplete();\n  }\n\n  function update(delta) {\n    if (!isForwardPlayback) delta = -delta;\n    elapsed += delta;\n\n    if (!isComplete) {\n      var state = animation.next(Math.max(0, elapsed));\n      latest = state.value;\n      if (interpolateFromNumber) latest = interpolateFromNumber(latest);\n      isComplete = isForwardPlayback ? state.done : elapsed <= 0;\n    }\n\n    onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(latest);\n\n    if (isComplete) {\n      if (repeatCount === 0) computedDuration !== null && computedDuration !== void 0 ? computedDuration : computedDuration = elapsed;\n\n      if (repeatCount < repeatMax) {\n        hasRepeatDelayElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback) && repeat();\n      } else {\n        complete();\n      }\n    }\n  }\n\n  function play() {\n    onPlay === null || onPlay === void 0 ? void 0 : onPlay();\n    driverControls = driver(update);\n    driverControls.start();\n  }\n\n  autoplay && play();\n  return {\n    stop: function stop() {\n      onStop === null || onStop === void 0 ? void 0 : onStop();\n      driverControls.stop();\n    }\n  };\n}\n\nexport { animate };","function velocityPerSecond(velocity, frameDuration) {\n  return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function secondsToMilliseconds(seconds) {\n  return seconds * 1000;\n};\n\nexport { secondsToMilliseconds };","import { linear } from './index.js';\n\nvar a = function a(a1, a2) {\n  return 1.0 - 3.0 * a2 + 3.0 * a1;\n};\n\nvar b = function b(a1, a2) {\n  return 3.0 * a2 - 6.0 * a1;\n};\n\nvar c = function c(a1) {\n  return 3.0 * a1;\n};\n\nvar calcBezier = function calcBezier(t, a1, a2) {\n  return ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n};\n\nvar getSlope = function getSlope(t, a1, a2) {\n  return 3.0 * a(a1, a2) * t * t + 2.0 * b(a1, a2) * t + c(a1);\n};\n\nvar subdivisionPrecision = 0.0000001;\nvar subdivisionMaxIterations = 10;\n\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX;\n  var currentT;\n  var i = 0;\n\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > subdivisionPrecision && ++i < subdivisionMaxIterations);\n\n  return currentT;\n}\n\nvar newtonIterations = 8;\nvar newtonMinSlope = 0.001;\n\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < newtonIterations; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n\n    if (currentSlope === 0.0) {\n      return aGuessT;\n    }\n\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n\n  return aGuessT;\n}\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n  if (mX1 === mY1 && mX2 === mY2) return linear;\n  var sampleValues = new Float32Array(kSplineTableSize);\n\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n\n    --currentSample;\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n\n    if (initialSlope >= newtonMinSlope) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function (t) {\n    return t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n  };\n}\n\nexport { cubicBezier };","import { __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { cubicBezier, linear, easeIn, easeInOut, easeOut, circIn, circInOut, circOut, backIn, backInOut, backOut, anticipate, bounceIn, bounceInOut, bounceOut } from 'popmotion';\nvar easingLookup = {\n  linear: linear,\n  easeIn: easeIn,\n  easeInOut: easeInOut,\n  easeOut: easeOut,\n  circIn: circIn,\n  circInOut: circInOut,\n  circOut: circOut,\n  backIn: backIn,\n  backInOut: backInOut,\n  backOut: backOut,\n  anticipate: anticipate,\n  bounceIn: bounceIn,\n  bounceInOut: bounceInOut,\n  bounceOut: bounceOut\n};\n\nvar easingDefinitionToFunction = function easingDefinitionToFunction(definition) {\n  if (Array.isArray(definition)) {\n    // If cubic bezier definition, create bezier curve\n    invariant(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n\n    var _a = __read(definition, 4),\n        x1 = _a[0],\n        y1 = _a[1],\n        x2 = _a[2],\n        y2 = _a[3];\n\n    return cubicBezier(x1, y1, x2, y2);\n  } else if (typeof definition === \"string\") {\n    // Else lookup from table\n    invariant(easingLookup[definition] !== undefined, \"Invalid easing type '\" + definition + \"'\");\n    return easingLookup[definition];\n  }\n\n  return definition;\n};\n\nvar isEasingArray = function isEasingArray(ease) {\n  return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { easingDefinitionToFunction, isEasingArray };","import { complex } from 'style-value-types';\n/**\n * Check if a value is animatable. Examples:\n *\n * ✅: 100, \"100px\", \"#fff\"\n * ❌: \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\n\nvar isAnimatable = function isAnimatable(key, value) {\n  // If the list of keys tat might be non-animatable grows, replace with Set\n  if (key === \"zIndex\") return false; // If it's a number or a keyframes array, we can animate it. We might at some point\n  // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n  // but for now lets leave it like this for performance reasons\n\n  if (typeof value === \"number\" || Array.isArray(value)) return true;\n\n  if (typeof value === \"string\" && // It's animatable if we have a string\n  complex.test(value) && // And it contains numbers and/or colors\n  !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\nexport { isAnimatable };","import { __assign } from 'tslib';\nimport { isKeyframesTarget } from './is-keyframes-target.js';\n\nvar underDampedSpring = function underDampedSpring() {\n  return {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restDelta: 0.5,\n    restSpeed: 10\n  };\n};\n\nvar criticallyDampedSpring = function criticallyDampedSpring(to) {\n  return {\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restDelta: 0.01,\n    restSpeed: 10\n  };\n};\n\nvar linearTween = function linearTween() {\n  return {\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3\n  };\n};\n\nvar keyframes = function keyframes(values) {\n  return {\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values\n  };\n};\n\nvar defaultTransitions = {\n  x: underDampedSpring,\n  y: underDampedSpring,\n  z: underDampedSpring,\n  rotate: underDampedSpring,\n  rotateX: underDampedSpring,\n  rotateY: underDampedSpring,\n  rotateZ: underDampedSpring,\n  scaleX: criticallyDampedSpring,\n  scaleY: criticallyDampedSpring,\n  scale: criticallyDampedSpring,\n  opacity: linearTween,\n  backgroundColor: linearTween,\n  color: linearTween,\n  default: criticallyDampedSpring\n};\n\nvar getDefaultTransition = function getDefaultTransition(valueKey, to) {\n  var transitionFactory;\n\n  if (isKeyframesTarget(to)) {\n    transitionFactory = keyframes;\n  } else {\n    transitionFactory = defaultTransitions[valueKey] || defaultTransitions.default;\n  }\n\n  return __assign({\n    to: to\n  }, transitionFactory(to));\n};\n\nexport { criticallyDampedSpring, getDefaultTransition, linearTween, underDampedSpring };","import { __assign } from 'tslib';\nimport { complex } from './index.js';\nimport { floatRegex } from '../utils.js';\nvar maxDefaults = new Set(['brightness', 'contrast', 'saturate', 'opacity']);\n\nfunction applyDefaultFilter(v) {\n  var _a = v.slice(0, -1).split('('),\n      name = _a[0],\n      value = _a[1];\n\n  if (name === 'drop-shadow') return v;\n  var number = (value.match(floatRegex) || [])[0];\n  if (!number) return v;\n  var unit = value.replace(number, '');\n  var defaultValue = maxDefaults.has(name) ? 1 : 0;\n  if (number !== value) defaultValue *= 100;\n  return name + '(' + defaultValue + unit + ')';\n}\n\nvar functionRegex = /([a-z-]*)\\(.*?\\)/g;\n\nvar filter = __assign(__assign({}, complex), {\n  getAnimatableNone: function getAnimatableNone(v) {\n    var functions = v.match(functionRegex);\n    return functions ? functions.map(applyDefaultFilter).join(' ') : v;\n  }\n});\n\nexport { filter };","import { __assign } from 'tslib';\nimport { color, filter } from 'style-value-types';\nimport { numberValueTypes } from './number.js';\n/**\n * A map of default value types for common values\n */\n\nvar defaultValueTypes = __assign(__assign({}, numberValueTypes), {\n  // Color props\n  color: color,\n  backgroundColor: color,\n  outlineColor: color,\n  fill: color,\n  stroke: color,\n  // Border props\n  borderColor: color,\n  borderTopColor: color,\n  borderRightColor: color,\n  borderBottomColor: color,\n  borderLeftColor: color,\n  filter: filter,\n  WebkitFilter: filter\n});\n/**\n * Gets the default ValueType for the provided value key\n */\n\n\nvar getDefaultValueType = function getDefaultValueType(key) {\n  return defaultValueTypes[key];\n};\n\nexport { defaultValueTypes, getDefaultValueType };","import { filter, complex } from 'style-value-types';\nimport { getDefaultValueType } from './defaults.js';\n\nfunction getAnimatableNone(key, value) {\n  var _a;\n\n  var defaultValueType = getDefaultValueType(key);\n  if (defaultValueType !== filter) defaultValueType = complex; // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n\n  return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\n\nexport { getAnimatableNone };","import { __assign, __rest, __spreadArray, __read } from 'tslib';\nimport { inertia, animate } from 'popmotion';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.js';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.js';\nimport { isAnimatable } from './is-animatable.js';\nimport { getDefaultTransition } from './default-transitions.js';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.js';\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\n\nfunction isTransitionDefined(_a) {\n  _a.when;\n  _a.delay;\n  _a.delayChildren;\n  _a.staggerChildren;\n  _a.staggerDirection;\n  _a.repeat;\n  _a.repeatType;\n  _a.repeatDelay;\n  _a.from;\n\n  var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n\n  return !!Object.keys(transition).length;\n}\n\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\n\nfunction convertTransitionToAnimationOptions(_a) {\n  var ease = _a.ease,\n      times = _a.times,\n      yoyo = _a.yoyo,\n      flip = _a.flip,\n      loop = _a.loop,\n      transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n\n  var options = __assign({}, transition);\n\n  if (times) options[\"offset\"] = times;\n  /**\n   * Convert any existing durations from seconds to milliseconds\n   */\n\n  if (transition.duration) options[\"duration\"] = secondsToMilliseconds(transition.duration);\n  if (transition.repeatDelay) options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n  /**\n   * Map easing names to Popmotion's easing functions\n   */\n\n  if (ease) {\n    options[\"ease\"] = isEasingArray(ease) ? ease.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease);\n  }\n  /**\n   * Support legacy transition API\n   */\n\n\n  if (transition.type === \"tween\") options.type = \"keyframes\";\n  /**\n   * TODO: These options are officially removed from the API.\n   */\n\n  if (yoyo || loop || flip) {\n    warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n    legacyRepeatWarning = true;\n\n    if (yoyo) {\n      options.repeatType = \"reverse\";\n    } else if (loop) {\n      options.repeatType = \"loop\";\n    } else if (flip) {\n      options.repeatType = \"mirror\";\n    }\n\n    options.repeat = loop || yoyo || flip || transition.repeat;\n  }\n  /**\n   * TODO: Popmotion 9 has the ability to automatically detect whether to use\n   * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n   * It'd be good to introduce a similar thing here.\n   */\n\n\n  if (transition.type !== \"spring\") options.type = \"keyframes\";\n  return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\n\n\nfunction getDelayFromTransition(transition, key) {\n  var _a;\n\n  var valueTransition = getValueTransition(transition, key) || {};\n  return (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : 0;\n}\n\nfunction hydrateKeyframes(options) {\n  if (Array.isArray(options.to) && options.to[0] === null) {\n    options.to = __spreadArray([], __read(options.to));\n    options.to[0] = options.from;\n  }\n\n  return options;\n}\n\nfunction getPopmotionAnimationOptions(transition, options, key) {\n  var _a;\n\n  if (Array.isArray(options.to)) {\n    (_a = transition.duration) !== null && _a !== void 0 ? _a : transition.duration = 0.8;\n  }\n\n  hydrateKeyframes(options);\n  /**\n   * Get a default transition if none is determined to be defined.\n   */\n\n  if (!isTransitionDefined(transition)) {\n    transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\n  }\n\n  return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\n\n\nfunction getAnimation(key, value, target, transition, onComplete) {\n  var _a;\n\n  var valueTransition = getValueTransition(transition, key);\n  var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n  var isTargetAnimatable = isAnimatable(key, target);\n\n  if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n    /**\n     * If we're trying to animate from \"none\", try and get an animatable version\n     * of the target. This could be improved to work both ways.\n     */\n    origin = getAnimatableNone(key, target);\n  } else if (isZero(origin) && typeof target === \"string\") {\n    origin = getZeroUnit(target);\n  } else if (!Array.isArray(target) && isZero(target) && typeof origin === \"string\") {\n    target = getZeroUnit(origin);\n  }\n\n  var isOriginAnimatable = isAnimatable(key, origin);\n  warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \" + key + \" from \\\"\" + origin + \"\\\" to \\\"\" + target + \"\\\". \" + origin + \" is not an animatable value - to enable this animation set \" + origin + \" to a value animatable to \" + target + \" via the `style` property.\");\n\n  function start() {\n    var options = {\n      from: origin,\n      to: target,\n      velocity: value.getVelocity(),\n      onComplete: onComplete,\n      onUpdate: function onUpdate(v) {\n        return value.set(v);\n      }\n    };\n    return valueTransition.type === \"inertia\" || valueTransition.type === \"decay\" ? inertia(__assign(__assign({}, options), valueTransition)) : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), {\n      onUpdate: function onUpdate(v) {\n        var _a;\n\n        options.onUpdate(v);\n        (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n      },\n      onComplete: function onComplete() {\n        var _a;\n\n        options.onComplete();\n        (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n      }\n    }));\n  }\n\n  function set() {\n    var _a;\n\n    value.set(target);\n    onComplete();\n    (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n    return {\n      stop: function stop() {}\n    };\n  }\n\n  return !isOriginAnimatable || !isTargetAnimatable || valueTransition.type === false ? set : start;\n}\n\nfunction isZero(value) {\n  return value === 0 || typeof value === \"string\" && parseFloat(value) === 0 && value.indexOf(\" \") === -1;\n}\n\nfunction getZeroUnit(potentialUnitType) {\n  return typeof potentialUnitType === \"number\" ? 0 : getAnimatableNone(\"\", potentialUnitType);\n}\n\nfunction getValueTransition(transition, key) {\n  return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\n\n\nfunction startAnimation(key, value, target, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n\n  return value.start(function (onComplete) {\n    var delayTimer;\n    var controls;\n    var animation = getAnimation(key, value, target, transition, onComplete);\n    var delay = getDelayFromTransition(transition, key);\n\n    var start = function start() {\n      return controls = animation();\n    };\n\n    if (delay) {\n      delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n    } else {\n      start();\n    }\n\n    return function () {\n      clearTimeout(delayTimer);\n      controls === null || controls === void 0 ? void 0 : controls.stop();\n    };\n  });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };","import { __assign } from 'tslib';\nimport { animate } from './index.js';\nimport { velocityPerSecond } from '../utils/velocity-per-second.js';\nimport { getFrameData } from 'framesync';\n\nfunction inertia(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.velocity,\n      velocity = _c === void 0 ? 0 : _c,\n      min = _a.min,\n      max = _a.max,\n      _d = _a.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = _a.timeConstant,\n      timeConstant = _e === void 0 ? 750 : _e,\n      _f = _a.bounceStiffness,\n      bounceStiffness = _f === void 0 ? 500 : _f,\n      _g = _a.bounceDamping,\n      bounceDamping = _g === void 0 ? 10 : _g,\n      _h = _a.restDelta,\n      restDelta = _h === void 0 ? 1 : _h,\n      modifyTarget = _a.modifyTarget,\n      driver = _a.driver,\n      _onUpdate = _a.onUpdate,\n      onComplete = _a.onComplete;\n  var currentAnimation;\n\n  function isOutOfBounds(v) {\n    return min !== undefined && v < min || max !== undefined && v > max;\n  }\n\n  function boundaryNearest(v) {\n    if (min === undefined) return max;\n    if (max === undefined) return min;\n    return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n  }\n\n  function startAnimation(options) {\n    currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n    currentAnimation = animate(__assign(__assign({}, options), {\n      driver: driver,\n      onUpdate: function onUpdate(v) {\n        var _a;\n\n        _onUpdate === null || _onUpdate === void 0 ? void 0 : _onUpdate(v);\n        (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n      },\n      onComplete: onComplete\n    }));\n  }\n\n  function startSpring(options) {\n    startAnimation(__assign({\n      type: \"spring\",\n      stiffness: bounceStiffness,\n      damping: bounceDamping,\n      restDelta: restDelta\n    }, options));\n  }\n\n  if (isOutOfBounds(from)) {\n    startSpring({\n      from: from,\n      velocity: velocity,\n      to: boundaryNearest(from)\n    });\n  } else {\n    var target = power * velocity + from;\n    if (typeof modifyTarget !== \"undefined\") target = modifyTarget(target);\n    var boundary_1 = boundaryNearest(target);\n    var heading_1 = boundary_1 === min ? -1 : 1;\n    var prev_1;\n    var current_1;\n\n    var checkBoundary = function checkBoundary(v) {\n      prev_1 = current_1;\n      current_1 = v;\n      velocity = velocityPerSecond(v - prev_1, getFrameData().delta);\n\n      if (heading_1 === 1 && v > boundary_1 || heading_1 === -1 && v < boundary_1) {\n        startSpring({\n          from: v,\n          to: boundary_1,\n          velocity: velocity\n        });\n      }\n    };\n\n    startAnimation({\n      type: \"decay\",\n      from: from,\n      velocity: velocity,\n      timeConstant: timeConstant,\n      power: power,\n      restDelta: restDelta,\n      modifyTarget: modifyTarget,\n      onUpdate: isOutOfBounds(target) ? checkBoundary : undefined\n    });\n  }\n\n  return {\n    stop: function stop() {\n      return currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n    }\n  };\n}\n\nexport { inertia };","function addUniqueItem(arr, item) {\n  arr.indexOf(item) === -1 && arr.push(item);\n}\n\nfunction removeItem(arr, item) {\n  var index = arr.indexOf(item);\n  index > -1 && arr.splice(index, 1);\n}\n\nexport { addUniqueItem, removeItem };","import { addUniqueItem, removeItem } from './array.js';\n\nvar SubscriptionManager =\n/** @class */\nfunction () {\n  function SubscriptionManager() {\n    this.subscriptions = [];\n  }\n\n  SubscriptionManager.prototype.add = function (handler) {\n    var _this = this;\n\n    addUniqueItem(this.subscriptions, handler);\n    return function () {\n      return removeItem(_this.subscriptions, handler);\n    };\n  };\n\n  SubscriptionManager.prototype.notify = function (a, b, c) {\n    var numSubscriptions = this.subscriptions.length;\n    if (!numSubscriptions) return;\n\n    if (numSubscriptions === 1) {\n      /**\n       * If there's only a single handler we can just call it without invoking a loop.\n       */\n      this.subscriptions[0](a, b, c);\n    } else {\n      for (var i = 0; i < numSubscriptions; i++) {\n        /**\n         * Check whether the handler exists before firing as it's possible\n         * the subscriptions were modified during this loop running.\n         */\n        var handler = this.subscriptions[i];\n        handler && handler(a, b, c);\n      }\n    }\n  };\n\n  SubscriptionManager.prototype.getSize = function () {\n    return this.subscriptions.length;\n  };\n\n  SubscriptionManager.prototype.clear = function () {\n    this.subscriptions.length = 0;\n  };\n\n  return SubscriptionManager;\n}();\n\nexport { SubscriptionManager };","import sync, { getFrameData } from 'framesync';\nimport { velocityPerSecond } from 'popmotion';\nimport { SubscriptionManager } from '../utils/subscription-manager.js';\n\nvar isFloat = function isFloat(value) {\n  return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\n\n\nvar MotionValue =\n/** @class */\nfunction () {\n  /**\n   * @param init - The initiating value\n   * @param config - Optional configuration options\n   *\n   * -  `transformer`: A function to transform incoming values with.\n   *\n   * @internal\n   */\n  function MotionValue(init) {\n    var _this = this;\n    /**\n     * Duration, in milliseconds, since last updating frame.\n     *\n     * @internal\n     */\n\n\n    this.timeDelta = 0;\n    /**\n     * Timestamp of the last time this `MotionValue` was updated.\n     *\n     * @internal\n     */\n\n    this.lastUpdated = 0;\n    /**\n     * Functions to notify when the `MotionValue` updates.\n     *\n     * @internal\n     */\n\n    this.updateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the velocity updates.\n     *\n     * @internal\n     */\n\n    this.velocityUpdateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n     *\n     * @internal\n     */\n\n    this.renderSubscribers = new SubscriptionManager();\n    /**\n     * Tracks whether this value can output a velocity. Currently this is only true\n     * if the value is numerical, but we might be able to widen the scope here and support\n     * other value types.\n     *\n     * @internal\n     */\n\n    this.canTrackVelocity = false;\n\n    this.updateAndNotify = function (v, render) {\n      if (render === void 0) {\n        render = true;\n      }\n\n      _this.prev = _this.current;\n      _this.current = v; // Update timestamp\n\n      var _a = getFrameData(),\n          delta = _a.delta,\n          timestamp = _a.timestamp;\n\n      if (_this.lastUpdated !== timestamp) {\n        _this.timeDelta = delta;\n        _this.lastUpdated = timestamp;\n        sync.postRender(_this.scheduleVelocityCheck);\n      } // Update update subscribers\n\n\n      if (_this.prev !== _this.current) {\n        _this.updateSubscribers.notify(_this.current);\n      } // Update velocity subscribers\n\n\n      if (_this.velocityUpdateSubscribers.getSize()) {\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      } // Update render subscribers\n\n\n      if (render) {\n        _this.renderSubscribers.notify(_this.current);\n      }\n    };\n    /**\n     * Schedule a velocity check for the next frame.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n\n\n    this.scheduleVelocityCheck = function () {\n      return sync.postRender(_this.velocityCheck);\n    };\n    /**\n     * Updates `prev` with `current` if the value hasn't been updated this frame.\n     * This ensures velocity calculations return `0`.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n\n\n    this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n    };\n\n    this.hasAnimated = false;\n    this.prev = this.current = init;\n    this.canTrackVelocity = isFloat(this.current);\n  }\n  /**\n   * Adds a function that will be notified when the `MotionValue` is updated.\n   *\n   * It returns a function that, when called, will cancel the subscription.\n   *\n   * When calling `onChange` inside a React component, it should be wrapped with the\n   * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n   * from the `useEffect` function to ensure you don't add duplicate subscribers..\n   *\n   * @library\n   *\n   * ```jsx\n   * function MyComponent() {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <Frame x={x} />\n   * }\n   * ```\n   *\n   * @motion\n   *\n   * ```jsx\n   * export const MyComponent = () => {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <motion.div style={{ x }} />\n   * }\n   * ```\n   *\n   * @internalremarks\n   *\n   * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n   *\n   * ```jsx\n   * useOnChange(x, () => {})\n   * ```\n   *\n   * @param subscriber - A function that receives the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.onChange = function (subscription) {\n    return this.updateSubscribers.add(subscription);\n  };\n\n  MotionValue.prototype.clearListeners = function () {\n    this.updateSubscribers.clear();\n  };\n  /**\n   * Adds a function that will be notified when the `MotionValue` requests a render.\n   *\n   * @param subscriber - A function that's provided the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.onRenderRequest = function (subscription) {\n    // Render immediately\n    subscription(this.get());\n    return this.renderSubscribers.add(subscription);\n  };\n  /**\n   * Attaches a passive effect to the `MotionValue`.\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.attach = function (passiveEffect) {\n    this.passiveEffect = passiveEffect;\n  };\n  /**\n   * Sets the state of the `MotionValue`.\n   *\n   * @remarks\n   *\n   * ```jsx\n   * const x = useMotionValue(0)\n   * x.set(10)\n   * ```\n   *\n   * @param latest - Latest value to set.\n   * @param render - Whether to notify render subscribers. Defaults to `true`\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.set = function (v, render) {\n    if (render === void 0) {\n      render = true;\n    }\n\n    if (!render || !this.passiveEffect) {\n      this.updateAndNotify(v, render);\n    } else {\n      this.passiveEffect(v, this.updateAndNotify);\n    }\n  };\n  /**\n   * Returns the latest state of `MotionValue`\n   *\n   * @returns - The latest state of `MotionValue`\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.get = function () {\n    return this.current;\n  };\n  /**\n   * @public\n   */\n\n\n  MotionValue.prototype.getPrevious = function () {\n    return this.prev;\n  };\n  /**\n   * Returns the latest velocity of `MotionValue`\n   *\n   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.getVelocity = function () {\n    // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n    return this.canTrackVelocity ? // These casts could be avoided if parseFloat would be typed better\n    velocityPerSecond(parseFloat(this.current) - parseFloat(this.prev), this.timeDelta) : 0;\n  };\n  /**\n   * Registers a new animation to control this `MotionValue`. Only one\n   * animation can drive a `MotionValue` at one time.\n   *\n   * ```jsx\n   * value.start()\n   * ```\n   *\n   * @param animation - A function that starts the provided animation\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.start = function (animation) {\n    var _this = this;\n\n    this.stop();\n    return new Promise(function (resolve) {\n      _this.hasAnimated = true;\n      _this.stopAnimation = animation(resolve);\n    }).then(function () {\n      return _this.clearAnimation();\n    });\n  };\n  /**\n   * Stop the currently active animation.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.stop = function () {\n    if (this.stopAnimation) this.stopAnimation();\n    this.clearAnimation();\n  };\n  /**\n   * Returns `true` if this value is currently animating.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.isAnimating = function () {\n    return !!this.stopAnimation;\n  };\n\n  MotionValue.prototype.clearAnimation = function () {\n    this.stopAnimation = null;\n  };\n  /**\n   * Destroy and clean up subscribers to this `MotionValue`.\n   *\n   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n   * created a `MotionValue` via the `motionValue` function.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.destroy = function () {\n    this.updateSubscribers.clear();\n    this.renderSubscribers.clear();\n    this.stop();\n  };\n\n  return MotionValue;\n}();\n/**\n * @internal\n */\n\n\nfunction motionValue(init) {\n  return new MotionValue(init);\n}\n\nexport { MotionValue, motionValue };","/**\n * Tests a provided value against a ValueType\n */\nvar testValueType = function testValueType(v) {\n  return function (type) {\n    return type.test(v);\n  };\n};\n\nexport { testValueType };","import { number, px, percent, degrees, vw, vh } from 'style-value-types';\nimport { testValueType } from './test.js';\nimport { auto } from './type-auto.js';\n/**\n * A list of value types commonly used for dimensions\n */\n\nvar dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\n\nvar findDimensionValueType = function findDimensionValueType(v) {\n  return dimensionValueTypes.find(testValueType(v));\n};\n\nexport { dimensionValueTypes, findDimensionValueType };","/**\n * ValueType for \"auto\"\n */\nvar auto = {\n  test: function test(v) {\n    return v === \"auto\";\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\nexport { auto };","import { __spreadArray, __read } from 'tslib';\nimport { color, complex } from 'style-value-types';\nimport { dimensionValueTypes } from './dimensions.js';\nimport { testValueType } from './test.js';\n/**\n * A list of all ValueTypes\n */\n\nvar valueTypes = __spreadArray(__spreadArray([], __read(dimensionValueTypes)), [color, complex]);\n/**\n * Tests a value against the list of ValueTypes\n */\n\n\nvar findValueType = function findValueType(v) {\n  return valueTypes.find(testValueType(v));\n};\n\nexport { findValueType };","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { complex } from 'style-value-types';\nimport { isNumericalString } from '../../utils/is-numerical-string.js';\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.js';\nimport { motionValue } from '../../value/index.js';\nimport { getAnimatableNone } from '../dom/value-types/animatable-none.js';\nimport { findValueType } from '../dom/value-types/find.js';\nimport { resolveVariant } from './variants.js';\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\n\nfunction setMotionValue(visualElement, key, value) {\n  if (visualElement.hasValue(key)) {\n    visualElement.getValue(key).set(value);\n  } else {\n    visualElement.addValue(key, motionValue(value));\n  }\n}\n\nfunction setTarget(visualElement, definition) {\n  var resolved = resolveVariant(visualElement, definition);\n\n  var _a = resolved ? visualElement.makeTargetAnimatable(resolved, false) : {},\n      _b = _a.transitionEnd,\n      transitionEnd = _b === void 0 ? {} : _b;\n\n  _a.transition;\n\n  var target = __rest(_a, [\"transitionEnd\", \"transition\"]);\n\n  target = __assign(__assign({}, target), transitionEnd);\n\n  for (var key in target) {\n    var value = resolveFinalValueInKeyframes(target[key]);\n    setMotionValue(visualElement, key, value);\n  }\n}\n\nfunction setVariants(visualElement, variantLabels) {\n  var reversedLabels = __spreadArray([], __read(variantLabels)).reverse();\n\n  reversedLabels.forEach(function (key) {\n    var _a;\n\n    var variant = visualElement.getVariant(key);\n    variant && setTarget(visualElement, variant);\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      setVariants(child, variantLabels);\n    });\n  });\n}\n\nfunction setValues(visualElement, definition) {\n  if (Array.isArray(definition)) {\n    return setVariants(visualElement, definition);\n  } else if (typeof definition === \"string\") {\n    return setVariants(visualElement, [definition]);\n  } else {\n    setTarget(visualElement, definition);\n  }\n}\n\nfunction checkTargetForNewValues(visualElement, target, origin) {\n  var _a, _b, _c;\n\n  var _d;\n\n  var newValueKeys = Object.keys(target).filter(function (key) {\n    return !visualElement.hasValue(key);\n  });\n  var numNewValues = newValueKeys.length;\n  if (!numNewValues) return;\n\n  for (var i = 0; i < numNewValues; i++) {\n    var key = newValueKeys[i];\n    var targetValue = target[key];\n    var value = null;\n    /**\n     * If the target is a series of keyframes, we can use the first value\n     * in the array. If this first value is null, we'll still need to read from the DOM.\n     */\n\n    if (Array.isArray(targetValue)) {\n      value = targetValue[0];\n    }\n    /**\n     * If the target isn't keyframes, or the first keyframe was null, we need to\n     * first check if an origin value was explicitly defined in the transition as \"from\",\n     * if not read the value from the DOM. As an absolute fallback, take the defined target value.\n     */\n\n\n    if (value === null) {\n      value = (_b = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readValue(key)) !== null && _b !== void 0 ? _b : target[key];\n    }\n    /**\n     * If value is still undefined or null, ignore it. Preferably this would throw,\n     * but this was causing issues in Framer.\n     */\n\n\n    if (value === undefined || value === null) continue;\n\n    if (typeof value === \"string\" && isNumericalString(value)) {\n      // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n      value = parseFloat(value);\n    } else if (!findValueType(value) && complex.test(targetValue)) {\n      value = getAnimatableNone(key, targetValue);\n    }\n\n    visualElement.addValue(key, motionValue(value));\n    (_c = (_d = origin)[key]) !== null && _c !== void 0 ? _c : _d[key] = value;\n    visualElement.setBaseTarget(key, value);\n  }\n}\n\nfunction getOriginFromTransition(key, transition) {\n  if (!transition) return;\n  var valueTransition = transition[key] || transition[\"default\"] || transition;\n  return valueTransition.from;\n}\n\nfunction getOrigin(target, transition, visualElement) {\n  var _a, _b;\n\n  var origin = {};\n\n  for (var key in target) {\n    origin[key] = (_a = getOriginFromTransition(key, transition)) !== null && _a !== void 0 ? _a : (_b = visualElement.getValue(key)) === null || _b === void 0 ? void 0 : _b.get();\n  }\n\n  return origin;\n}\n\nexport { checkTargetForNewValues, getOrigin, getOriginFromTransition, setTarget, setValues };","import { __read, __rest, __assign } from 'tslib';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { setTarget } from './setters.js';\nimport { resolveVariant } from './variants.js';\n/**\n * @internal\n */\n\nfunction animateVisualElement(visualElement, definition, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  visualElement.notifyAnimationStart();\n  var animation;\n\n  if (Array.isArray(definition)) {\n    var animations = definition.map(function (variant) {\n      return animateVariant(visualElement, variant, options);\n    });\n    animation = Promise.all(animations);\n  } else if (typeof definition === \"string\") {\n    animation = animateVariant(visualElement, definition, options);\n  } else {\n    var resolvedDefinition = typeof definition === \"function\" ? resolveVariant(visualElement, definition, options.custom) : definition;\n    animation = animateTarget(visualElement, resolvedDefinition, options);\n  }\n\n  return animation.then(function () {\n    return visualElement.notifyAnimationComplete(definition);\n  });\n}\n\nfunction animateVariant(visualElement, variant, options) {\n  var _a;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  var resolved = resolveVariant(visualElement, variant, options.custom);\n  var _b = (resolved || {}).transition,\n      transition = _b === void 0 ? visualElement.getDefaultTransition() || {} : _b;\n\n  if (options.transitionOverride) {\n    transition = options.transitionOverride;\n  }\n  /**\n   * If we have a variant, create a callback that runs it as an animation.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n\n\n  var getAnimation = resolved ? function () {\n    return animateTarget(visualElement, resolved, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If we have children, create a callback that runs all their animations.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n\n  var getChildAnimations = ((_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.size) ? function (forwardDelay) {\n    if (forwardDelay === void 0) {\n      forwardDelay = 0;\n    }\n\n    var _a = transition.delayChildren,\n        delayChildren = _a === void 0 ? 0 : _a,\n        staggerChildren = transition.staggerChildren,\n        staggerDirection = transition.staggerDirection;\n    return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If the transition explicitly defines a \"when\" option, we need to resolve either\n   * this animation or all children animations before playing the other.\n   */\n\n  var when = transition.when;\n\n  if (when) {\n    var _c = __read(when === \"beforeChildren\" ? [getAnimation, getChildAnimations] : [getChildAnimations, getAnimation], 2),\n        first = _c[0],\n        last = _c[1];\n\n    return first().then(last);\n  } else {\n    return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n  }\n}\n/**\n * @internal\n */\n\n\nfunction animateTarget(visualElement, definition, _a) {\n  var _b;\n\n  var _c = _a === void 0 ? {} : _a,\n      _d = _c.delay,\n      delay = _d === void 0 ? 0 : _d,\n      transitionOverride = _c.transitionOverride,\n      type = _c.type;\n\n  var _e = visualElement.makeTargetAnimatable(definition),\n      _f = _e.transition,\n      transition = _f === void 0 ? visualElement.getDefaultTransition() : _f,\n      transitionEnd = _e.transitionEnd,\n      target = __rest(_e, [\"transition\", \"transitionEnd\"]);\n\n  if (transitionOverride) transition = transitionOverride;\n  var animations = [];\n  var animationTypeState = type && ((_b = visualElement.animationState) === null || _b === void 0 ? void 0 : _b.getState()[type]);\n\n  for (var key in target) {\n    var value = visualElement.getValue(key);\n    var valueTarget = target[key];\n\n    if (!value || valueTarget === undefined || animationTypeState && shouldBlockAnimation(animationTypeState, key)) {\n      continue;\n    }\n\n    var animation = startAnimation(key, value, valueTarget, __assign({\n      delay: delay\n    }, transition));\n    animations.push(animation);\n  }\n\n  return Promise.all(animations).then(function () {\n    transitionEnd && setTarget(visualElement, transitionEnd);\n  });\n}\n\nfunction animateChildren(visualElement, variant, delayChildren, staggerChildren, staggerDirection, options) {\n  if (delayChildren === void 0) {\n    delayChildren = 0;\n  }\n\n  if (staggerChildren === void 0) {\n    staggerChildren = 0;\n  }\n\n  if (staggerDirection === void 0) {\n    staggerDirection = 1;\n  }\n\n  var animations = [];\n  var maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n  var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n\n    return i * staggerChildren;\n  } : function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n\n    return maxStaggerDuration - i * staggerChildren;\n  };\n  Array.from(visualElement.variantChildren).sort(sortByTreeOrder).forEach(function (child, i) {\n    animations.push(animateVariant(child, variant, __assign(__assign({}, options), {\n      delay: delayChildren + generateStaggerDuration(i)\n    })).then(function () {\n      return child.notifyAnimationComplete(variant);\n    }));\n  });\n  return Promise.all(animations);\n}\n\nfunction stopAnimation(visualElement) {\n  visualElement.forEachValue(function (value) {\n    return value.stop();\n  });\n}\n\nfunction sortByTreeOrder(a, b) {\n  return a.sortNodePosition(b);\n}\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\n\n\nfunction shouldBlockAnimation(_a, key) {\n  var protectedKeys = _a.protectedKeys,\n      needsAnimating = _a.needsAnimating;\n  var shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n  needsAnimating[key] = false;\n  return shouldBlock;\n}\n\nexport { animateVisualElement, sortByTreeOrder, stopAnimation };","import { __spreadArray, __read, __assign, __rest } from 'tslib';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.js';\nimport { shallowCompare } from '../../utils/shallow-compare.js';\nimport { animateVisualElement } from './animation.js';\nimport { AnimationType } from './types.js';\nimport { isVariantLabels, resolveVariant, isVariantLabel } from './variants.js';\nvar variantPriorityOrder = [AnimationType.Animate, AnimationType.Hover, AnimationType.Tap, AnimationType.Drag, AnimationType.Focus, AnimationType.Exit];\n\nvar reversePriorityOrder = __spreadArray([], __read(variantPriorityOrder)).reverse();\n\nvar numAnimationTypes = variantPriorityOrder.length;\n\nfunction animateList(visualElement) {\n  return function (animations) {\n    return Promise.all(animations.map(function (_a) {\n      var animation = _a.animation,\n          options = _a.options;\n      return animateVisualElement(visualElement, animation, options);\n    }));\n  };\n}\n\nfunction createAnimationState(visualElement) {\n  var animate = animateList(visualElement);\n  var state = createState();\n  var allAnimatedKeys = {};\n  var isInitialRender = true;\n  /**\n   * This function will be used to reduce the animation definitions for\n   * each active animation type into an object of resolved values for it.\n   */\n\n  var buildResolvedTypeValues = function buildResolvedTypeValues(acc, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n\n    if (resolved) {\n      resolved.transition;\n\n      var transitionEnd = resolved.transitionEnd,\n          target = __rest(resolved, [\"transition\", \"transitionEnd\"]);\n\n      acc = __assign(__assign(__assign({}, acc), target), transitionEnd);\n    }\n\n    return acc;\n  };\n\n  function isAnimated(key) {\n    return allAnimatedKeys[key] !== undefined;\n  }\n  /**\n   * This just allows us to inject mocked animation functions\n   * @internal\n   */\n\n\n  function setAnimateFunction(makeAnimator) {\n    animate = makeAnimator(visualElement);\n  }\n  /**\n   * When we receive new props, we need to:\n   * 1. Create a list of protected keys for each type. This is a directory of\n   *    value keys that are currently being \"handled\" by types of a higher priority\n   *    so that whenever an animation is played of a given type, these values are\n   *    protected from being animated.\n   * 2. Determine if an animation type needs animating.\n   * 3. Determine if any values have been removed from a type and figure out\n   *    what to animate those to.\n   */\n\n\n  function animateChanges(options, changedActiveType) {\n    var _a;\n\n    var props = visualElement.getProps();\n    var context = visualElement.getVariantContext(true) || {};\n    /**\n     * A list of animations that we'll build into as we iterate through the animation\n     * types. This will get executed at the end of the function.\n     */\n\n    var animations = [];\n    /**\n     * Keep track of which values have been removed. Then, as we hit lower priority\n     * animation types, we can check if they contain removed values and animate to that.\n     */\n\n    var removedKeys = new Set();\n    /**\n     * A dictionary of all encountered keys. This is an object to let us build into and\n     * copy it without iteration. Each time we hit an animation type we set its protected\n     * keys - the keys its not allowed to animate - to the latest version of this object.\n     */\n\n    var encounteredKeys = {};\n    /**\n     * If a variant has been removed at a given index, and this component is controlling\n     * variant animations, we want to ensure lower-priority variants are forced to animate.\n     */\n\n    var removedVariantIndex = Infinity;\n\n    var _loop_1 = function _loop_1(i) {\n      var type = reversePriorityOrder[i];\n      var typeState = state[type];\n      var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n      var propIsVariant = isVariantLabel(prop);\n      /**\n       * If this type has *just* changed isActive status, set activeDelta\n       * to that status. Otherwise set to null.\n       */\n\n      var activeDelta = type === changedActiveType ? typeState.isActive : null;\n      if (activeDelta === false) removedVariantIndex = i;\n      /**\n       * If this prop is an inherited variant, rather than been set directly on the\n       * component itself, we want to make sure we allow the parent to trigger animations.\n       *\n       * TODO: Can probably change this to a !isControllingVariants check\n       */\n\n      var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n      /**\n       *\n       */\n\n      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {\n        isInherited = false;\n      }\n      /**\n       * Set all encountered keys so far as the protected keys for this type. This will\n       * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n       */\n\n\n      typeState.protectedKeys = __assign({}, encounteredKeys); // Check if we can skip analysing this prop early\n\n      if ( // If it isn't active and hasn't *just* been set as inactive\n      !typeState.isActive && activeDelta === null || // If we didn't and don't have any defined prop for this animation type\n      !prop && !typeState.prevProp || // Or if the prop doesn't define an animation\n      isAnimationControls(prop) || typeof prop === \"boolean\") {\n        return \"continue\";\n      }\n      /**\n       * As we go look through the values defined on this type, if we detect\n       * a changed value or a value that was removed in a higher priority, we set\n       * this to true and add this prop to the animation list.\n       */\n\n\n      var shouldAnimateType = variantsHaveChanged(typeState.prevProp, prop) || // If we're making this variant active, we want to always make it active\n      type === changedActiveType && typeState.isActive && !isInherited && propIsVariant || // If we removed a higher-priority variant (i is in reverse order)\n      i > removedVariantIndex && propIsVariant;\n      /**\n       * As animations can be set as variant lists, variants or target objects, we\n       * coerce everything to an array if it isn't one already\n       */\n\n      var definitionList = Array.isArray(prop) ? prop : [prop];\n      /**\n       * Build an object of all the resolved values. We'll use this in the subsequent\n       * animateChanges calls to determine whether a value has changed.\n       */\n\n      var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n      if (activeDelta === false) resolvedValues = {};\n      /**\n       * Now we need to loop through all the keys in the prev prop and this prop,\n       * and decide:\n       * 1. If the value has changed, and needs animating\n       * 2. If it has been removed, and needs adding to the removedKeys set\n       * 3. If it has been removed in a higher priority type and needs animating\n       * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n       *    needs adding to the type's protectedKeys list.\n       */\n\n      var _b = typeState.prevResolvedValues,\n          prevResolvedValues = _b === void 0 ? {} : _b;\n\n      var allKeys = __assign(__assign({}, prevResolvedValues), resolvedValues);\n\n      var markToAnimate = function markToAnimate(key) {\n        shouldAnimateType = true;\n        removedKeys.delete(key);\n        typeState.needsAnimating[key] = true;\n      };\n\n      for (var key in allKeys) {\n        var next = resolvedValues[key];\n        var prev = prevResolvedValues[key]; // If we've already handled this we can just skip ahead\n\n        if (encounteredKeys.hasOwnProperty(key)) continue;\n        /**\n         * If the value has changed, we probably want to animate it.\n         */\n\n        if (next !== prev) {\n          /**\n           * If both values are keyframes, we need to shallow compare them to\n           * detect whether any value has changed. If it has, we animate it.\n           */\n          if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n            if (!shallowCompare(next, prev)) {\n              markToAnimate(key);\n            } else {\n              /**\n               * If it hasn't changed, we want to ensure it doesn't animate by\n               * adding it to the list of protected keys.\n               */\n              typeState.protectedKeys[key] = true;\n            }\n          } else if (next !== undefined) {\n            // If next is defined and doesn't equal prev, it needs animating\n            markToAnimate(key);\n          } else {\n            // If it's undefined, it's been removed.\n            removedKeys.add(key);\n          }\n        } else if (next !== undefined && removedKeys.has(key)) {\n          /**\n           * If next hasn't changed and it isn't undefined, we want to check if it's\n           * been removed by a higher priority\n           */\n          markToAnimate(key);\n        } else {\n          /**\n           * If it hasn't changed, we add it to the list of protected values\n           * to ensure it doesn't get animated.\n           */\n          typeState.protectedKeys[key] = true;\n        }\n      }\n      /**\n       * Update the typeState so next time animateChanges is called we can compare the\n       * latest prop and resolvedValues to these.\n       */\n\n\n      typeState.prevProp = prop;\n      typeState.prevResolvedValues = resolvedValues;\n      /**\n       *\n       */\n\n      if (typeState.isActive) {\n        encounteredKeys = __assign(__assign({}, encounteredKeys), resolvedValues);\n      }\n\n      if (isInitialRender && visualElement.blockInitialAnimation) {\n        shouldAnimateType = false;\n      }\n      /**\n       * If this is an inherited prop we want to hard-block animations\n       * TODO: Test as this should probably still handle animations triggered\n       * by removed values?\n       */\n\n\n      if (shouldAnimateType && !isInherited) {\n        animations.push.apply(animations, __spreadArray([], __read(definitionList.map(function (animation) {\n          return {\n            animation: animation,\n            options: __assign({\n              type: type\n            }, options)\n          };\n        }))));\n      }\n    };\n    /**\n     * Iterate through all animation types in reverse priority order. For each, we want to\n     * detect which values it's handling and whether or not they've changed (and therefore\n     * need to be animated). If any values have been removed, we want to detect those in\n     * lower priority props and flag for animation.\n     */\n\n\n    for (var i = 0; i < numAnimationTypes; i++) {\n      _loop_1(i);\n    }\n\n    allAnimatedKeys = __assign({}, encounteredKeys);\n    /**\n     * If there are some removed value that haven't been dealt with,\n     * we need to create a new animation that falls back either to the value\n     * defined in the style prop, or the last read value.\n     */\n\n    if (removedKeys.size) {\n      var fallbackAnimation_1 = {};\n      removedKeys.forEach(function (key) {\n        var fallbackTarget = visualElement.getBaseTarget(key);\n\n        if (fallbackTarget !== undefined) {\n          fallbackAnimation_1[key] = fallbackTarget;\n        }\n      });\n      animations.push({\n        animation: fallbackAnimation_1\n      });\n    }\n\n    var shouldAnimate = Boolean(animations.length);\n\n    if (isInitialRender && props.initial === false && !visualElement.manuallyAnimateOnMount) {\n      shouldAnimate = false;\n    }\n\n    isInitialRender = false;\n    return shouldAnimate ? animate(animations) : Promise.resolve();\n  }\n  /**\n   * Change whether a certain animation type is active.\n   */\n\n\n  function setActive(type, isActive, options) {\n    var _a; // If the active state hasn't changed, we can safely do nothing here\n\n\n    if (state[type].isActive === isActive) return Promise.resolve(); // Propagate active change to children\n\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      var _a;\n\n      return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive);\n    });\n    state[type].isActive = isActive;\n    return animateChanges(options, type);\n  }\n\n  return {\n    isAnimated: isAnimated,\n    animateChanges: animateChanges,\n    setActive: setActive,\n    setAnimateFunction: setAnimateFunction,\n    getState: function getState() {\n      return state;\n    }\n  };\n}\n\nfunction variantsHaveChanged(prev, next) {\n  if (typeof next === \"string\") {\n    return next !== prev;\n  } else if (isVariantLabels(next)) {\n    return !shallowCompare(next, prev);\n  }\n\n  return false;\n}\n\nfunction createTypeState(isActive) {\n  if (isActive === void 0) {\n    isActive = false;\n  }\n\n  return {\n    isActive: isActive,\n    protectedKeys: {},\n    needsAnimating: {},\n    prevResolvedValues: {}\n  };\n}\n\nfunction createState() {\n  var _a;\n\n  return _a = {}, _a[AnimationType.Animate] = createTypeState(true), _a[AnimationType.Hover] = createTypeState(), _a[AnimationType.Tap] = createTypeState(), _a[AnimationType.Drag] = createTypeState(), _a[AnimationType.Focus] = createTypeState(), _a[AnimationType.Exit] = createTypeState(), _a;\n}\n\nexport { createAnimationState, variantPriorityOrder, variantsHaveChanged };","import { __read } from 'tslib';\nimport { useEffect, useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { usePresence } from '../../components/AnimatePresence/use-presence.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { createAnimationState } from '../../render/utils/animation-state.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar animations = {\n  animation: makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement,\n        animate = _a.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n\n    visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n\n    if (isAnimationControls(animate)) {\n      useEffect(function () {\n        return animate.subscribe(visualElement);\n      }, [animate]);\n    }\n  }),\n  exit: makeRenderlessComponent(function (props) {\n    var custom = props.custom,\n        visualElement = props.visualElement;\n\n    var _a = __read(usePresence(), 2),\n        isPresent = _a[0],\n        onExitComplete = _a[1];\n\n    var presenceContext = useContext(PresenceContext);\n    useEffect(function () {\n      var _a, _b;\n\n      var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, {\n        custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom\n      });\n      !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(onExitComplete));\n    }, [isPresent]);\n  })\n};\nexport { animations };","var isPoint = function isPoint(point) {\n  return point.hasOwnProperty('x') && point.hasOwnProperty('y');\n};\n\nexport { isPoint };","import { isPoint } from './is-point.js';\n\nvar isPoint3D = function isPoint3D(point) {\n  return isPoint(point) && point.hasOwnProperty('z');\n};\n\nexport { isPoint3D };","import { isPoint } from './is-point.js';\nimport { isPoint3D } from './is-point-3d.js';\nimport { isNum } from './inc.js';\n\nvar distance1D = function distance1D(a, b) {\n  return Math.abs(a - b);\n};\n\nfunction distance(a, b) {\n  if (isNum(a) && isNum(b)) {\n    return distance1D(a, b);\n  } else if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n    return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n  }\n}\n\nexport { distance };","import { __assign } from 'tslib';\nimport { isMouseEvent, isTouchEvent } from './utils/event-type.js';\nimport { extractEventInfo } from '../events/event-info.js';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { secondsToMilliseconds } from '../utils/time-conversion.js';\nimport { addPointerEvent } from '../events/use-pointer-event.js';\nimport { distance, pipe } from 'popmotion';\n/**\n * @internal\n */\n\nvar PanSession =\n/** @class */\nfunction () {\n  function PanSession(event, handlers, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        transformPagePoint = _b.transformPagePoint;\n    /**\n     * @internal\n     */\n\n\n    this.startEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEventInfo = null;\n    /**\n     * @internal\n     */\n\n    this.handlers = {};\n\n    this.updatePoint = function () {\n      if (!(_this.lastMoveEvent && _this.lastMoveEventInfo)) return;\n      var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n      var isPanStarted = _this.startEvent !== null; // Only start panning if the offset is larger than 3 pixels. If we make it\n      // any larger than this we'll want to reset the pointer history\n      // on the first update to avoid visual snapping to the cursoe.\n\n      var isDistancePastThreshold = distance(info.offset, {\n        x: 0,\n        y: 0\n      }) >= 3;\n      if (!isPanStarted && !isDistancePastThreshold) return;\n      var point = info.point;\n      var timestamp = getFrameData().timestamp;\n\n      _this.history.push(__assign(__assign({}, point), {\n        timestamp: timestamp\n      }));\n\n      var _a = _this.handlers,\n          onStart = _a.onStart,\n          onMove = _a.onMove;\n\n      if (!isPanStarted) {\n        onStart && onStart(_this.lastMoveEvent, info);\n        _this.startEvent = _this.lastMoveEvent;\n      }\n\n      onMove && onMove(_this.lastMoveEvent, info);\n    };\n\n    this.handlePointerMove = function (event, info) {\n      _this.lastMoveEvent = event;\n      _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint); // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n\n      if (isMouseEvent(event) && event.buttons === 0) {\n        _this.handlePointerUp(event, info);\n\n        return;\n      } // Throttle mouse move event to once per frame\n\n\n      sync.update(_this.updatePoint, true);\n    };\n\n    this.handlePointerUp = function (event, info) {\n      _this.end();\n\n      var _a = _this.handlers,\n          onEnd = _a.onEnd,\n          onSessionEnd = _a.onSessionEnd;\n      var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n\n      if (_this.startEvent && onEnd) {\n        onEnd(event, panInfo);\n      }\n\n      onSessionEnd && onSessionEnd(event, panInfo);\n    }; // If we have more than one touch, don't start detecting this gesture\n\n\n    if (isTouchEvent(event) && event.touches.length > 1) return;\n    this.handlers = handlers;\n    this.transformPagePoint = transformPagePoint;\n    var info = extractEventInfo(event);\n    var initialInfo = transformPoint(info, this.transformPagePoint);\n    var point = initialInfo.point;\n    var timestamp = getFrameData().timestamp;\n    this.history = [__assign(__assign({}, point), {\n      timestamp: timestamp\n    })];\n    var onSessionStart = handlers.onSessionStart;\n    onSessionStart && onSessionStart(event, getPanInfo(initialInfo, this.history));\n    this.removeListeners = pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n  }\n\n  PanSession.prototype.updateHandlers = function (handlers) {\n    this.handlers = handlers;\n  };\n\n  PanSession.prototype.end = function () {\n    this.removeListeners && this.removeListeners();\n    cancelSync.update(this.updatePoint);\n  };\n\n  return PanSession;\n}();\n\nfunction transformPoint(info, transformPagePoint) {\n  return transformPagePoint ? {\n    point: transformPagePoint(info.point)\n  } : info;\n}\n\nfunction subtractPoint(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n\nfunction getPanInfo(_a, history) {\n  var point = _a.point;\n  return {\n    point: point,\n    delta: subtractPoint(point, lastDevicePoint(history)),\n    offset: subtractPoint(point, startDevicePoint(history)),\n    velocity: getVelocity(history, 0.1)\n  };\n}\n\nfunction startDevicePoint(history) {\n  return history[0];\n}\n\nfunction lastDevicePoint(history) {\n  return history[history.length - 1];\n}\n\nfunction getVelocity(history, timeDelta) {\n  if (history.length < 2) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var i = history.length - 1;\n  var timestampedPoint = null;\n  var lastPoint = lastDevicePoint(history);\n\n  while (i >= 0) {\n    timestampedPoint = history[i];\n\n    if (lastPoint.timestamp - timestampedPoint.timestamp > secondsToMilliseconds(timeDelta)) {\n      break;\n    }\n\n    i--;\n  }\n\n  if (!timestampedPoint) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n\n  if (time === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var currentVelocity = {\n    x: (lastPoint.x - timestampedPoint.x) / time,\n    y: (lastPoint.y - timestampedPoint.y) / time\n  };\n\n  if (currentVelocity.x === Infinity) {\n    currentVelocity.x = 0;\n  }\n\n  if (currentVelocity.y === Infinity) {\n    currentVelocity.y = 0;\n  }\n\n  return currentVelocity;\n}\n\nexport { PanSession };","function noop(any) {\n  return any;\n}\n\nexport { noop };","import { __assign } from 'tslib';\nimport { noop } from '../noop.js';\n/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\n\nfunction convertBoundingBoxToAxisBox(_a) {\n  var top = _a.top,\n      left = _a.left,\n      right = _a.right,\n      bottom = _a.bottom;\n  return {\n    x: {\n      min: left,\n      max: right\n    },\n    y: {\n      min: top,\n      max: bottom\n    }\n  };\n}\n\nfunction convertAxisBoxToBoundingBox(_a) {\n  var x = _a.x,\n      y = _a.y;\n  return {\n    top: y.min,\n    bottom: y.max,\n    left: x.min,\n    right: x.max\n  };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\n\n\nfunction transformBoundingBox(_a, transformPoint) {\n  var top = _a.top,\n      left = _a.left,\n      bottom = _a.bottom,\n      right = _a.right;\n\n  if (transformPoint === void 0) {\n    transformPoint = noop;\n  }\n\n  var topLeft = transformPoint({\n    x: left,\n    y: top\n  });\n  var bottomRight = transformPoint({\n    x: right,\n    y: bottom\n  });\n  return {\n    top: topLeft.y,\n    left: topLeft.x,\n    bottom: bottomRight.y,\n    right: bottomRight.x\n  };\n}\n/**\n * Create an empty axis box of zero size\n */\n\n\nfunction axisBox() {\n  return {\n    x: {\n      min: 0,\n      max: 1\n    },\n    y: {\n      min: 0,\n      max: 1\n    }\n  };\n}\n\nfunction copyAxisBox(box) {\n  return {\n    x: __assign({}, box.x),\n    y: __assign({}, box.y)\n  };\n}\n/**\n * Create an empty box delta\n */\n\n\nvar zeroDelta = {\n  translate: 0,\n  scale: 1,\n  origin: 0,\n  originPoint: 0\n};\n\nfunction delta() {\n  return {\n    x: __assign({}, zeroDelta),\n    y: __assign({}, zeroDelta)\n  };\n}\n\nexport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox, copyAxisBox, delta, transformBoundingBox };","// Call a handler once for each axis\nfunction eachAxis(handler) {\n  return [handler(\"x\"), handler(\"y\")];\n}\n\nexport { eachAxis };","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\n\nfunction applyConstraints(point, _a, elastic) {\n  var min = _a.min,\n      max = _a.max;\n\n  if (min !== undefined && point < min) {\n    // If we have a min point defined, and this is outside of that, constrain\n    point = elastic ? mix(min, point, elastic.min) : Math.max(point, min);\n  } else if (max !== undefined && point > max) {\n    // If we have a max point defined, and this is outside of that, constrain\n    point = elastic ? mix(max, point, elastic.max) : Math.min(point, max);\n  }\n\n  return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\n\n\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n  // Calculate a min point for this axis and apply it to the current pointer\n  var min = point - length * progress;\n  return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\n\n\nfunction calcRelativeAxisConstraints(axis, min, max) {\n  return {\n    min: min !== undefined ? axis.min + min : undefined,\n    max: max !== undefined ? axis.max + max - (axis.max - axis.min) : undefined\n  };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\n\n\nfunction calcRelativeConstraints(layoutBox, _a) {\n  var top = _a.top,\n      left = _a.left,\n      bottom = _a.bottom,\n      right = _a.right;\n  return {\n    x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n    y: calcRelativeAxisConstraints(layoutBox.y, top, bottom)\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\n\n\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n  var _a;\n\n  var min = constraintsAxis.min - layoutAxis.min;\n  var max = constraintsAxis.max - layoutAxis.max; // If the constraints axis is actually smaller than the layout axis then we can\n  // flip the constraints\n\n  if (constraintsAxis.max - constraintsAxis.min < layoutAxis.max - layoutAxis.min) {\n    _a = __read([max, min], 2), min = _a[0], max = _a[1];\n  }\n\n  return {\n    min: layoutAxis.min + min,\n    max: layoutAxis.min + max\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\n\n\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n  return {\n    x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n    y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y)\n  };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\n\n\nfunction calcPositionFromProgress(axis, constraints, progress) {\n  var axisLength = axis.max - axis.min;\n  var min = mix(constraints.min, constraints.max - axisLength, progress);\n  return {\n    min: min,\n    max: min + axisLength\n  };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\n\n\nfunction rebaseAxisConstraints(layout, constraints) {\n  var relativeConstraints = {};\n\n  if (constraints.min !== undefined) {\n    relativeConstraints.min = constraints.min - layout.min;\n  }\n\n  if (constraints.max !== undefined) {\n    relativeConstraints.max = constraints.max - layout.min;\n  }\n\n  return relativeConstraints;\n}\n\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\n\nfunction resolveDragElastic(dragElastic) {\n  if (dragElastic === false) {\n    dragElastic = 0;\n  } else if (dragElastic === true) {\n    dragElastic = defaultElastic;\n  }\n\n  return {\n    x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n    y: resolveAxisElastic(dragElastic, \"top\", \"bottom\")\n  };\n}\n\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n  return {\n    min: resolvePointElastic(dragElastic, minLabel),\n    max: resolvePointElastic(dragElastic, maxLabel)\n  };\n}\n\nfunction resolvePointElastic(dragElastic, label) {\n  var _a;\n\n  return typeof dragElastic === \"number\" ? dragElastic : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\nexport { applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };","import { convertBoundingBoxToAxisBox, transformBoundingBox } from '../../../utils/geometry/index.js';\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\n\nfunction getBoundingBox(element, transformPagePoint) {\n  var box = element.getBoundingClientRect();\n  return convertBoundingBoxToAxisBox(transformBoundingBox(box, transformPagePoint));\n}\n\nexport { getBoundingBox };","import { mix, distance, clamp, progress } from 'popmotion';\n\nvar clampProgress = function clampProgress(v) {\n  return clamp(0, 1, v);\n};\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\n\n\nfunction isNear(value, target, maxDistance) {\n  if (target === void 0) {\n    target = 0;\n  }\n\n  if (maxDistance === void 0) {\n    maxDistance = 0.01;\n  }\n\n  return distance(value, target) < maxDistance;\n}\n\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\n\n\nfunction calcOrigin(source, target) {\n  var origin = 0.5;\n  var sourceLength = calcLength(source);\n  var targetLength = calcLength(target);\n\n  if (targetLength > sourceLength) {\n    origin = progress(target.min, target.max - sourceLength, source.min);\n  } else if (sourceLength > targetLength) {\n    origin = progress(source.min, source.max - targetLength, target.min);\n  }\n\n  return clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\n\n\nfunction updateAxisDelta(delta, source, target, origin) {\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  delta.origin = origin;\n  delta.originPoint = mix(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  if (isNear(delta.scale, 1, 0.0001)) delta.scale = 1;\n  delta.translate = mix(target.min, target.max, delta.origin) - delta.originPoint;\n  if (isNear(delta.translate)) delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\n\n\nfunction updateBoxDelta(delta, source, target, origin) {\n  updateAxisDelta(delta.x, source.x, target.x, defaultOrigin(origin.originX));\n  updateAxisDelta(delta.y, source.y, target.y, defaultOrigin(origin.originY));\n}\n/**\n * Currently this only accepts numerical origins, measured as 0-1, but could\n * accept pixel values by comparing to the target axis.\n */\n\n\nfunction defaultOrigin(origin) {\n  return typeof origin === \"number\" ? origin : 0.5;\n}\n\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\n\nfunction calcRelativeBox(projection, parentProjection) {\n  calcRelativeAxis(projection.target.x, projection.relativeTarget.x, parentProjection.target.x);\n  calcRelativeAxis(projection.target.y, projection.relativeTarget.y, parentProjection.target.y);\n}\n\nexport { calcOrigin, calcRelativeAxis, calcRelativeBox, isNear, updateAxisDelta, updateBoxDelta };","var compareByDepth = function compareByDepth(a, b) {\n  return a.depth - b.depth;\n};\n\nexport { compareByDepth };","import sync from 'framesync';\nimport { copyAxisBox } from '../../../utils/geometry/index.js';\nimport { compareByDepth } from '../../utils/compare-by-depth.js';\n\nfunction isProjecting(visualElement) {\n  var isEnabled = visualElement.projection.isEnabled;\n  return isEnabled || visualElement.shouldResetTransform();\n}\n\nfunction collectProjectingAncestors(visualElement, ancestors) {\n  if (ancestors === void 0) {\n    ancestors = [];\n  }\n\n  var parent = visualElement.parent;\n  if (parent) collectProjectingAncestors(parent, ancestors);\n  if (isProjecting(visualElement)) ancestors.push(visualElement);\n  return ancestors;\n}\n\nfunction collectProjectingChildren(visualElement) {\n  var children = [];\n\n  var addChild = function addChild(child) {\n    if (isProjecting(child)) children.push(child);\n    child.children.forEach(addChild);\n  };\n\n  visualElement.children.forEach(addChild);\n  return children.sort(compareByDepth);\n}\n/**\n * Update the layoutState by measuring the DOM layout. This\n * should be called after resetting any layout-affecting transforms.\n */\n\n\nfunction updateLayoutMeasurement(visualElement) {\n  if (visualElement.shouldResetTransform()) return;\n  var layoutState = visualElement.getLayoutState();\n  visualElement.notifyBeforeLayoutMeasure(layoutState.layout);\n  layoutState.isHydrated = true;\n  layoutState.layout = visualElement.measureViewportBox();\n  layoutState.layoutCorrected = copyAxisBox(layoutState.layout);\n  visualElement.notifyLayoutMeasure(layoutState.layout, visualElement.prevViewportBox || layoutState.layout);\n  sync.update(function () {\n    return visualElement.rebaseProjectionTarget();\n  });\n}\n/**\n * Record the viewport box as it was before an expected mutation/re-render\n */\n\n\nfunction snapshotViewportBox(visualElement) {\n  if (visualElement.shouldResetTransform()) return;\n  visualElement.prevViewportBox = visualElement.measureViewportBox(false);\n  /**\n   * Update targetBox to match the prevViewportBox. This is just to ensure\n   * that targetBox is affected by scroll in the same way as the measured box\n   */\n\n  visualElement.rebaseProjectionTarget(false, visualElement.prevViewportBox);\n}\n\nexport { collectProjectingAncestors, collectProjectingChildren, snapshotViewportBox, updateLayoutMeasurement };","import { mix } from 'popmotion';\n\nfunction tweenAxis(target, prev, next, p) {\n  target.min = mix(prev.min, next.min, p);\n  target.max = mix(prev.max, next.max, p);\n}\n\nfunction calcRelativeOffsetAxis(parent, child) {\n  return {\n    min: child.min - parent.min,\n    max: child.max - parent.min\n  };\n}\n\nfunction calcRelativeOffset(parent, child) {\n  return {\n    x: calcRelativeOffsetAxis(parent.x, child.x),\n    y: calcRelativeOffsetAxis(parent.y, child.y)\n  };\n}\n\nfunction checkIfParentHasChanged(prev, next) {\n  var prevId = prev.getLayoutId();\n  var nextId = next.getLayoutId();\n  return prevId !== nextId || nextId === undefined && prev !== next;\n}\n\nexport { calcRelativeOffset, calcRelativeOffsetAxis, checkIfParentHasChanged, tweenAxis };","function isDraggable(visualElement) {\n  var _a = visualElement.getProps(),\n      drag = _a.drag,\n      _dragX = _a._dragX;\n\n  return drag && !_dragX;\n}\n\nexport { isDraggable };","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\nimport { isDraggable } from '../../render/utils/is-draggable.js';\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\n\nfunction resetAxis(axis, originAxis) {\n  axis.min = originAxis.min;\n  axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\n\n\nfunction resetBox(box, originBox) {\n  resetAxis(box.x, originBox.x);\n  resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\n\n\nfunction scalePoint(point, scale, originPoint) {\n  var distanceFromOrigin = point - originPoint;\n  var scaled = scale * distanceFromOrigin;\n  return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\n\n\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n  if (boxScale !== undefined) {\n    point = scalePoint(point, boxScale, originPoint);\n  }\n\n  return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\n\n\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\n\n\nfunction applyBoxDelta(box, _a) {\n  var x = _a.x,\n      y = _a.y;\n  applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n  applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\n\n\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n  var _b = __read(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2]; // Copy the current axis to the final axis before mutation\n\n\n  final.min = axis.min;\n  final.max = axis.max;\n  var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n  var originPoint = mix(axis.min, axis.max, axisOrigin); // Apply the axis delta to the final axis\n\n  applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\n\n\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\n\nfunction applyBoxTransforms(finalBox, box, transforms) {\n  applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n  applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\n\n\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n  point -= translate;\n  point = scalePoint(point, 1 / scale, originPoint);\n\n  if (boxScale !== undefined) {\n    point = scalePoint(point, 1 / boxScale, originPoint);\n  }\n\n  return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\n\n\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  var originPoint = mix(axis.min, axis.max, origin) - translate;\n  axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeAxisTransforms(axis, transforms, _a) {\n  var _b = __read(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2];\n\n  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeBoxTransforms(box, transforms) {\n  removeAxisTransforms(box.x, transforms, xKeys);\n  removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\n\n\nfunction applyTreeDeltas(box, treeScale, treePath) {\n  var treeLength = treePath.length;\n  if (!treeLength) return; // Reset the treeScale\n\n  treeScale.x = treeScale.y = 1;\n  var node;\n  var delta;\n\n  for (var i = 0; i < treeLength; i++) {\n    node = treePath[i];\n    delta = node.getLayoutState().delta; // Incoporate each ancestor's scale into a culmulative treeScale for this component\n\n    treeScale.x *= delta.x.scale;\n    treeScale.y *= delta.y.scale; // Apply each ancestor's calculated delta into this component's recorded layout box\n\n    applyBoxDelta(box, delta); // If this is a draggable ancestor, also incorporate the node's transform to the layout box\n\n    if (isDraggable(node)) {\n      applyBoxTransforms(box, box, node.getLatestValues());\n    }\n  }\n}\n\nexport { applyAxisDelta, applyAxisTransforms, applyBoxDelta, applyBoxTransforms, applyPointDelta, applyTreeDeltas, removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta, resetAxis, resetBox, scalePoint };","var unresolvedJobs = new Set();\n\nfunction pushJob(stack, job, pointer) {\n  if (!stack[pointer]) stack[pointer] = [];\n  stack[pointer].push(job);\n}\n\nfunction batchLayout(callback) {\n  unresolvedJobs.add(callback);\n  return function () {\n    return unresolvedJobs.delete(callback);\n  };\n}\n\nfunction flushLayout() {\n  if (!unresolvedJobs.size) return;\n  var pointer = 0;\n  var reads = [[]];\n  var writes = [];\n\n  var setRead = function setRead(job) {\n    return pushJob(reads, job, pointer);\n  };\n\n  var setWrite = function setWrite(job) {\n    pushJob(writes, job, pointer);\n    pointer++;\n  };\n  /**\n   * Resolve jobs into their array stacks\n   */\n\n\n  unresolvedJobs.forEach(function (callback) {\n    callback(setRead, setWrite);\n    pointer = 0;\n  });\n  unresolvedJobs.clear();\n  /**\n   * Execute jobs\n   */\n\n  var numStacks = writes.length;\n\n  for (var i = 0; i <= numStacks; i++) {\n    reads[i] && reads[i].forEach(executeJob);\n    writes[i] && writes[i].forEach(executeJob);\n  }\n}\n\nvar executeJob = function executeJob(job) {\n  return job();\n};\n\nexport { batchLayout, flushLayout };","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { PanSession } from '../PanSession.js';\nimport { getGlobalLock } from './utils/lock.js';\nimport { isRefObject } from '../../utils/is-ref-object.js';\nimport { addPointerEvent } from '../../events/use-pointer-event.js';\nimport { addDomEvent } from '../../events/use-dom-event.js';\nimport { getViewportPointFromEvent } from '../../events/event-info.js';\nimport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox } from '../../utils/geometry/index.js';\nimport { eachAxis } from '../../utils/each-axis.js';\nimport { calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, defaultElastic } from './utils/constraints.js';\nimport { getBoundingBox } from '../../render/dom/projection/measure.js';\nimport { calcOrigin } from '../../utils/geometry/delta-calc.js';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { collectProjectingAncestors, updateLayoutMeasurement, collectProjectingChildren } from '../../render/dom/projection/utils.js';\nimport { progress } from 'popmotion';\nimport { convertToRelativeProjection } from '../../render/dom/projection/convert-to-relative.js';\nimport { calcRelativeOffset } from '../../motion/features/layout/utils.js';\nimport { flushLayout, batchLayout } from '../../render/dom/utils/batch-layout.js';\nimport { flushSync } from 'framesync';\nvar elementDragControls = new WeakMap();\n/**\n *\n */\n\nvar lastPointerEvent;\n\nvar VisualElementDragControls =\n/** @class */\nfunction () {\n  function VisualElementDragControls(_a) {\n    var visualElement = _a.visualElement;\n    /**\n     * Track whether we're currently dragging.\n     *\n     * @internal\n     */\n\n    this.isDragging = false;\n    /**\n     * The current direction of drag, or `null` if both.\n     *\n     * @internal\n     */\n\n    this.currentDirection = null;\n    /**\n     * The permitted boundaries of travel, in pixels.\n     *\n     * @internal\n     */\n\n    this.constraints = false;\n    /**\n     * The per-axis resolved elastic values.\n     *\n     * @internal\n     */\n\n    this.elastic = axisBox();\n    /**\n     * A reference to the host component's latest props.\n     *\n     * @internal\n     */\n\n    this.props = {};\n    /**\n     * @internal\n     */\n\n    this.hasMutatedConstraints = false;\n    /**\n     * Track the initial position of the cursor relative to the dragging element\n     * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n     * an ideal bounding box for the VisualElement renderer to project into every frame.\n     *\n     * @internal\n     */\n\n    this.cursorProgress = {\n      x: 0.5,\n      y: 0.5\n    }; // When updating _dragX, or _dragY instead of the VisualElement,\n    // persist their values between drag gestures.\n\n    this.originPoint = {}; // This is a reference to the global drag gesture lock, ensuring only one component\n    // can \"capture\" the drag of one or both axes.\n    // TODO: Look into moving this into pansession?\n\n    this.openGlobalLock = null;\n    /**\n     * @internal\n     */\n\n    this.panSession = null;\n    this.visualElement = visualElement;\n    this.visualElement.enableLayoutProjection();\n    elementDragControls.set(visualElement, this);\n  }\n  /**\n   * Instantiate a PanSession for the drag gesture\n   *\n   * @public\n   */\n\n\n  VisualElementDragControls.prototype.start = function (originEvent, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.snapToCursor,\n        snapToCursor = _c === void 0 ? false : _c,\n        cursorProgress = _b.cursorProgress;\n\n    var onSessionStart = function onSessionStart(event) {\n      var _a; // Stop any animations on both axis values immediately. This allows the user to throw and catch\n      // the component.\n\n\n      _this.stopMotion();\n      /**\n       * Save the initial point. We'll use this to calculate the pointer's position rather\n       * than the one we receive when the gesture actually starts. By then, the pointer will\n       * have already moved, and the perception will be of the pointer \"slipping\" across the element\n       */\n\n\n      var initialPoint = getViewportPointFromEvent(event).point;\n      (_a = _this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(_this);\n      _this.cancelLayout = batchLayout(function (read, write) {\n        var ancestors = collectProjectingAncestors(_this.visualElement);\n        var children = collectProjectingChildren(_this.visualElement);\n\n        var tree = __spreadArray(__spreadArray([], __read(ancestors)), __read(children));\n\n        var hasManuallySetCursorOrigin = false;\n        /**\n         * Apply a simple lock to the projection target. This ensures no animations\n         * can run on the projection box while this lock is active.\n         */\n\n        _this.isLayoutDrag() && _this.visualElement.lockProjectionTarget();\n        write(function () {\n          tree.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          updateLayoutMeasurement(_this.visualElement);\n          children.forEach(updateLayoutMeasurement);\n        });\n        write(function () {\n          tree.forEach(function (element) {\n            return element.restoreTransform();\n          });\n\n          if (snapToCursor) {\n            hasManuallySetCursorOrigin = _this.snapToCursor(initialPoint);\n          }\n        });\n        read(function () {\n          var isRelativeDrag = Boolean(_this.getAxisMotionValue(\"x\") && !_this.isExternalDrag());\n\n          if (!isRelativeDrag) {\n            _this.visualElement.rebaseProjectionTarget(true, _this.visualElement.measureViewportBox(false));\n          }\n\n          _this.visualElement.scheduleUpdateLayoutProjection();\n          /**\n           * When dragging starts, we want to find where the cursor is relative to the bounding box\n           * of the element. Every frame, we calculate a new bounding box using this relative position\n           * and let the visualElement renderer figure out how to reproject the element into this bounding\n           * box.\n           *\n           * By doing it this way, rather than applying an x/y transform directly to the element,\n           * we can ensure the component always visually sticks to the cursor as we'd expect, even\n           * if the DOM element itself changes layout as a result of React updates the user might\n           * make based on the drag position.\n           */\n\n\n          var projection = _this.visualElement.projection;\n          eachAxis(function (axis) {\n            if (!hasManuallySetCursorOrigin) {\n              var _a = projection.target[axis],\n                  min = _a.min,\n                  max = _a.max;\n              _this.cursorProgress[axis] = cursorProgress ? cursorProgress[axis] : progress(min, max, initialPoint[axis]);\n            }\n            /**\n             * If we have external drag MotionValues, record their origin point. On pointermove\n             * we'll apply the pan gesture offset directly to this value.\n             */\n\n\n            var axisValue = _this.getAxisMotionValue(axis);\n\n            if (axisValue) {\n              _this.originPoint[axis] = axisValue.get();\n            }\n          });\n        });\n        write(function () {\n          flushSync.update();\n          flushSync.preRender();\n          flushSync.render();\n          flushSync.postRender();\n        });\n        read(function () {\n          return _this.resolveDragConstraints();\n        });\n      });\n    };\n\n    var onStart = function onStart(event, info) {\n      var _a, _b, _c; // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n\n\n      var _d = _this.props,\n          drag = _d.drag,\n          dragPropagation = _d.dragPropagation;\n\n      if (drag && !dragPropagation) {\n        if (_this.openGlobalLock) _this.openGlobalLock();\n        _this.openGlobalLock = getGlobalLock(drag); // If we don 't have the lock, don't start dragging\n\n        if (!_this.openGlobalLock) return;\n      }\n\n      flushLayout(); // Set current drag status\n\n      _this.isDragging = true;\n      _this.currentDirection = null; // Fire onDragStart event\n\n      (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n      (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n    };\n\n    var onMove = function onMove(event, info) {\n      var _a, _b, _c, _d;\n\n      var _e = _this.props,\n          dragPropagation = _e.dragPropagation,\n          dragDirectionLock = _e.dragDirectionLock; // If we didn't successfully receive the gesture lock, early return.\n\n      if (!dragPropagation && !_this.openGlobalLock) return;\n      var offset = info.offset; // Attempt to detect drag direction if directionLock is true\n\n      if (dragDirectionLock && _this.currentDirection === null) {\n        _this.currentDirection = getCurrentDirection(offset); // If we've successfully set a direction, notify listener\n\n        if (_this.currentDirection !== null) {\n          (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n        }\n\n        return;\n      } // Update each point with the latest position\n\n\n      _this.updateAxis(\"x\", info.point, offset);\n\n      _this.updateAxis(\"y\", info.point, offset); // Fire onDrag event\n\n\n      (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info); // Update the last pointer event\n\n      lastPointerEvent = event;\n    };\n\n    var onSessionEnd = function onSessionEnd(event, info) {\n      return _this.stop(event, info);\n    };\n\n    var transformPagePoint = this.props.transformPagePoint;\n    this.panSession = new PanSession(originEvent, {\n      onSessionStart: onSessionStart,\n      onStart: onStart,\n      onMove: onMove,\n      onSessionEnd: onSessionEnd\n    }, {\n      transformPagePoint: transformPagePoint\n    });\n  };\n\n  VisualElementDragControls.prototype.resolveDragConstraints = function () {\n    var _this = this;\n\n    var _a = this.props,\n        dragConstraints = _a.dragConstraints,\n        dragElastic = _a.dragElastic;\n    var layout = this.visualElement.getLayoutState().layoutCorrected;\n\n    if (dragConstraints) {\n      this.constraints = isRefObject(dragConstraints) ? this.resolveRefConstraints(layout, dragConstraints) : calcRelativeConstraints(layout, dragConstraints);\n    } else {\n      this.constraints = false;\n    }\n\n    this.elastic = resolveDragElastic(dragElastic);\n    /**\n     * If we're outputting to external MotionValues, we want to rebase the measured constraints\n     * from viewport-relative to component-relative.\n     */\n\n    if (this.constraints && !this.hasMutatedConstraints) {\n      eachAxis(function (axis) {\n        if (_this.getAxisMotionValue(axis)) {\n          _this.constraints[axis] = rebaseAxisConstraints(layout[axis], _this.constraints[axis]);\n        }\n      });\n    }\n  };\n\n  VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n    var _a = this.props,\n        onMeasureDragConstraints = _a.onMeasureDragConstraints,\n        transformPagePoint = _a.transformPagePoint;\n    var constraintsElement = constraints.current;\n    invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n    this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n    var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n    /**\n     * If there's an onMeasureDragConstraints listener we call it and\n     * if different constraints are returned, set constraints to that\n     */\n\n    if (onMeasureDragConstraints) {\n      var userConstraints = onMeasureDragConstraints(convertAxisBoxToBoundingBox(measuredConstraints));\n      this.hasMutatedConstraints = !!userConstraints;\n\n      if (userConstraints) {\n        measuredConstraints = convertBoundingBoxToAxisBox(userConstraints);\n      }\n    }\n\n    return measuredConstraints;\n  };\n\n  VisualElementDragControls.prototype.cancelDrag = function () {\n    var _a, _b;\n\n    this.visualElement.unlockProjectionTarget();\n    (_a = this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(this);\n    this.isDragging = false;\n    this.panSession && this.panSession.end();\n    this.panSession = null;\n\n    if (!this.props.dragPropagation && this.openGlobalLock) {\n      this.openGlobalLock();\n      this.openGlobalLock = null;\n    }\n\n    (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(AnimationType.Drag, false);\n  };\n\n  VisualElementDragControls.prototype.stop = function (event, info) {\n    var _a, _b, _c;\n\n    (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n    this.panSession = null;\n    var isDragging = this.isDragging;\n    this.cancelDrag();\n    if (!isDragging) return;\n    var velocity = info.velocity;\n    this.animateDragEnd(velocity);\n    (_c = (_b = this.props).onDragEnd) === null || _c === void 0 ? void 0 : _c.call(_b, event, info);\n  };\n\n  VisualElementDragControls.prototype.snapToCursor = function (point) {\n    var _this = this;\n\n    return eachAxis(function (axis) {\n      var drag = _this.props.drag; // If we're not dragging this axis, do an early return.\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) return;\n\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      if (axisValue) {\n        var box = _this.visualElement.getLayoutState().layout;\n\n        var length_1 = box[axis].max - box[axis].min;\n        var center = box[axis].min + length_1 / 2;\n        var offset = point[axis] - center;\n        _this.originPoint[axis] = point[axis];\n        axisValue.set(offset);\n      } else {\n        _this.cursorProgress[axis] = 0.5;\n        return true;\n      }\n    }).includes(true);\n  };\n  /**\n   * Update the specified axis with the latest pointer information.\n   */\n\n\n  VisualElementDragControls.prototype.updateAxis = function (axis, point, offset) {\n    var drag = this.props.drag; // If we're not dragging this axis, do an early return.\n\n    if (!shouldDrag(axis, drag, this.currentDirection)) return;\n    return this.getAxisMotionValue(axis) ? this.updateAxisMotionValue(axis, offset) : this.updateVisualElementAxis(axis, point);\n  };\n\n  VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!offset || !axisValue) return;\n    var nextValue = this.originPoint[axis] + offset[axis];\n    var update = this.constraints ? applyConstraints(nextValue, this.constraints[axis], this.elastic[axis]) : nextValue;\n    axisValue.set(update);\n  };\n\n  VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, point) {\n    var _a; // Get the actual layout bounding box of the element\n\n\n    var axisLayout = this.visualElement.getLayoutState().layout[axis]; // Calculate its current length. In the future we might want to lerp this to animate\n    // between lengths if the layout changes as we change the DOM\n\n    var axisLength = axisLayout.max - axisLayout.min; // Get the initial progress that the pointer sat on this axis on gesture start.\n\n    var axisProgress = this.cursorProgress[axis]; // Calculate a new min point based on the latest pointer position, constraints and elastic\n\n    var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], this.elastic[axis]); // Update the axis viewport target with this new min and the length\n\n    this.visualElement.setProjectionTargetAxis(axis, min, min + axisLength);\n  };\n\n  VisualElementDragControls.prototype.setProps = function (_a) {\n    var _b = _a.drag,\n        drag = _b === void 0 ? false : _b,\n        _c = _a.dragDirectionLock,\n        dragDirectionLock = _c === void 0 ? false : _c,\n        _d = _a.dragPropagation,\n        dragPropagation = _d === void 0 ? false : _d,\n        _e = _a.dragConstraints,\n        dragConstraints = _e === void 0 ? false : _e,\n        _f = _a.dragElastic,\n        dragElastic = _f === void 0 ? defaultElastic : _f,\n        _g = _a.dragMomentum,\n        dragMomentum = _g === void 0 ? true : _g,\n        remainingProps = __rest(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n\n    this.props = __assign({\n      drag: drag,\n      dragDirectionLock: dragDirectionLock,\n      dragPropagation: dragPropagation,\n      dragConstraints: dragConstraints,\n      dragElastic: dragElastic,\n      dragMomentum: dragMomentum\n    }, remainingProps);\n  };\n  /**\n   * Drag works differently depending on which props are provided.\n   *\n   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n   * - If the component will perform layout animations, we output the gesture to the component's\n   *      visual bounding box\n   * - Otherwise, we apply the delta to the x/y motion values.\n   */\n\n\n  VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n    var _a = this.props,\n        layout = _a.layout,\n        layoutId = _a.layoutId;\n    var dragKey = \"_drag\" + axis.toUpperCase();\n\n    if (this.props[dragKey]) {\n      return this.props[dragKey];\n    } else if (!layout && layoutId === undefined) {\n      return this.visualElement.getValue(axis, 0);\n    }\n  };\n\n  VisualElementDragControls.prototype.isLayoutDrag = function () {\n    return !this.getAxisMotionValue(\"x\");\n  };\n\n  VisualElementDragControls.prototype.isExternalDrag = function () {\n    var _a = this.props,\n        _dragX = _a._dragX,\n        _dragY = _a._dragY;\n    return _dragX || _dragY;\n  };\n\n  VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n    var _this = this;\n\n    var _a = this.props,\n        drag = _a.drag,\n        dragMomentum = _a.dragMomentum,\n        dragElastic = _a.dragElastic,\n        dragTransition = _a.dragTransition;\n    /**\n     * Everything beyond the drag gesture should be performed with\n     * relative projection so children stay in sync with their parent element.\n     */\n\n    var isRelative = convertToRelativeProjection(this.visualElement, this.isLayoutDrag() && !this.isExternalDrag());\n    /**\n     * If we had previously resolved constraints relative to the viewport,\n     * we need to also convert those to a relative coordinate space for the animation\n     */\n\n    var constraints = this.constraints || {};\n\n    if (isRelative && Object.keys(constraints).length && this.isLayoutDrag()) {\n      var projectionParent = this.visualElement.getProjectionParent();\n\n      if (projectionParent) {\n        var relativeConstraints_1 = calcRelativeOffset(projectionParent.projection.targetFinal, constraints);\n        eachAxis(function (axis) {\n          var _a = relativeConstraints_1[axis],\n              min = _a.min,\n              max = _a.max;\n          constraints[axis] = {\n            min: isNaN(min) ? undefined : min,\n            max: isNaN(max) ? undefined : max\n          };\n        });\n      }\n    }\n\n    var momentumAnimations = eachAxis(function (axis) {\n      var _a;\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) {\n        return;\n      }\n\n      var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n      /**\n       * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n       * of spring animations so we should look into adding a disable spring option to `inertia`.\n       * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n       * using the value of `dragElastic`.\n       */\n\n      var bounceStiffness = dragElastic ? 200 : 1000000;\n      var bounceDamping = dragElastic ? 40 : 10000000;\n\n      var inertia = __assign(__assign({\n        type: \"inertia\",\n        velocity: dragMomentum ? velocity[axis] : 0,\n        bounceStiffness: bounceStiffness,\n        bounceDamping: bounceDamping,\n        timeConstant: 750,\n        restDelta: 1,\n        restSpeed: 10\n      }, dragTransition), transition); // If we're not animating on an externally-provided `MotionValue` we can use the\n      // component's animation controls which will handle interactions with whileHover (etc),\n      // otherwise we just have to animate the `MotionValue` itself.\n\n\n      return _this.getAxisMotionValue(axis) ? _this.startAxisValueAnimation(axis, inertia) : _this.visualElement.startLayoutAnimation(axis, inertia, isRelative);\n    }); // Run all animations and then resolve the new drag constraints.\n\n    return Promise.all(momentumAnimations).then(function () {\n      var _a, _b;\n\n      (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n\n  VisualElementDragControls.prototype.stopMotion = function () {\n    var _this = this;\n\n    eachAxis(function (axis) {\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      axisValue ? axisValue.stop() : _this.visualElement.stopLayoutAnimation();\n    });\n  };\n\n  VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!axisValue) return;\n    var currentValue = axisValue.get();\n    axisValue.set(currentValue);\n    axisValue.set(currentValue); // Set twice to hard-reset velocity\n\n    return startAnimation(axis, axisValue, 0, transition);\n  };\n\n  VisualElementDragControls.prototype.scalePoint = function () {\n    var _this = this;\n\n    var _a = this.props,\n        drag = _a.drag,\n        dragConstraints = _a.dragConstraints;\n    if (!isRefObject(dragConstraints) || !this.constraintsBox) return; // Stop any current animations as there can be some visual glitching if we resize mid animation\n\n    this.stopMotion(); // Record the relative progress of the targetBox relative to the constraintsBox\n\n    var boxProgress = {\n      x: 0,\n      y: 0\n    };\n    eachAxis(function (axis) {\n      boxProgress[axis] = calcOrigin(_this.visualElement.projection.target[axis], _this.constraintsBox[axis]);\n    });\n    /**\n     * For each axis, calculate the current progress of the layout axis within the constraints.\n     * Then, using the latest layout and constraints measurements, reposition the new layout axis\n     * proportionally within the constraints.\n     */\n\n    this.updateConstraints(function () {\n      eachAxis(function (axis) {\n        if (!shouldDrag(axis, drag, null)) return; // Calculate the position of the targetBox relative to the constraintsBox using the\n        // previously calculated progress\n\n        var _a = calcPositionFromProgress(_this.visualElement.projection.target[axis], _this.constraintsBox[axis], boxProgress[axis]),\n            min = _a.min,\n            max = _a.max;\n\n        _this.visualElement.setProjectionTargetAxis(axis, min, max);\n      });\n    });\n    /**\n     * If any other draggable components are queuing the same tasks synchronously\n     * this will wait until they've all been scheduled before flushing.\n     */\n\n    setTimeout(flushLayout, 1);\n  };\n\n  VisualElementDragControls.prototype.updateConstraints = function (onReady) {\n    var _this = this;\n\n    this.cancelLayout = batchLayout(function (read, write) {\n      var ancestors = collectProjectingAncestors(_this.visualElement);\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.resetTransform();\n        });\n      });\n      read(function () {\n        return updateLayoutMeasurement(_this.visualElement);\n      });\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.restoreTransform();\n        });\n      });\n      read(function () {\n        _this.resolveDragConstraints();\n      });\n      if (onReady) write(onReady);\n    });\n  };\n\n  VisualElementDragControls.prototype.mount = function (visualElement) {\n    var _this = this;\n\n    var element = visualElement.getInstance();\n    /**\n     * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n     */\n\n    var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n      var _a = _this.props,\n          drag = _a.drag,\n          _b = _a.dragListener,\n          dragListener = _b === void 0 ? true : _b;\n      drag && dragListener && _this.start(event);\n    });\n    /**\n     * Attach a window resize listener to scale the draggable target within its defined\n     * constraints as the window resizes.\n     */\n\n    var stopResizeListener = addDomEvent(window, \"resize\", function () {\n      _this.scalePoint();\n    });\n    /**\n     * Ensure drag constraints are resolved correctly relative to the dragging element\n     * whenever its layout changes.\n     */\n\n    var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n      if (_this.isDragging) {\n        _this.resolveDragConstraints();\n      }\n    });\n    /**\n     * If the previous component with this same layoutId was dragging at the time\n     * it was unmounted, we want to continue the same gesture on this component.\n     */\n\n    var prevDragCursor = visualElement.prevDragCursor;\n\n    if (prevDragCursor) {\n      this.start(lastPointerEvent, {\n        cursorProgress: prevDragCursor\n      });\n    }\n    /**\n     * Return a function that will teardown the drag gesture\n     */\n\n\n    return function () {\n      stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n      stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n      stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n\n      _this.cancelDrag();\n    };\n  };\n\n  return VisualElementDragControls;\n}();\n\nfunction shouldDrag(direction, drag, currentDirection) {\n  return (drag === true || drag === direction) && (currentDirection === null || currentDirection === direction);\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\n\n\nfunction getCurrentDirection(offset, lockThreshold) {\n  if (lockThreshold === void 0) {\n    lockThreshold = 10;\n  }\n\n  var direction = null;\n\n  if (Math.abs(offset.y) > lockThreshold) {\n    direction = \"y\";\n  } else if (Math.abs(offset.x) > lockThreshold) {\n    direction = \"x\";\n  }\n\n  return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { removeBoxTransforms } from '../../../utils/geometry/delta-apply.js';\n/**\n * Returns a boolean stating whether or not we converted the projection\n * to relative projection.\n */\n\nfunction convertToRelativeProjection(visualElement, isLayoutDrag) {\n  if (isLayoutDrag === void 0) {\n    isLayoutDrag = true;\n  }\n\n  var projectionParent = visualElement.getProjectionParent();\n  if (!projectionParent) return false;\n  var offset;\n\n  if (isLayoutDrag) {\n    offset = calcRelativeOffset(projectionParent.projection.target, visualElement.projection.target);\n    removeBoxTransforms(offset, projectionParent.getLatestValues());\n  } else {\n    offset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  }\n\n  eachAxis(function (axis) {\n    return visualElement.setProjectionTargetAxis(axis, offset[axis].min, offset[axis].max, true);\n  });\n  return true;\n}\n\nexport { convertToRelativeProjection };","import { useDrag } from '../../gestures/drag/use-drag.js';\nimport { usePanGesture } from '../../gestures/use-pan-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar drag = {\n  pan: makeRenderlessComponent(usePanGesture),\n  drag: makeRenderlessComponent(useDrag)\n};\nexport { drag };","/**\n * @public\n */\nvar Presence;\n\n(function (Presence) {\n  Presence[Presence[\"Entering\"] = 0] = \"Entering\";\n  Presence[Presence[\"Present\"] = 1] = \"Present\";\n  Presence[Presence[\"Exiting\"] = 2] = \"Exiting\";\n})(Presence || (Presence = {}));\n/**\n * @public\n */\n\n\nvar VisibilityAction;\n\n(function (VisibilityAction) {\n  VisibilityAction[VisibilityAction[\"Hide\"] = 0] = \"Hide\";\n  VisibilityAction[VisibilityAction[\"Show\"] = 1] = \"Show\";\n})(VisibilityAction || (VisibilityAction = {}));\n\nexport { Presence, VisibilityAction };","import { useRef, useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { PanSession } from './PanSession.js';\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\n\nfunction usePanGesture(_a) {\n  var onPan = _a.onPan,\n      onPanStart = _a.onPanStart,\n      onPanEnd = _a.onPanEnd,\n      onPanSessionStart = _a.onPanSessionStart,\n      visualElement = _a.visualElement;\n  var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n  var panSession = useRef(null);\n  var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n  var handlers = {\n    onSessionStart: onPanSessionStart,\n    onStart: onPanStart,\n    onMove: onPan,\n    onEnd: function onEnd(event, info) {\n      panSession.current = null;\n      onPanEnd && onPanEnd(event, info);\n    }\n  };\n  useEffect(function () {\n    if (panSession.current !== null) {\n      panSession.current.updateHandlers(handlers);\n    }\n  });\n\n  function onPointerDown(event) {\n    panSession.current = new PanSession(event, handlers, {\n      transformPagePoint: transformPagePoint\n    });\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n  useUnmountEffect(function () {\n    return panSession.current && panSession.current.end();\n  });\n}\n\nexport { usePanGesture };","import { __assign } from 'tslib';\nimport { useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { VisualElementDragControls } from './VisualElementDragControls.js';\nimport { useConstant } from '../../utils/use-constant.js';\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\n\nfunction useDrag(props) {\n  var groupDragControls = props.dragControls,\n      visualElement = props.visualElement;\n  var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n  var dragControls = useConstant(function () {\n    return new VisualElementDragControls({\n      visualElement: visualElement\n    });\n  });\n  dragControls.setProps(__assign(__assign({}, props), {\n    transformPagePoint: transformPagePoint\n  })); // If we've been provided a DragControls for manual control over the drag gesture,\n  // subscribe this component to it on mount.\n\n  useEffect(function () {\n    return groupDragControls && groupDragControls.subscribe(dragControls);\n  }, [dragControls]); // Mount the drag controls with the visualElement\n\n  useEffect(function () {\n    return dragControls.mount(visualElement);\n  }, []);\n}\n\nexport { useDrag };","import { __rest, __assign, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\n\nfunction isCSSVariable(value) {\n  return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\n\n\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\nfunction parseCSSVariable(current) {\n  var match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n\n  var _a = __read(match, 3),\n      token = _a[1],\n      fallback = _a[2];\n\n  return [token, fallback];\n}\n\nvar maxDepth = 4;\n\nfunction getVariableValue(current, element, depth) {\n  if (depth === void 0) {\n    depth = 1;\n  }\n\n  invariant(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\" + current + \"\\\". This may indicate a circular fallback dependency.\");\n\n  var _a = __read(parseCSSVariable(current), 2),\n      token = _a[0],\n      fallback = _a[1]; // No CSS variable detected\n\n\n  if (!token) return; // Attempt to read this CSS variable off the element\n\n  var resolved = window.getComputedStyle(element).getPropertyValue(token);\n\n  if (resolved) {\n    return resolved.trim();\n  } else if (isCSSVariable(fallback)) {\n    // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n    return getVariableValue(fallback, element, depth + 1);\n  } else {\n    return fallback;\n  }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\n\n\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n  var _b;\n\n  var target = __rest(_a, []);\n\n  var element = visualElement.getInstance();\n  if (!(element instanceof HTMLElement)) return {\n    target: target,\n    transitionEnd: transitionEnd\n  }; // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n  // only if they change but I think this reads clearer and this isn't a performance-critical path.\n\n  if (transitionEnd) {\n    transitionEnd = __assign({}, transitionEnd);\n  } // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n\n\n  visualElement.forEachValue(function (value) {\n    var current = value.get();\n    if (!isCSSVariable(current)) return;\n    var resolved = getVariableValue(current, element);\n    if (resolved) value.set(resolved);\n  }); // Cycle through every target property and resolve CSS variables. Currently\n  // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n\n  for (var key in target) {\n    var current = target[key];\n    if (!isCSSVariable(current)) continue;\n    var resolved = getVariableValue(current, element);\n    if (!resolved) continue; // Clone target if it hasn't already been\n\n    target[key] = resolved; // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n    // CSS variable. This will ensure that after the animation the component will reflect\n    // changes in the value of the CSS variable.\n\n    if (transitionEnd) (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : transitionEnd[key] = current;\n  }\n\n  return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\nexport { cssVariableRegex, parseCSSVariable, resolveCSSVariables };","import { __assign } from 'tslib';\nimport { complex, px } from 'style-value-types';\nimport { mix } from 'popmotion';\nimport { cssVariableRegex } from '../utils/css-variables-conversion.js';\n\nfunction pixelsToPercent(pixels, axis) {\n  return pixels / (axis.max - axis.min) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\n\n\nfunction correctBorderRadius(latest, _layoutState, _a) {\n  var target = _a.target;\n  /**\n   * If latest is a string, if it's a percentage we can return immediately as it's\n   * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n   */\n\n  if (typeof latest === \"string\") {\n    if (px.test(latest)) {\n      latest = parseFloat(latest);\n    } else {\n      return latest;\n    }\n  }\n  /**\n   * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n   * pixel value as a percentage of each axis\n   */\n\n\n  var x = pixelsToPercent(latest, target.x);\n  var y = pixelsToPercent(latest, target.y);\n  return x + \"% \" + y + \"%\";\n}\n\nvar varToken = \"_$css\";\n\nfunction correctBoxShadow(latest, _a) {\n  var delta = _a.delta,\n      treeScale = _a.treeScale;\n  var original = latest;\n  /**\n   * We need to first strip and store CSS variables from the string.\n   */\n\n  var containsCSSVariables = latest.includes(\"var(\");\n  var cssVariables = [];\n\n  if (containsCSSVariables) {\n    latest = latest.replace(cssVariableRegex, function (match) {\n      cssVariables.push(match);\n      return varToken;\n    });\n  }\n\n  var shadow = complex.parse(latest); // TODO: Doesn't support multiple shadows\n\n  if (shadow.length > 5) return original;\n  var template = complex.createTransformer(latest);\n  var offset = typeof shadow[0] !== \"number\" ? 1 : 0; // Calculate the overall context scale\n\n  var xScale = delta.x.scale * treeScale.x;\n  var yScale = delta.y.scale * treeScale.y;\n  shadow[0 + offset] /= xScale;\n  shadow[1 + offset] /= yScale;\n  /**\n   * Ideally we'd correct x and y scales individually, but because blur and\n   * spread apply to both we have to take a scale average and apply that instead.\n   * We could potentially improve the outcome of this by incorporating the ratio between\n   * the two scales.\n   */\n\n  var averageScale = mix(xScale, yScale, 0.5); // Blur\n\n  if (typeof shadow[2 + offset] === \"number\") shadow[2 + offset] /= averageScale; // Spread\n\n  if (typeof shadow[3 + offset] === \"number\") shadow[3 + offset] /= averageScale;\n  var output = template(shadow);\n\n  if (containsCSSVariables) {\n    var i_1 = 0;\n    output = output.replace(varToken, function () {\n      var cssVariable = cssVariables[i_1];\n      i_1++;\n      return cssVariable;\n    });\n  }\n\n  return output;\n}\n\nvar borderCorrectionDefinition = {\n  process: correctBorderRadius\n};\nvar defaultScaleCorrectors = {\n  borderRadius: __assign(__assign({}, borderCorrectionDefinition), {\n    applyTo: [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomLeftRadius\", \"borderBottomRightRadius\"]\n  }),\n  borderTopLeftRadius: borderCorrectionDefinition,\n  borderTopRightRadius: borderCorrectionDefinition,\n  borderBottomLeftRadius: borderCorrectionDefinition,\n  borderBottomRightRadius: borderCorrectionDefinition,\n  boxShadow: {\n    process: correctBoxShadow\n  }\n};\nexport { correctBorderRadius, correctBoxShadow, defaultScaleCorrectors, pixelsToPercent };","import { __extends, __rest, __assign, __read } from 'tslib';\nimport * as React from 'react';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { startAnimation, getValueTransition } from '../../../animation/utils/transitions.js';\nimport { checkIfParentHasChanged, calcRelativeOffset, tweenAxis } from './utils.js';\nimport { VisibilityAction } from '../../../components/AnimateSharedLayout/types.js';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.js';\nimport { axisBox } from '../../../utils/geometry/index.js';\nimport { addScaleCorrection } from '../../../render/dom/projection/scale-correction.js';\nimport { defaultScaleCorrectors } from '../../../render/dom/projection/default-scale-correctors.js';\nvar progressTarget = 1000;\n\nvar Animate =\n/** @class */\nfunction (_super) {\n  __extends(Animate, _super);\n\n  function Animate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * A mutable object that tracks the target viewport box\n     * for the current animation frame.\n     */\n\n\n    _this.frameTarget = axisBox();\n    /**\n     * The current animation target, we use this to check whether to start\n     * a new animation or continue the existing one.\n     */\n\n    _this.currentAnimationTarget = axisBox();\n    /**\n     * Track whether we're animating this axis.\n     */\n\n    _this.isAnimating = {\n      x: false,\n      y: false\n    };\n    _this.stopAxisAnimation = {\n      x: undefined,\n      y: undefined\n    };\n    _this.isAnimatingTree = false;\n\n    _this.animate = function (target, origin, _a) {\n      if (_a === void 0) {\n        _a = {};\n      }\n\n      var originBox = _a.originBox,\n          targetBox = _a.targetBox,\n          visibilityAction = _a.visibilityAction,\n          shouldStackAnimate = _a.shouldStackAnimate,\n          onComplete = _a.onComplete,\n          prevParent = _a.prevParent,\n          config = __rest(_a, [\"originBox\", \"targetBox\", \"visibilityAction\", \"shouldStackAnimate\", \"onComplete\", \"prevParent\"]);\n\n      var _b = _this.props,\n          visualElement = _b.visualElement,\n          layout = _b.layout;\n      /**\n       * Early return if we've been instructed not to animate this render.\n       */\n\n      if (shouldStackAnimate === false) {\n        _this.isAnimatingTree = false;\n        return _this.safeToRemove();\n      }\n      /**\n       * Prioritise tree animations\n       */\n\n\n      if (_this.isAnimatingTree && shouldStackAnimate !== true) {\n        return;\n      } else if (shouldStackAnimate) {\n        _this.isAnimatingTree = true;\n      }\n      /**\n       * Allow the measured origin (prev bounding box) and target (actual layout) to be\n       * overridden by the provided config.\n       */\n\n\n      origin = originBox || origin;\n      target = targetBox || target;\n      /**\n       * If this element has a projecting parent, there's an opportunity to animate\n       * it relatively to that parent rather than relatively to the viewport. This\n       * allows us to add orchestrated animations.\n       */\n\n      var isRelative = false;\n      var projectionParent = visualElement.getProjectionParent();\n\n      if (projectionParent) {\n        var prevParentViewportBox = projectionParent.prevViewportBox;\n        var parentLayout = projectionParent.getLayoutState().layout;\n        /**\n         * If we're being provided a previous parent VisualElement by AnimateSharedLayout\n         */\n\n        if (prevParent) {\n          /**\n           * If we've been provided an explicit target box it means we're animating back\n           * to this previous parent. So we can make a relative box by comparing to the previous\n           * parent's layout\n           */\n          if (targetBox) {\n            parentLayout = prevParent.getLayoutState().layout;\n          }\n          /**\n           * Likewise if we've been provided an explicit origin box it means we're\n           * animating out from a different element. So we should figure out where that was\n           * on screen relative to the new parent element.\n           */\n\n\n          if (originBox && !checkIfParentHasChanged(prevParent, projectionParent) && prevParent.prevViewportBox) {\n            prevParentViewportBox = prevParent.prevViewportBox;\n          }\n        }\n\n        if (prevParentViewportBox && isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox)) {\n          isRelative = true;\n          origin = calcRelativeOffset(prevParentViewportBox, origin);\n          target = calcRelativeOffset(parentLayout, target);\n        }\n      }\n\n      var boxHasMoved = hasMoved(origin, target);\n      var animations = eachAxis(function (axis) {\n        var _a, _b;\n        /**\n         * If layout is set to \"position\", we can resize the origin box based on the target\n         * box and only animate its position.\n         */\n\n\n        if (layout === \"position\") {\n          var targetLength = target[axis].max - target[axis].min;\n          origin[axis].max = origin[axis].min + targetLength;\n        }\n\n        if (visualElement.projection.isTargetLocked) {\n          return;\n        } else if (visibilityAction !== undefined) {\n          visualElement.setVisibility(visibilityAction === VisibilityAction.Show);\n        } else if (boxHasMoved) {\n          // If the box has moved, animate between it's current visual state and its\n          // final state\n          return _this.animateAxis(axis, target[axis], origin[axis], __assign(__assign({}, config), {\n            isRelative: isRelative\n          }));\n        } else {\n          (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a); // If the box has remained in the same place, immediately set the axis target\n          // to the final desired state\n\n          return visualElement.setProjectionTargetAxis(axis, target[axis].min, target[axis].max, isRelative);\n        }\n      }); // Force a render to ensure there's no flash of uncorrected bounding box.\n\n      visualElement.syncRender();\n      /**\n       * If this visualElement isn't present (ie it's been removed from the tree by the user but\n       * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations\n       * have successfully finished.\n       */\n\n      return Promise.all(animations).then(function () {\n        _this.isAnimatingTree = false;\n        onComplete && onComplete();\n        visualElement.notifyLayoutAnimationComplete();\n      });\n    };\n\n    return _this;\n  }\n\n  Animate.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var visualElement = this.props.visualElement;\n    visualElement.animateMotionValue = startAnimation;\n    visualElement.enableLayoutProjection();\n    this.unsubLayoutReady = visualElement.onLayoutUpdate(this.animate);\n\n    visualElement.layoutSafeToRemove = function () {\n      return _this.safeToRemove();\n    };\n\n    addScaleCorrection(defaultScaleCorrectors);\n  };\n\n  Animate.prototype.componentWillUnmount = function () {\n    var _this = this;\n\n    this.unsubLayoutReady();\n    eachAxis(function (axis) {\n      var _a, _b;\n\n      return (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n  /**\n   * TODO: This manually performs animations on the visualElement's layout progress\n   * values. It'd be preferable to amend the startLayoutAxisAnimation\n   * API to accept more custom animations like this.\n   */\n\n\n  Animate.prototype.animateAxis = function (axis, target, origin, _a) {\n    var _this = this;\n\n    var _b, _c;\n\n    var _d = _a === void 0 ? {} : _a,\n        transition = _d.transition,\n        isRelative = _d.isRelative;\n    /**\n     * If we're not animating to a new target, don't run this animation\n     */\n\n\n    if (this.isAnimating[axis] && axisIsEqual(target, this.currentAnimationTarget[axis])) {\n      return;\n    }\n\n    (_c = (_b = this.stopAxisAnimation)[axis]) === null || _c === void 0 ? void 0 : _c.call(_b);\n    this.isAnimating[axis] = true;\n    var visualElement = this.props.visualElement;\n    var frameTarget = this.frameTarget[axis];\n    var layoutProgress = visualElement.getProjectionAnimationProgress()[axis];\n    /**\n     * Set layout progress back to 0. We set it twice to hard-reset any velocity that might\n     * be re-incoporated into a subsequent spring animation.\n     */\n\n    layoutProgress.clearListeners();\n    layoutProgress.set(0);\n    layoutProgress.set(0);\n    /**\n     * Create an animation function to run once per frame. This will tween the visual bounding box from\n     * origin to target using the latest progress value.\n     */\n\n    var frame = function frame() {\n      // Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress\n      var p = layoutProgress.get() / progressTarget; // Tween the axis and update the visualElement with the latest values\n\n      tweenAxis(frameTarget, origin, target, p);\n      visualElement.setProjectionTargetAxis(axis, frameTarget.min, frameTarget.max, isRelative);\n    }; // Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.\n\n\n    frame(); // Create a function to stop animation on this specific axis\n\n    var unsubscribeProgress = layoutProgress.onChange(frame);\n\n    this.stopAxisAnimation[axis] = function () {\n      _this.isAnimating[axis] = false;\n      layoutProgress.stop();\n      unsubscribeProgress();\n    };\n\n    this.currentAnimationTarget[axis] = target;\n    var layoutTransition = transition || visualElement.getDefaultTransition() || defaultLayoutTransition; // Start the animation on this axis\n\n    var animation = startAnimation(axis === \"x\" ? \"layoutX\" : \"layoutY\", layoutProgress, progressTarget, layoutTransition && getValueTransition(layoutTransition, \"layout\")).then(this.stopAxisAnimation[axis]);\n    return animation;\n  };\n\n  Animate.prototype.safeToRemove = function () {\n    var _a, _b;\n\n    (_b = (_a = this.props).safeToRemove) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n\n  Animate.prototype.render = function () {\n    return null;\n  };\n\n  return Animate;\n}(React.Component);\n\nfunction AnimateLayoutContextProvider(props) {\n  var _a = __read(usePresence(), 2),\n      safeToRemove = _a[1];\n\n  return React.createElement(Animate, __assign({}, props, {\n    safeToRemove: safeToRemove\n  }));\n}\n\nfunction hasMoved(a, b) {\n  return !isZeroBox(a) && !isZeroBox(b) && (!axisIsEqual(a.x, b.x) || !axisIsEqual(a.y, b.y));\n}\n\nvar zeroAxis = {\n  min: 0,\n  max: 0\n};\n\nfunction isZeroBox(a) {\n  return axisIsEqual(a.x, zeroAxis) && axisIsEqual(a.y, zeroAxis);\n}\n\nfunction axisIsEqual(a, b) {\n  return a.min === b.min && a.max === b.max;\n}\n\nvar defaultLayoutTransition = {\n  duration: 0.45,\n  ease: [0.4, 0, 0.1, 1]\n};\n\nfunction isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox) {\n  return prevParent || !prevParent && !(originBox || targetBox);\n}\n\nexport { AnimateLayoutContextProvider };","import { __spreadArray, __read } from 'tslib';\nimport sync, { flushSync } from 'framesync';\nimport { collectProjectingAncestors, updateLayoutMeasurement } from '../../../render/dom/projection/utils.js';\nimport { batchLayout, flushLayout } from '../../../render/dom/utils/batch-layout.js';\nimport { compareByDepth } from '../../../render/utils/compare-by-depth.js';\nimport { Presence } from '../types.js';\n/**\n * Default handlers for batching VisualElements\n */\n\nvar defaultHandler = {\n  layoutReady: function layoutReady(child) {\n    return child.notifyLayoutReady();\n  }\n};\n/**\n * Create a batcher to process VisualElements\n */\n\nfunction createBatcher() {\n  var queue = new Set();\n  return {\n    add: function add(child) {\n      return queue.add(child);\n    },\n    flush: function flush(_a) {\n      var _b = _a === void 0 ? defaultHandler : _a,\n          layoutReady = _b.layoutReady,\n          parent = _b.parent;\n\n      batchLayout(function (read, write) {\n        var order = Array.from(queue).sort(compareByDepth);\n        var ancestors = parent ? collectProjectingAncestors(parent) : [];\n        write(function () {\n          var allElements = __spreadArray(__spreadArray([], __read(ancestors)), __read(order));\n\n          allElements.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          order.forEach(updateLayoutMeasurement);\n        });\n        write(function () {\n          ancestors.forEach(function (element) {\n            return element.restoreTransform();\n          });\n          order.forEach(layoutReady);\n        });\n        read(function () {\n          /**\n           * After all children have started animating, ensure any Entering components are set to Present.\n           * If we add deferred animations (set up all animations and then start them in two loops) this\n           * could be moved to the start loop. But it needs to happen after all the animations configs\n           * are generated in AnimateSharedLayout as this relies on presence data\n           */\n          order.forEach(function (child) {\n            if (child.isPresent) child.presence = Presence.Present;\n          });\n        });\n        write(function () {\n          /**\n           * Starting these animations will have queued jobs on the frame loop. In some situations,\n           * like when removing an element, these will be processed too late after the DOM is manipulated,\n           * leaving a flash of incorrectly-projected content. By manually flushing these jobs\n           * we ensure there's no flash.\n           */\n          flushSync.preRender();\n          flushSync.render();\n        });\n        read(function () {\n          /**\n           * Schedule a callback at the end of the following frame to assign the latest projection\n           * box to the prevViewportBox snapshot. Once global batching is in place this could be run\n           * synchronously. But for now it ensures that if any nested `AnimateSharedLayout` top-level\n           * child attempts to calculate its previous relative position against a prevViewportBox\n           * it will be against its latest projection box instead, as the snapshot is useless beyond this\n           * render.\n           */\n          sync.postRender(function () {\n            return order.forEach(assignProjectionToSnapshot);\n          });\n          queue.clear();\n        });\n      }); // TODO: Need to find a layout-synchronous way of flushing this\n\n      flushLayout();\n    }\n  };\n}\n\nfunction assignProjectionToSnapshot(child) {\n  child.prevViewportBox = child.projection.target;\n}\n\nexport { createBatcher };","import { createContext } from 'react';\nimport { createBatcher } from '../components/AnimateSharedLayout/utils/batcher.js';\nvar SharedLayoutContext = createContext(createBatcher());\n/**\n * @internal\n */\n\nvar FramerTreeLayoutContext = createContext(createBatcher());\n\nfunction isSharedLayout(context) {\n  return !!context.forceUpdate;\n}\n\nexport { FramerTreeLayoutContext, SharedLayoutContext, isSharedLayout };","import { __extends, __assign } from 'tslib';\nimport React__default, { useContext } from 'react';\nimport { isSharedLayout, SharedLayoutContext, FramerTreeLayoutContext } from '../../../context/SharedLayoutContext.js';\nimport { snapshotViewportBox } from '../../../render/dom/projection/utils.js';\n/**\n * This component is responsible for scheduling the measuring of the motion component\n */\n\nvar Measure =\n/** @class */\nfunction (_super) {\n  __extends(Measure, _super);\n\n  function Measure() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * If this is a child of a SyncContext, register the VisualElement with it on mount.\n   */\n\n\n  Measure.prototype.componentDidMount = function () {\n    var _a = this.props,\n        syncLayout = _a.syncLayout,\n        framerSyncLayout = _a.framerSyncLayout,\n        visualElement = _a.visualElement;\n    isSharedLayout(syncLayout) && syncLayout.register(visualElement);\n    isSharedLayout(framerSyncLayout) && framerSyncLayout.register(visualElement);\n    visualElement.onUnmount(function () {\n      if (isSharedLayout(syncLayout)) {\n        syncLayout.remove(visualElement);\n      }\n\n      if (isSharedLayout(framerSyncLayout)) {\n        framerSyncLayout.remove(visualElement);\n      }\n    });\n  };\n  /**\n   * If this is a child of a SyncContext, notify it that it needs to re-render. It will then\n   * handle the snapshotting.\n   *\n   * If it is stand-alone component, add it to the batcher.\n   */\n\n\n  Measure.prototype.getSnapshotBeforeUpdate = function () {\n    var _a = this.props,\n        syncLayout = _a.syncLayout,\n        visualElement = _a.visualElement;\n\n    if (isSharedLayout(syncLayout)) {\n      syncLayout.syncUpdate();\n    } else {\n      snapshotViewportBox(visualElement);\n      syncLayout.add(visualElement);\n    }\n\n    return null;\n  };\n\n  Measure.prototype.componentDidUpdate = function () {\n    var syncLayout = this.props.syncLayout;\n    if (!isSharedLayout(syncLayout)) syncLayout.flush();\n  };\n\n  Measure.prototype.render = function () {\n    return null;\n  };\n\n  return Measure;\n}(React__default.Component);\n\nfunction MeasureContextProvider(props) {\n  var syncLayout = useContext(SharedLayoutContext);\n  var framerSyncLayout = useContext(FramerTreeLayoutContext);\n  return React__default.createElement(Measure, __assign({}, props, {\n    syncLayout: syncLayout,\n    framerSyncLayout: framerSyncLayout\n  }));\n}\n\nexport { MeasureContextProvider };","import { AnimateLayoutContextProvider } from './Animate.js';\nimport { MeasureContextProvider } from './Measure.js';\nvar layoutAnimations = {\n  measureLayout: MeasureContextProvider,\n  layoutAnimation: AnimateLayoutContextProvider\n};\nexport { layoutAnimations };","import { axisBox, delta } from '../../utils/geometry/index.js';\n\nvar createProjectionState = function createProjectionState() {\n  return {\n    isEnabled: false,\n    isHydrated: false,\n    isTargetLocked: false,\n    target: axisBox(),\n    targetFinal: axisBox()\n  };\n};\n\nfunction createLayoutState() {\n  return {\n    isHydrated: false,\n    layout: axisBox(),\n    layoutCorrected: axisBox(),\n    treeScale: {\n      x: 1,\n      y: 1\n    },\n    delta: delta(),\n    deltaFinal: delta(),\n    deltaTransform: \"\"\n  };\n}\n\nvar zeroLayout = createLayoutState();\nexport { createLayoutState, createProjectionState, zeroLayout };","import { zeroLayout } from '../../utils/state.js';\n/**\n * Build a transform style that takes a calculated delta between the element's current\n * space on screen and projects it into the desired space.\n */\n\nfunction buildLayoutProjectionTransform(_a, treeScale, latestTransform) {\n  var x = _a.x,\n      y = _a.y;\n  /**\n   * The translations we use to calculate are always relative to the viewport coordinate space.\n   * But when we apply scales, we also scale the coordinate space of an element and its children.\n   * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n   * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n   */\n\n  var xTranslate = x.translate / treeScale.x;\n  var yTranslate = y.translate / treeScale.y;\n  var transform = \"translate3d(\" + xTranslate + \"px, \" + yTranslate + \"px, 0) \";\n\n  if (latestTransform) {\n    var rotate = latestTransform.rotate,\n        rotateX = latestTransform.rotateX,\n        rotateY = latestTransform.rotateY;\n    if (rotate) transform += \"rotate(\" + rotate + \") \";\n    if (rotateX) transform += \"rotateX(\" + rotateX + \") \";\n    if (rotateY) transform += \"rotateY(\" + rotateY + \") \";\n  }\n\n  transform += \"scale(\" + x.scale + \", \" + y.scale + \")\";\n  return !latestTransform && transform === identityProjection ? \"\" : transform;\n}\n/**\n * Take the calculated delta origin and apply it as a transform string.\n */\n\n\nfunction buildLayoutProjectionTransformOrigin(_a) {\n  var deltaFinal = _a.deltaFinal;\n  return deltaFinal.x.origin * 100 + \"% \" + deltaFinal.y.origin * 100 + \"% 0\";\n}\n\nvar identityProjection = buildLayoutProjectionTransform(zeroLayout.delta, zeroLayout.treeScale, {\n  x: 1,\n  y: 1\n});\nexport { buildLayoutProjectionTransform, buildLayoutProjectionTransformOrigin, identityProjection };","import { __spreadArray, __read } from 'tslib';\nimport { SubscriptionManager } from '../../utils/subscription-manager.js';\nvar names = [\"LayoutMeasure\", \"BeforeLayoutMeasure\", \"LayoutUpdate\", \"ViewportBoxUpdate\", \"Update\", \"Render\", \"AnimationComplete\", \"LayoutAnimationComplete\", \"AnimationStart\", \"SetAxisTarget\", \"Unmount\"];\n\nfunction createLifecycles() {\n  var managers = names.map(function () {\n    return new SubscriptionManager();\n  });\n  var propSubscriptions = {};\n  var lifecycles = {\n    clearAllListeners: function clearAllListeners() {\n      return managers.forEach(function (manager) {\n        return manager.clear();\n      });\n    },\n    updatePropListeners: function updatePropListeners(props) {\n      return names.forEach(function (name) {\n        var _a;\n\n        (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n        var on = \"on\" + name;\n        var propListener = props[on];\n\n        if (propListener) {\n          propSubscriptions[name] = lifecycles[on](propListener);\n        }\n      });\n    }\n  };\n  managers.forEach(function (manager, i) {\n    lifecycles[\"on\" + names[i]] = function (handler) {\n      return manager.add(handler);\n    };\n\n    lifecycles[\"notify\" + names[i]] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return manager.notify.apply(manager, __spreadArray([], __read(args)));\n    };\n  });\n  return lifecycles;\n}\n\nexport { createLifecycles };","import { resetBox, applyTreeDeltas } from '../../utils/geometry/delta-apply.js';\nimport { updateBoxDelta } from '../../utils/geometry/delta-calc.js';\n\nfunction updateLayoutDeltas(_a, _b, treePath, transformOrigin) {\n  var delta = _a.delta,\n      layout = _a.layout,\n      layoutCorrected = _a.layoutCorrected,\n      treeScale = _a.treeScale;\n  var target = _b.target;\n  /**\n   * Reset the corrected box with the latest values from box, as we're then going\n   * to perform mutative operations on it.\n   */\n\n  resetBox(layoutCorrected, layout);\n  /**\n   * Apply all the parent deltas to this box to produce the corrected box. This\n   * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n   */\n\n  applyTreeDeltas(layoutCorrected, treeScale, treePath);\n  /**\n   * Update the delta between the corrected box and the target box before user-set transforms were applied.\n   * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n   * for our layout reprojection, but still allow them to be scaled correctly by the user.\n   * It might be that to simplify this we may want to accept that user-set scale is also corrected\n   * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n   * to allow people to choose whether these styles are corrected based on just the\n   * layout reprojection or the final bounding box.\n   */\n\n  updateBoxDelta(delta, layoutCorrected, target, transformOrigin);\n}\n\nexport { updateLayoutDeltas };","import { addUniqueItem, removeItem } from '../../utils/array.js';\nimport { compareByDepth } from './compare-by-depth.js';\n\nvar FlatTree =\n/** @class */\nfunction () {\n  function FlatTree() {\n    this.children = [];\n    this.isDirty = false;\n  }\n\n  FlatTree.prototype.add = function (child) {\n    addUniqueItem(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.remove = function (child) {\n    removeItem(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.forEach = function (callback) {\n    this.isDirty && this.children.sort(compareByDepth);\n    this.isDirty = false;\n    this.children.forEach(callback);\n  };\n\n  return FlatTree;\n}();\n\nexport { FlatTree };","import { __assign, __spreadArray, __read } from 'tslib';\nimport sync, { cancelSync } from 'framesync';\nimport { pipe } from 'popmotion';\nimport { Presence } from '../components/AnimateSharedLayout/types.js';\nimport { eachAxis } from '../utils/each-axis.js';\nimport { axisBox } from '../utils/geometry/index.js';\nimport { removeBoxTransforms, applyBoxTransforms } from '../utils/geometry/delta-apply.js';\nimport { calcRelativeBox, updateBoxDelta } from '../utils/geometry/delta-calc.js';\nimport { motionValue } from '../value/index.js';\nimport { isMotionValue } from '../value/utils/is-motion-value.js';\nimport { buildLayoutProjectionTransform } from './html/utils/build-projection-transform.js';\nimport { variantPriorityOrder } from './utils/animation-state.js';\nimport { createLifecycles } from './utils/lifecycles.js';\nimport { updateMotionValuesFromProps } from './utils/motion-values.js';\nimport { updateLayoutDeltas } from './utils/projection.js';\nimport { createLayoutState, createProjectionState } from './utils/state.js';\nimport { FlatTree } from './utils/flat-tree.js';\nimport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel } from './utils/variants.js';\nimport { setCurrentViewportBox } from './dom/projection/relative-set.js';\nimport { isDraggable } from './utils/is-draggable.js';\n\nvar visualElement = function visualElement(_a) {\n  var _b = _a.treeType,\n      treeType = _b === void 0 ? \"\" : _b,\n      build = _a.build,\n      _getBaseTarget = _a.getBaseTarget,\n      _makeTargetAnimatable = _a.makeTargetAnimatable,\n      _measureViewportBox = _a.measureViewportBox,\n      renderInstance = _a.render,\n      readValueFromInstance = _a.readValueFromInstance,\n      _resetTransform = _a.resetTransform,\n      _restoreTransform = _a.restoreTransform,\n      removeValueFromRenderState = _a.removeValueFromRenderState,\n      _sortNodePosition = _a.sortNodePosition,\n      scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n  return function (_a, options) {\n    var parent = _a.parent,\n        props = _a.props,\n        presenceId = _a.presenceId,\n        blockInitialAnimation = _a.blockInitialAnimation,\n        visualState = _a.visualState;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var latestValues = visualState.latestValues,\n        renderState = visualState.renderState;\n    /**\n     * The instance of the render-specific node that will be hydrated by the\n     * exposed React ref. So for example, this visual element can host a\n     * HTMLElement, plain object, or Three.js object. The functions provided\n     * in VisualElementConfig allow us to interface with this instance.\n     */\n\n    var instance;\n    /**\n     * Manages the subscriptions for a visual element's lifecycle, for instance\n     * onRender and onViewportBoxUpdate.\n     */\n\n    var lifecycles = createLifecycles();\n    /**\n     *\n     */\n\n    var projection = createProjectionState();\n    /**\n     * A reference to the nearest projecting parent. This is either\n     * undefined if we haven't looked for the nearest projecting parent,\n     * false if there is no parent performing layout projection, or a reference\n     * to the projecting parent.\n     */\n\n    var projectionParent;\n    /**\n     * This is a reference to the visual state of the \"lead\" visual element.\n     * Usually, this will be this visual element. But if it shares a layoutId\n     * with other visual elements, only one of them will be designated lead by\n     * AnimateSharedLayout. All the other visual elements will take on the visual\n     * appearance of the lead while they crossfade to it.\n     */\n\n    var leadProjection = projection;\n    var leadLatestValues = latestValues;\n    var unsubscribeFromLeadVisualElement;\n    /**\n     * The latest layout measurements and calculated projections. This\n     * is seperate from the target projection data in visualState as\n     * many visual elements might point to the same piece of visualState as\n     * a target, whereas they might each have different layouts and thus\n     * projection calculations needed to project into the same viewport box.\n     */\n\n    var layoutState = createLayoutState();\n    /**\n     *\n     */\n\n    var crossfader;\n    /**\n     * Keep track of whether the viewport box has been updated since the\n     * last time the layout projection was re-calculated.\n     */\n\n    var hasViewportBoxUpdated = false;\n    /**\n     * A map of all motion values attached to this visual element. Motion\n     * values are source of truth for any given animated value. A motion\n     * value might be provided externally by the component via props.\n     */\n\n    var values = new Map();\n    /**\n     * A map of every subscription that binds the provided or generated\n     * motion values onChange listeners to this visual element.\n     */\n\n    var valueSubscriptions = new Map();\n    /**\n     * A reference to the previously-provided motion values as returned\n     * from scrapeMotionValuesFromProps. We use the keys in here to determine\n     * if any motion values need to be removed after props are updated.\n     */\n\n    var prevMotionValues = {};\n    /**\n     * x/y motion values that track the progress of initiated layout\n     * animations.\n     *\n     * TODO: Target for removal\n     */\n\n    var projectionTargetProgress;\n    /**\n     * When values are removed from all animation props we need to search\n     * for a fallback value to animate to. These values are tracked in baseTarget.\n     */\n\n    var baseTarget = __assign({}, latestValues); // Internal methods ========================\n\n    /**\n     * On mount, this will be hydrated with a callback to disconnect\n     * this visual element from its parent on unmount.\n     */\n\n\n    var removeFromVariantTree;\n    /**\n     *\n     */\n\n    function render() {\n      if (!instance) return;\n\n      if (element.isProjectionReady()) {\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n        applyBoxTransforms(leadProjection.targetFinal, leadProjection.target, leadLatestValues);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n\n        updateBoxDelta(layoutState.deltaFinal, layoutState.layoutCorrected, leadProjection.targetFinal, latestValues);\n      }\n\n      triggerBuild();\n      renderInstance(instance, renderState);\n    }\n\n    function triggerBuild() {\n      var valuesToRender = latestValues;\n\n      if (crossfader && crossfader.isActive()) {\n        var crossfadedValues = crossfader.getCrossfadeState(element);\n        if (crossfadedValues) valuesToRender = crossfadedValues;\n      }\n\n      build(element, renderState, valuesToRender, leadProjection, layoutState, options, props);\n    }\n\n    function update() {\n      lifecycles.notifyUpdate(latestValues);\n    }\n\n    function updateLayoutProjection() {\n      if (!element.isProjectionReady()) return;\n      var delta = layoutState.delta,\n          treeScale = layoutState.treeScale;\n      var prevTreeScaleX = treeScale.x;\n      var prevTreeScaleY = treeScale.y;\n      var prevDeltaTransform = layoutState.deltaTransform;\n      updateLayoutDeltas(layoutState, leadProjection, element.path, latestValues);\n      hasViewportBoxUpdated && element.notifyViewportBoxUpdate(leadProjection.target, delta);\n      hasViewportBoxUpdated = false;\n      var deltaTransform = buildLayoutProjectionTransform(delta, treeScale);\n\n      if (deltaTransform !== prevDeltaTransform || // Also compare calculated treeScale, for values that rely on this only for scale correction\n      prevTreeScaleX !== treeScale.x || prevTreeScaleY !== treeScale.y) {\n        element.scheduleRender();\n      }\n\n      layoutState.deltaTransform = deltaTransform;\n    }\n\n    function _updateTreeLayoutProjection() {\n      element.layoutTree.forEach(fireUpdateLayoutProjection);\n    }\n    /**\n     *\n     */\n\n\n    function bindToMotionValue(key, value) {\n      var removeOnChange = value.onChange(function (latestValue) {\n        latestValues[key] = latestValue;\n        props.onUpdate && sync.update(update, false, true);\n      });\n      var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n      valueSubscriptions.set(key, function () {\n        removeOnChange();\n        removeOnRenderRequest();\n      });\n    }\n    /**\n     * Any motion values that are provided to the element when created\n     * aren't yet bound to the element, as this would technically be impure.\n     * However, we iterate through the motion values and set them to the\n     * initial values for this component.\n     *\n     * TODO: This is impure and we should look at changing this to run on mount.\n     * Doing so will break some tests but this isn't neccessarily a breaking change,\n     * more a reflection of the test.\n     */\n\n\n    var initialMotionValues = scrapeMotionValuesFromProps(props);\n\n    for (var key in initialMotionValues) {\n      var value = initialMotionValues[key];\n\n      if (latestValues[key] !== undefined && isMotionValue(value)) {\n        value.set(latestValues[key], false);\n      }\n    }\n    /**\n     * Determine what role this visual element should take in the variant tree.\n     */\n\n\n    var isControllingVariants = checkIfControllingVariants(props);\n    var isVariantNode = checkIfVariantNode(props);\n\n    var element = __assign(__assign({\n      treeType: treeType,\n\n      /**\n       * This is a mirror of the internal instance prop, which keeps\n       * VisualElement type-compatible with React's RefObject.\n       */\n      current: null,\n\n      /**\n       * The depth of this visual element within the visual element tree.\n       */\n      depth: parent ? parent.depth + 1 : 0,\n      parent: parent,\n      children: new Set(),\n\n      /**\n       * An ancestor path back to the root visual element. This is used\n       * by layout projection to quickly recurse back up the tree.\n       */\n      path: parent ? __spreadArray(__spreadArray([], __read(parent.path)), [parent]) : [],\n      layoutTree: parent ? parent.layoutTree : new FlatTree(),\n\n      /**\n       *\n       */\n      presenceId: presenceId,\n      projection: projection,\n\n      /**\n       * If this component is part of the variant tree, it should track\n       * any children that are also part of the tree. This is essentially\n       * a shadow tree to simplify logic around how to stagger over children.\n       */\n      variantChildren: isVariantNode ? new Set() : undefined,\n\n      /**\n       * Whether this instance is visible. This can be changed imperatively\n       * by AnimateSharedLayout, is analogous to CSS's visibility in that\n       * hidden elements should take up layout, and needs enacting by the configured\n       * render function.\n       */\n      isVisible: undefined,\n\n      /**\n       * Normally, if a component is controlled by a parent's variants, it can\n       * rely on that ancestor to trigger animations further down the tree.\n       * However, if a component is created after its parent is mounted, the parent\n       * won't trigger that mount animation so the child needs to.\n       *\n       * TODO: This might be better replaced with a method isParentMounted\n       */\n      manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()),\n\n      /**\n       * This can be set by AnimatePresence to force components that mount\n       * at the same time as it to mount as if they have initial={false} set.\n       */\n      blockInitialAnimation: blockInitialAnimation,\n\n      /**\n       * Determine whether this component has mounted yet. This is mostly used\n       * by variant children to determine whether they need to trigger their\n       * own animations on mount.\n       */\n      isMounted: function isMounted() {\n        return Boolean(instance);\n      },\n      mount: function mount(newInstance) {\n        instance = element.current = newInstance;\n        element.pointTo(element);\n\n        if (isVariantNode && parent && !isControllingVariants) {\n          removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n        }\n\n        parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n      },\n\n      /**\n       *\n       */\n      unmount: function unmount() {\n        cancelSync.update(update);\n        cancelSync.render(render);\n        cancelSync.preRender(element.updateLayoutProjection);\n        valueSubscriptions.forEach(function (remove) {\n          return remove();\n        });\n        element.stopLayoutAnimation();\n        element.layoutTree.remove(element);\n        removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n        parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        lifecycles.clearAllListeners();\n      },\n\n      /**\n       * Add a child visual element to our set of children.\n       */\n      addVariantChild: function addVariantChild(child) {\n        var _a;\n\n        var closestVariantNode = element.getClosestVariantNode();\n\n        if (closestVariantNode) {\n          (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n          return function () {\n            return closestVariantNode.variantChildren.delete(child);\n          };\n        }\n      },\n      sortNodePosition: function sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!_sortNodePosition || treeType !== other.treeType) return 0;\n        return _sortNodePosition(element.getInstance(), other.getInstance());\n      },\n\n      /**\n       * Returns the closest variant node in the tree starting from\n       * this visual element.\n       */\n      getClosestVariantNode: function getClosestVariantNode() {\n        return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n      },\n\n      /**\n       * A method that schedules an update to layout projections throughout\n       * the tree. We inherit from the parent so there's only ever one\n       * job scheduled on the next frame - that of the root visual element.\n       */\n      scheduleUpdateLayoutProjection: parent ? parent.scheduleUpdateLayoutProjection : function () {\n        return sync.preRender(element.updateTreeLayoutProjection, false, true);\n      },\n\n      /**\n       * Expose the latest layoutId prop.\n       */\n      getLayoutId: function getLayoutId() {\n        return props.layoutId;\n      },\n\n      /**\n       * Returns the current instance.\n       */\n      getInstance: function getInstance() {\n        return instance;\n      },\n\n      /**\n       * Get/set the latest static values.\n       */\n      getStaticValue: function getStaticValue(key) {\n        return latestValues[key];\n      },\n      setStaticValue: function setStaticValue(key, value) {\n        return latestValues[key] = value;\n      },\n\n      /**\n       * Returns the latest motion value state. Currently only used to take\n       * a snapshot of the visual element - perhaps this can return the whole\n       * visual state\n       */\n      getLatestValues: function getLatestValues() {\n        return latestValues;\n      },\n\n      /**\n       * Set the visiblity of the visual element. If it's changed, schedule\n       * a render to reflect these changes.\n       */\n      setVisibility: function setVisibility(visibility) {\n        if (element.isVisible === visibility) return;\n        element.isVisible = visibility;\n        element.scheduleRender();\n      },\n\n      /**\n       * Make a target animatable by Popmotion. For instance, if we're\n       * trying to animate width from 100px to 100vw we need to measure 100vw\n       * in pixels to determine what we really need to animate to. This is also\n       * pluggable to support Framer's custom value types like Color,\n       * and CSS variables.\n       */\n      makeTargetAnimatable: function makeTargetAnimatable(target, canMutate) {\n        if (canMutate === void 0) {\n          canMutate = true;\n        }\n\n        return _makeTargetAnimatable(element, target, props, canMutate);\n      },\n      // Motion values ========================\n\n      /**\n       * Add a motion value and bind it to this visual element.\n       */\n      addValue: function addValue(key, value) {\n        // Remove existing value if it exists\n        if (element.hasValue(key)) element.removeValue(key);\n        values.set(key, value);\n        latestValues[key] = value.get();\n        bindToMotionValue(key, value);\n      },\n\n      /**\n       * Remove a motion value and unbind any active subscriptions.\n       */\n      removeValue: function removeValue(key) {\n        var _a;\n\n        values.delete(key);\n        (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        valueSubscriptions.delete(key);\n        delete latestValues[key];\n        removeValueFromRenderState(key, renderState);\n      },\n\n      /**\n       * Check whether we have a motion value for this key\n       */\n      hasValue: function hasValue(key) {\n        return values.has(key);\n      },\n\n      /**\n       * Get a motion value for this key. If called with a default\n       * value, we'll create one if none exists.\n       */\n      getValue: function getValue(key, defaultValue) {\n        var value = values.get(key);\n\n        if (value === undefined && defaultValue !== undefined) {\n          value = motionValue(defaultValue);\n          element.addValue(key, value);\n        }\n\n        return value;\n      },\n\n      /**\n       * Iterate over our motion values.\n       */\n      forEachValue: function forEachValue(callback) {\n        return values.forEach(callback);\n      },\n\n      /**\n       * If we're trying to animate to a previously unencountered value,\n       * we need to check for it in our state and as a last resort read it\n       * directly from the instance (which might have performance implications).\n       */\n      readValue: function readValue(key) {\n        var _a;\n\n        return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options);\n      },\n\n      /**\n       * Set the base target to later animate back to. This is currently\n       * only hydrated on creation and when we first read a value.\n       */\n      setBaseTarget: function setBaseTarget(key, value) {\n        baseTarget[key] = value;\n      },\n\n      /**\n       * Find the base target for a value thats been removed from all animation\n       * props.\n       */\n      getBaseTarget: function getBaseTarget(key) {\n        if (_getBaseTarget) {\n          var target = _getBaseTarget(props, key);\n\n          if (target !== undefined && !isMotionValue(target)) return target;\n        }\n\n        return baseTarget[key];\n      }\n    }, lifecycles), {\n      /**\n       * Build the renderer state based on the latest visual state.\n       */\n      build: function build() {\n        triggerBuild();\n        return renderState;\n      },\n\n      /**\n       * Schedule a render on the next animation frame.\n       */\n      scheduleRender: function scheduleRender() {\n        sync.render(render, false, true);\n      },\n\n      /**\n       * Synchronously fire render. It's prefered that we batch renders but\n       * in many circumstances, like layout measurement, we need to run this\n       * synchronously. However in those instances other measures should be taken\n       * to batch reads/writes.\n       */\n      syncRender: render,\n\n      /**\n       * Update the provided props. Ensure any newly-added motion values are\n       * added to our map, old ones removed, and listeners updated.\n       */\n      setProps: function setProps(newProps) {\n        props = newProps;\n        lifecycles.updatePropListeners(newProps);\n        prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n      },\n      getProps: function getProps() {\n        return props;\n      },\n      // Variants ==============================\n\n      /**\n       * Returns the variant definition with a given name.\n       */\n      getVariant: function getVariant(name) {\n        var _a;\n\n        return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name];\n      },\n\n      /**\n       * Returns the defined default transition on this component.\n       */\n      getDefaultTransition: function getDefaultTransition() {\n        return props.transition;\n      },\n\n      /**\n       * Used by child variant nodes to get the closest ancestor variant props.\n       */\n      getVariantContext: function getVariantContext(startAtParent) {\n        if (startAtParent === void 0) {\n          startAtParent = false;\n        }\n\n        if (startAtParent) return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n\n        if (!isControllingVariants) {\n          var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n\n          if (props.initial !== undefined) {\n            context_1.initial = props.initial;\n          }\n\n          return context_1;\n        }\n\n        var context = {};\n\n        for (var i = 0; i < numVariantProps; i++) {\n          var name_1 = variantProps[i];\n          var prop = props[name_1];\n\n          if (isVariantLabel(prop) || prop === false) {\n            context[name_1] = prop;\n          }\n        }\n\n        return context;\n      },\n      // Layout projection ==============================\n\n      /**\n       * Enable layout projection for this visual element. Won't actually\n       * occur until we also have hydrated layout measurements.\n       */\n      enableLayoutProjection: function enableLayoutProjection() {\n        projection.isEnabled = true;\n        element.layoutTree.add(element);\n      },\n\n      /**\n       * Lock the projection target, for instance when dragging, so\n       * nothing else can try and animate it.\n       */\n      lockProjectionTarget: function lockProjectionTarget() {\n        projection.isTargetLocked = true;\n      },\n      unlockProjectionTarget: function unlockProjectionTarget() {\n        element.stopLayoutAnimation();\n        projection.isTargetLocked = false;\n      },\n      getLayoutState: function getLayoutState() {\n        return layoutState;\n      },\n      setCrossfader: function setCrossfader(newCrossfader) {\n        crossfader = newCrossfader;\n      },\n      isProjectionReady: function isProjectionReady() {\n        return projection.isEnabled && projection.isHydrated && layoutState.isHydrated;\n      },\n\n      /**\n       * Start a layout animation on a given axis.\n       */\n      startLayoutAnimation: function startLayoutAnimation(axis, transition, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n\n        var progress = element.getProjectionAnimationProgress()[axis];\n\n        var _a = isRelative ? projection.relativeTarget[axis] : projection.target[axis],\n            min = _a.min,\n            max = _a.max;\n\n        var length = max - min;\n        progress.clearListeners();\n        progress.set(min);\n        progress.set(min); // Set twice to hard-reset velocity\n\n        progress.onChange(function (v) {\n          element.setProjectionTargetAxis(axis, v, v + length, isRelative);\n        });\n        return element.animateMotionValue(axis, progress, 0, transition);\n      },\n\n      /**\n       * Stop layout animations.\n       */\n      stopLayoutAnimation: function stopLayoutAnimation() {\n        eachAxis(function (axis) {\n          return element.getProjectionAnimationProgress()[axis].stop();\n        });\n      },\n\n      /**\n       * Measure the current viewport box with or without transforms.\n       * Only measures axis-aligned boxes, rotate and skew must be manually\n       * removed with a re-render to work.\n       */\n      measureViewportBox: function measureViewportBox(withTransform) {\n        if (withTransform === void 0) {\n          withTransform = true;\n        }\n\n        var viewportBox = _measureViewportBox(instance, options);\n\n        if (!withTransform) removeBoxTransforms(viewportBox, latestValues);\n        return viewportBox;\n      },\n\n      /**\n       * Get the motion values tracking the layout animations on each\n       * axis. Lazy init if not already created.\n       */\n      getProjectionAnimationProgress: function getProjectionAnimationProgress() {\n        projectionTargetProgress || (projectionTargetProgress = {\n          x: motionValue(0),\n          y: motionValue(0)\n        });\n        return projectionTargetProgress;\n      },\n\n      /**\n       * Update the projection of a single axis. Schedule an update to\n       * the tree layout projection.\n       */\n      setProjectionTargetAxis: function setProjectionTargetAxis(axis, min, max, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n\n        var target;\n\n        if (isRelative) {\n          if (!projection.relativeTarget) {\n            projection.relativeTarget = axisBox();\n          }\n\n          target = projection.relativeTarget[axis];\n        } else {\n          projection.relativeTarget = undefined;\n          target = projection.target[axis];\n        }\n\n        projection.isHydrated = true;\n        target.min = min;\n        target.max = max; // Flag that we want to fire the onViewportBoxUpdate event handler\n\n        hasViewportBoxUpdated = true;\n        lifecycles.notifySetAxisTarget();\n      },\n\n      /**\n       * Rebase the projection target on top of the provided viewport box\n       * or the measured layout. This ensures that non-animating elements\n       * don't fall out of sync differences in measurements vs projections\n       * after a page scroll or other relayout.\n       */\n      rebaseProjectionTarget: function rebaseProjectionTarget(force, box) {\n        if (box === void 0) {\n          box = layoutState.layout;\n        }\n\n        var _a = element.getProjectionAnimationProgress(),\n            x = _a.x,\n            y = _a.y;\n\n        var shouldRebase = !projection.relativeTarget && !projection.isTargetLocked && !x.isAnimating() && !y.isAnimating();\n\n        if (force || shouldRebase) {\n          eachAxis(function (axis) {\n            var _a = box[axis],\n                min = _a.min,\n                max = _a.max;\n            element.setProjectionTargetAxis(axis, min, max);\n          });\n        }\n      },\n\n      /**\n       * Notify the visual element that its layout is up-to-date.\n       * Currently Animate.tsx uses this to check whether a layout animation\n       * needs to be performed.\n       */\n      notifyLayoutReady: function notifyLayoutReady(config) {\n        setCurrentViewportBox(element);\n        element.notifyLayoutUpdate(layoutState.layout, element.prevViewportBox || layoutState.layout, config);\n      },\n\n      /**\n       * Temporarily reset the transform of the instance.\n       */\n      resetTransform: function resetTransform() {\n        return _resetTransform(element, instance, props);\n      },\n      restoreTransform: function restoreTransform() {\n        return _restoreTransform(instance, renderState);\n      },\n      updateLayoutProjection: updateLayoutProjection,\n      updateTreeLayoutProjection: function updateTreeLayoutProjection() {\n        element.layoutTree.forEach(fireResolveRelativeTargetBox);\n        /**\n         * Schedule the projection updates at the end of the current preRender\n         * step. This will ensure that all layout trees will first resolve\n         * relative projection boxes into viewport boxes, and *then*\n         * update projections.\n         */\n\n        sync.preRender(_updateTreeLayoutProjection, false, true); // sync.postRender(() => element.scheduleUpdateLayoutProjection())\n      },\n      getProjectionParent: function getProjectionParent() {\n        if (projectionParent === undefined) {\n          var foundParent = false; // Search backwards through the tree path\n\n          for (var i = element.path.length - 1; i >= 0; i--) {\n            var ancestor = element.path[i];\n\n            if (ancestor.projection.isEnabled) {\n              foundParent = ancestor;\n              break;\n            }\n          }\n\n          projectionParent = foundParent;\n        }\n\n        return projectionParent;\n      },\n      resolveRelativeTargetBox: function resolveRelativeTargetBox() {\n        var relativeParent = element.getProjectionParent();\n        if (!projection.relativeTarget || !relativeParent) return;\n        calcRelativeBox(projection, relativeParent.projection);\n\n        if (isDraggable(relativeParent)) {\n          var target = projection.target;\n          applyBoxTransforms(target, target, relativeParent.getLatestValues());\n        }\n      },\n      shouldResetTransform: function shouldResetTransform() {\n        return Boolean(props._layoutResetTransform);\n      },\n\n      /**\n       *\n       */\n      pointTo: function pointTo(newLead) {\n        leadProjection = newLead.projection;\n        leadLatestValues = newLead.getLatestValues();\n        /**\n         * Subscribe to lead component's layout animations\n         */\n\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        unsubscribeFromLeadVisualElement = pipe(newLead.onSetAxisTarget(element.scheduleUpdateLayoutProjection), newLead.onLayoutAnimationComplete(function () {\n          var _a;\n\n          if (element.isPresent) {\n            element.presence = Presence.Present;\n          } else {\n            (_a = element.layoutSafeToRemove) === null || _a === void 0 ? void 0 : _a.call(element);\n          }\n        }));\n      },\n      // TODO: Clean this up\n      isPresent: true,\n      presence: Presence.Entering\n    });\n\n    return element;\n  };\n};\n\nfunction fireResolveRelativeTargetBox(child) {\n  child.resolveRelativeTargetBox();\n}\n\nfunction fireUpdateLayoutProjection(child) {\n  child.updateLayoutProjection();\n}\n\nvar variantProps = __spreadArray([\"initial\"], __read(variantPriorityOrder));\n\nvar numVariantProps = variantProps.length;\nexport { visualElement };","import { motionValue } from '../../value/index.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n  var _a;\n\n  for (var key in next) {\n    var nextValue = next[key];\n    var prevValue = prev[key];\n\n    if (isMotionValue(nextValue)) {\n      /**\n       * If this is a motion value found in props or style, we want to add it\n       * to our visual element's motion value map.\n       */\n      element.addValue(key, nextValue);\n    } else if (isMotionValue(prevValue)) {\n      /**\n       * If we're swapping to a new motion value, create a new motion value\n       * from that\n       */\n      element.addValue(key, motionValue(nextValue));\n    } else if (prevValue !== nextValue) {\n      /**\n       * If this is a flat value that has changed, update the motion value\n       * or create one if it doesn't exist. We only want to do this if we're\n       * not handling the value with our animation state.\n       */\n      if (element.hasValue(key)) {\n        var existingValue = element.getValue(key); // TODO: Only update values that aren't being animated or even looked at\n\n        !existingValue.hasAnimated && existingValue.set(nextValue);\n      } else {\n        element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n      }\n    }\n  } // Handle removed values\n\n\n  for (var key in prev) {\n    if (next[key] === undefined) element.removeValue(key);\n  }\n\n  return next;\n}\n\nexport { updateMotionValuesFromProps };","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\n\nfunction setCurrentViewportBox(visualElement) {\n  var projectionParent = visualElement.getProjectionParent();\n\n  if (!projectionParent) {\n    visualElement.rebaseProjectionTarget();\n    return;\n  }\n\n  var relativeOffset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  eachAxis(function (axis) {\n    visualElement.setProjectionTargetAxis(axis, relativeOffset[axis].min, relativeOffset[axis].max, true);\n  });\n}\n\nexport { setCurrentViewportBox };","import { __assign, __read } from 'tslib';\nimport { number, px } from 'style-value-types';\nimport { isKeyframesTarget } from '../../../animation/utils/is-keyframes-target.js';\nimport { invariant } from 'hey-listen';\nimport { transformProps } from '../../html/utils/transform.js';\nimport { findDimensionValueType } from '../value-types/dimensions.js';\nvar positionalKeys = new Set([\"width\", \"height\", \"top\", \"left\", \"right\", \"bottom\", \"x\", \"y\"]);\n\nvar isPositionalKey = function isPositionalKey(key) {\n  return positionalKeys.has(key);\n};\n\nvar hasPositionalKey = function hasPositionalKey(target) {\n  return Object.keys(target).some(isPositionalKey);\n};\n\nvar setAndResetVelocity = function setAndResetVelocity(value, to) {\n  // Looks odd but setting it twice doesn't render, it'll just\n  // set both prev and current to the latest value\n  value.set(to, false);\n  value.set(to);\n};\n\nvar isNumOrPxType = function isNumOrPxType(v) {\n  return v === number || v === px;\n};\n\nvar BoundingBoxDimension;\n\n(function (BoundingBoxDimension) {\n  BoundingBoxDimension[\"width\"] = \"width\";\n  BoundingBoxDimension[\"height\"] = \"height\";\n  BoundingBoxDimension[\"left\"] = \"left\";\n  BoundingBoxDimension[\"right\"] = \"right\";\n  BoundingBoxDimension[\"top\"] = \"top\";\n  BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar getPosFromMatrix = function getPosFromMatrix(matrix, pos) {\n  return parseFloat(matrix.split(\", \")[pos]);\n};\n\nvar getTranslateFromMatrix = function getTranslateFromMatrix(pos2, pos3) {\n  return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform) return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n\n    if (matrix3d) {\n      return getPosFromMatrix(matrix3d[1], pos3);\n    } else {\n      var matrix = transform.match(/^matrix\\((.+)\\)$/);\n\n      if (matrix) {\n        return getPosFromMatrix(matrix[1], pos2);\n      } else {\n        return 0;\n      }\n    }\n  };\n};\n\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) {\n  return !transformKeys.has(key);\n});\n\nfunction removeNonTranslationalTransform(visualElement) {\n  var removedTransforms = [];\n  nonTranslationalTransformKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n\n    if (value !== undefined) {\n      removedTransforms.push([key, value.get()]);\n      value.set(key.startsWith(\"scale\") ? 1 : 0);\n    }\n  }); // Apply changes to element before measurement\n\n  if (removedTransforms.length) visualElement.syncRender();\n  return removedTransforms;\n}\n\nvar positionalValues = {\n  // Dimensions\n  width: function width(_a) {\n    var x = _a.x;\n    return x.max - x.min;\n  },\n  height: function height(_a) {\n    var y = _a.y;\n    return y.max - y.min;\n  },\n  top: function top(_bbox, _a) {\n    var top = _a.top;\n    return parseFloat(top);\n  },\n  left: function left(_bbox, _a) {\n    var left = _a.left;\n    return parseFloat(left);\n  },\n  bottom: function bottom(_a, _b) {\n    var y = _a.y;\n    var top = _b.top;\n    return parseFloat(top) + (y.max - y.min);\n  },\n  right: function right(_a, _b) {\n    var x = _a.x;\n    var left = _b.left;\n    return parseFloat(left) + (x.max - x.min);\n  },\n  // Transform\n  x: getTranslateFromMatrix(4, 13),\n  y: getTranslateFromMatrix(5, 14)\n};\n\nvar convertChangedValueTypes = function convertChangedValueTypes(target, visualElement, changedKeys) {\n  var originBbox = visualElement.measureViewportBox();\n  var element = visualElement.getInstance();\n  var elementComputedStyle = getComputedStyle(element);\n  var display = elementComputedStyle.display,\n      top = elementComputedStyle.top,\n      left = elementComputedStyle.left,\n      bottom = elementComputedStyle.bottom,\n      right = elementComputedStyle.right,\n      transform = elementComputedStyle.transform;\n  var originComputedStyle = {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    transform: transform\n  }; // If the element is currently set to display: \"none\", make it visible before\n  // measuring the target bounding box\n\n  if (display === \"none\") {\n    visualElement.setStaticValue(\"display\", target.display || \"block\");\n  } // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n\n\n  visualElement.syncRender();\n  var targetBbox = visualElement.measureViewportBox();\n  changedKeys.forEach(function (key) {\n    // Restore styles to their **calculated computed style**, not their actual\n    // originally set style. This allows us to animate between equivalent pixel units.\n    var value = visualElement.getValue(key);\n    setAndResetVelocity(value, positionalValues[key](originBbox, originComputedStyle));\n    target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n  });\n  return target;\n};\n\nvar checkAndConvertChangedValueTypes = function checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) {\n  if (origin === void 0) {\n    origin = {};\n  }\n\n  if (transitionEnd === void 0) {\n    transitionEnd = {};\n  }\n\n  target = __assign({}, target);\n  transitionEnd = __assign({}, transitionEnd);\n  var targetPositionalKeys = Object.keys(target).filter(isPositionalKey); // We want to remove any transform values that could affect the element's bounding box before\n  // it's measured. We'll reapply these later.\n\n  var removedTransformValues = [];\n  var hasAttemptedToRemoveTransformValues = false;\n  var changedValueTypeKeys = [];\n  targetPositionalKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (!visualElement.hasValue(key)) return;\n    var from = origin[key];\n    var to = target[key];\n    var fromType = findDimensionValueType(from);\n    var toType; // TODO: The current implementation of this basically throws an error\n    // if you try and do value conversion via keyframes. There's probably\n    // a way of doing this but the performance implications would need greater scrutiny,\n    // as it'd be doing multiple resize-remeasure operations.\n\n    if (isKeyframesTarget(to)) {\n      var numKeyframes = to.length;\n\n      for (var i = to[0] === null ? 1 : 0; i < numKeyframes; i++) {\n        if (!toType) {\n          toType = findDimensionValueType(to[i]);\n          invariant(toType === fromType || isNumOrPxType(fromType) && isNumOrPxType(toType), \"Keyframes must be of the same dimension as the current value\");\n        } else {\n          invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n        }\n      }\n    } else {\n      toType = findDimensionValueType(to);\n    }\n\n    if (fromType !== toType) {\n      // If they're both just number or px, convert them both to numbers rather than\n      // relying on resize/remeasure to convert (which is wasteful in this situation)\n      if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n        var current = value.get();\n\n        if (typeof current === \"string\") {\n          value.set(parseFloat(current));\n        }\n\n        if (typeof to === \"string\") {\n          target[key] = parseFloat(to);\n        } else if (Array.isArray(to) && toType === px) {\n          target[key] = to.map(parseFloat);\n        }\n      } else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) && (toType === null || toType === void 0 ? void 0 : toType.transform) && (from === 0 || to === 0)) {\n        // If one or the other value is 0, it's safe to coerce it to the\n        // type of the other without measurement\n        if (from === 0) {\n          value.set(toType.transform(from));\n        } else {\n          target[key] = fromType.transform(to);\n        }\n      } else {\n        // If we're going to do value conversion via DOM measurements, we first\n        // need to remove non-positional transform values that could affect the bbox measurements.\n        if (!hasAttemptedToRemoveTransformValues) {\n          removedTransformValues = removeNonTranslationalTransform(visualElement);\n          hasAttemptedToRemoveTransformValues = true;\n        }\n\n        changedValueTypeKeys.push(key);\n        transitionEnd[key] = transitionEnd[key] !== undefined ? transitionEnd[key] : target[key];\n        setAndResetVelocity(value, to);\n      }\n    }\n  });\n\n  if (changedValueTypeKeys.length) {\n    var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys); // If we removed transform values, reapply them before the next render\n\n    if (removedTransformValues.length) {\n      removedTransformValues.forEach(function (_a) {\n        var _b = __read(_a, 2),\n            key = _b[0],\n            value = _b[1];\n\n        visualElement.getValue(key).set(value);\n      });\n    } // Reapply original values\n\n\n    visualElement.syncRender();\n    return {\n      target: convertedTarget,\n      transitionEnd: transitionEnd\n    };\n  } else {\n    return {\n      target: target,\n      transitionEnd: transitionEnd\n    };\n  }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\n\n\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n  return hasPositionalKey(target) ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) : {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\nexport { BoundingBoxDimension, unitConversion };","import { resolveCSSVariables } from './css-variables-conversion.js';\nimport { unitConversion } from './unit-conversion.js';\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\n\nvar parseDomVariant = function parseDomVariant(visualElement, target, origin, transitionEnd) {\n  var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n  target = resolved.target;\n  transitionEnd = resolved.transitionEnd;\n  return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\nexport { parseDomVariant };","import { __rest, __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { getOrigin, checkTargetForNewValues } from '../utils/setters.js';\nimport { getBoundingBox } from '../dom/projection/measure.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { isCSSVariable } from '../dom/utils/is-css-variable.js';\nimport { parseDomVariant } from '../dom/utils/parse-dom-variant.js';\nimport { isTransformProp } from './utils/transform.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { renderHTML } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from './utils/build-projection-transform.js';\n\nfunction getComputedStyle(element) {\n  return window.getComputedStyle(element);\n}\n\nvar htmlConfig = {\n  treeType: \"dom\",\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    if (isTransformProp(key)) {\n      var defaultType = getDefaultValueType(key);\n      return defaultType ? defaultType.default || 0 : 0;\n    } else {\n      var computedStyle = getComputedStyle(domElement);\n      return (isCSSVariable(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;\n    }\n  },\n  sortNodePosition: function sortNodePosition(a, b) {\n    /**\n     * compareDocumentPosition returns a bitmask, by using the bitwise &\n     * we're returning true if 2 in that bitmask is set to true. 2 is set\n     * to true if b preceeds a.\n     */\n    return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n  },\n  getBaseTarget: function getBaseTarget(props, key) {\n    var _a;\n\n    return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n  },\n  measureViewportBox: function measureViewportBox(element, _a) {\n    var transformPagePoint = _a.transformPagePoint;\n    return getBoundingBox(element, transformPagePoint);\n  },\n\n  /**\n   * Reset the transform on the current Element. This is called as part\n   * of a batched process across the entire layout tree. To remove this write\n   * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n   * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n   * works\n   */\n  resetTransform: function resetTransform(element, domElement, props) {\n    var transformTemplate = props.transformTemplate;\n    domElement.style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\"; // Ensure that whatever happens next, we restore our transform on the next frame\n\n    element.scheduleRender();\n  },\n  restoreTransform: function restoreTransform(instance, mutableState) {\n    instance.style.transform = mutableState.style.transform;\n  },\n  removeValueFromRenderState: function removeValueFromRenderState(key, _a) {\n    var vars = _a.vars,\n        style = _a.style;\n    delete vars[key];\n    delete style[key];\n  },\n\n  /**\n   * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n   * can be animated by Motion.\n   */\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a, _b, isMounted) {\n    var transformValues = _b.transformValues;\n\n    if (isMounted === void 0) {\n      isMounted = true;\n    }\n\n    var transition = _a.transition,\n        transitionEnd = _a.transitionEnd,\n        target = __rest(_a, [\"transition\", \"transitionEnd\"]);\n\n    var origin = getOrigin(target, transition || {}, element);\n    /**\n     * If Framer has provided a function to convert `Color` etc value types, convert them\n     */\n\n    if (transformValues) {\n      if (transitionEnd) transitionEnd = transformValues(transitionEnd);\n      if (target) target = transformValues(target);\n      if (origin) origin = transformValues(origin);\n    }\n\n    if (isMounted) {\n      checkTargetForNewValues(element, target, origin);\n      var parsed = parseDomVariant(element, target, origin, transitionEnd);\n      transitionEnd = parsed.transitionEnd;\n      target = parsed.target;\n    }\n\n    return __assign({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(element, renderState, latestValues, projection, layoutState, options, props) {\n    if (element.isVisible !== undefined) {\n      renderState.style.visibility = element.isVisible ? \"visible\" : \"hidden\";\n    }\n\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    buildHTMLStyles(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: renderHTML\n};\nvar htmlVisualElement = visualElement(htmlConfig);\nexport { getComputedStyle, htmlConfig, htmlVisualElement };","/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nvar isNumericalString = function isNumericalString(v) {\n  return /^\\-?\\d*\\.?\\d+$/.test(v);\n};\n\nexport { isNumericalString };","import { __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { htmlConfig } from '../html/visual-element.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { camelToDash } from '../dom/utils/camel-to-dash.js';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.js';\nimport { isTransformProp } from '../html/utils/transform.js';\nimport { renderSVG } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from '../html/utils/build-projection-transform.js';\nvar svgVisualElement = visualElement(__assign(__assign({}, htmlConfig), {\n  getBaseTarget: function getBaseTarget(props, key) {\n    return props[key];\n  },\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    var _a;\n\n    if (isTransformProp(key)) {\n      return ((_a = getDefaultValueType(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n    }\n\n    key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n    return domElement.getAttribute(key);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(_element, renderState, latestValues, projection, layoutState, options, props) {\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    buildSVGAttrs(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: renderSVG\n}));\nexport { svgVisualElement };","import { htmlVisualElement } from '../html/visual-element.js';\nimport { svgVisualElement } from '../svg/visual-element.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\n\nvar createDomVisualElement = function createDomVisualElement(Component, options) {\n  return isSVGComponent(Component) ? svgVisualElement(options, {\n    enableHardwareAcceleration: false\n  }) : htmlVisualElement(options, {\n    enableHardwareAcceleration: true\n  });\n};\n\nexport { createDomVisualElement };","import { __assign } from 'tslib';\nimport { createMotionComponent } from '../../motion/index.js';\nimport { createMotionProxy } from './motion-proxy.js';\nimport { createDomMotionConfig } from './utils/create-config.js';\nimport { gestureAnimations } from '../../motion/features/gestures.js';\nimport { animations } from '../../motion/features/animations.js';\nimport { drag } from '../../motion/features/drag.js';\nimport { layoutAnimations } from '../../motion/features/layout/index.js';\nimport { createDomVisualElement } from './create-visual-element.js';\n\nvar featureBundle = __assign(__assign(__assign(__assign({}, animations), gestureAnimations), drag), layoutAnimations);\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\n\n\nvar motion = /*@__PURE__*/createMotionProxy(function (Component, config) {\n  return createDomMotionConfig(Component, config, featureBundle, createDomVisualElement);\n});\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\n\nfunction createDomMotionComponent(key) {\n  return createMotionComponent(createDomMotionConfig(key, {\n    forwardMotionProps: false\n  }, featureBundle, createDomVisualElement));\n}\n\nexport { createDomMotionComponent, motion };","import { __assign } from 'tslib';\nimport { isSVGComponent } from './is-svg-component.js';\nimport { createUseRender } from '../use-render.js';\nimport { svgMotionConfig } from '../../svg/config-motion.js';\nimport { htmlMotionConfig } from '../../html/config-motion.js';\n\nfunction createDomMotionConfig(Component, _a, preloadedFeatures, createVisualElement) {\n  var _b = _a.forwardMotionProps,\n      forwardMotionProps = _b === void 0 ? false : _b;\n  var baseConfig = isSVGComponent(Component) ? svgMotionConfig : htmlMotionConfig;\n  return __assign(__assign({}, baseConfig), {\n    preloadedFeatures: preloadedFeatures,\n    useRender: createUseRender(forwardMotionProps),\n    createVisualElement: createVisualElement,\n    Component: Component\n  });\n}\n\nexport { createDomMotionConfig };","function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;","import memoize from '@emotion/memoize';\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar index = memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\nexport default index;","enum SUPPORTED_LANGUAGES {\n  en = 'en',\n  fr = 'fr',\n  es = 'es',\n  de = 'de',\n  it = 'it'\n}\n\nexport const checkLanguage = (path: string | undefined): string | boolean => {\n  if (!path) {\n    return false\n  }\n\n  const pathWithoutTrailingSlash = path.replace(/\\/$/, '')\n\n  // Get the language from the path\n  const lang = pathWithoutTrailingSlash.split('/')[1] as SUPPORTED_LANGUAGES\n\n  // If the language is not supported, return the nextPath\n  if (Object.values(SUPPORTED_LANGUAGES).includes(lang)) {\n    return lang\n  }\n\n  return false\n}\n\nexport const getLangRootNavigationPath = (\n  path: string | undefined,\n  nextPath: string\n) => {\n  const lang = checkLanguage(path)\n\n  // If the language is not supported, return the nextPath\n  if (lang) {\n    return `/${lang}${nextPath}`\n  } else {\n    return nextPath\n  }\n}\n","import React from \"react\";\n\nexport default function NavbarPadding() {\n  return <div style={{ height: 110 }} />;\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { REFRESH_TOKEN_COOKIE_NAME, TOKEN_COOKIE_NAME, USER_DATA_TOKEN_NAME } from \"../constants.js\";\n\nvar loginRequired = function () {\n  var _ref = _asyncToGenerator(function (args, _, param) {\n    var req, res, ref, generateInternalToken, setAuthenticationCookies, setUserCookie, ref1, refreshTokens, verify, newUserDataToken, tokenCookie, refreshCookie, userDataCookie, accessToken, refreshToken, userDataToken, e, data, newTokens, _tmp, _tmp1, e1;\n\n    return __generator(this, function (_state) {\n      switch (_state.label) {\n        case 0:\n          req = param.req, res = param.res;\n          return [4, import(\"../helper/auth.js\")];\n\n        case 1:\n          ref = _state.sent(), generateInternalToken = ref.generateInternalToken, setAuthenticationCookies = ref.setAuthenticationCookies;\n          return [4, import(\"../helper/user.js\")];\n\n        case 2:\n          setUserCookie = _state.sent().setUserCookie;\n          return [4, import(\"../internal/token/factory.js\")];\n\n        case 3:\n          ref1 = _state.sent(), refreshTokens = ref1.refreshTokens, verify = ref1.verify, newUserDataToken = ref1.newUserDataToken;\n          tokenCookie = req.cookies[TOKEN_COOKIE_NAME];\n          refreshCookie = req.cookies[REFRESH_TOKEN_COOKIE_NAME];\n          userDataCookie = req.cookies[USER_DATA_TOKEN_NAME];\n          _state.label = 4;\n\n        case 4:\n          _state.trys.push([4, 5,, 10]);\n\n          verify(tokenCookie);\n          accessToken = tokenCookie;\n          return [3, 10];\n\n        case 5:\n          e = _state.sent();\n          _state.label = 6;\n\n        case 6:\n          _state.trys.push([6, 8,, 9]);\n\n          data = verify(refreshCookie);\n          refreshToken = refreshCookie;\n          _tmp = {};\n          newTokens = refreshTokens((_tmp.refreshToken = refreshCookie, _tmp.durration = \"30d\", _tmp));\n          accessToken = newTokens.accessToken;\n          refreshToken = newTokens.refreshToken;\n          _tmp1 = {};\n          return [4, newUserDataToken((_tmp1.userId = data.sub, _tmp1))];\n\n        case 7:\n          userDataToken = _state.sent();\n          setAuthenticationCookies(res, accessToken, refreshToken);\n          setUserCookie(res, userDataToken);\n          return [3, 9];\n\n        case 8:\n          e1 = _state.sent();\n          throw new Error(\"Unable to authenticate\");\n\n        case 9:\n          return [3, 10];\n\n        case 10:\n          if (!accessToken) {\n            throw new Error(\"This error should never be thrown\");\n          }\n\n          req.headers.authorization = generateInternalToken({\n            ressourceId: \"res1\",\n            accessToken: accessToken\n          });\n          return [2];\n      }\n    });\n  });\n\n  return function loginRequired(args, _, _1) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default loginRequired;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { REFRESH_TOKEN_COOKIE_NAME, TOKEN_COOKIE_NAME } from \"../constants.js\";\nimport loginRequired from \"./loginRequired.js\";\n\nvar loginOptional = function () {\n  var _ref = _asyncToGenerator(function (args, _, param) {\n    var req, res, tokenCookie, refreshCookie, _tmp;\n\n    return __generator(this, function (_state) {\n      switch (_state.label) {\n        case 0:\n          req = param.req, res = param.res;\n          tokenCookie = req.cookies[TOKEN_COOKIE_NAME];\n          refreshCookie = req.cookies[REFRESH_TOKEN_COOKIE_NAME];\n          if (!(tokenCookie || refreshCookie)) return [3, 2];\n          _tmp = {};\n          return [4, loginRequired(args, _, (_tmp.req = req, _tmp.res = res, _tmp))];\n\n        case 1:\n          _state.sent();\n\n          _state.label = 2;\n\n        case 2:\n          return [2];\n      }\n    });\n  });\n\n  return function loginOptional(args, _, _1) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default loginOptional;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport loginOptional from \"./decorators/loginOptional.js\";\nimport { fn } from \"./factory.js\";\nvar jsonFetch = fn(function () {\n  var _ref = _asyncToGenerator(function (fetchParams, _, param) {\n    var req, res, proxyRequest, proxiedRes, responseData, _tmp;\n\n    return __generator(this, function (_state) {\n      switch (_state.label) {\n        case 0:\n          req = param.req, res = param.res;\n          return [4, import(\"./helper/proxy.js\")];\n\n        case 1:\n          proxyRequest = _state.sent().proxyRequest;\n          return [4, proxyRequest(fetchParams, req)];\n\n        case 2:\n          proxiedRes = _state.sent();\n          _tmp = {\n            headers: proxiedRes.headers,\n            ok: proxiedRes.ok,\n            redirected: proxiedRes.redirected,\n            status: proxiedRes.status,\n            statusText: proxiedRes.statusText,\n            type: proxiedRes.type,\n            url: proxiedRes.url\n          };\n          return [4, proxiedRes.json()];\n\n        case 3:\n          responseData = (_tmp.json = _state.sent(), _tmp);\n          console.log(req.headers);\n          return [2, responseData];\n      }\n    });\n  });\n\n  return function (fetchParams, _, _1) {\n    return _ref.apply(this, arguments);\n  };\n}(), {\n  name: \"jsonFetch\",\n  decorators: [loginOptional]\n});\nexport default jsonFetch;","function _asyncIterator(iterable) {\n  var method,\n      async,\n      sync,\n      retry = 2;\n\n  for (\"undefined\" != typeof Symbol && (async = Symbol.asyncIterator, sync = Symbol.iterator); retry--;) {\n    if (async && null != (method = iterable[async])) return method.call(iterable);\n    if (sync && null != (method = iterable[sync])) return new AsyncFromSyncIterator(method.call(iterable));\n    async = \"@@asyncIterator\", sync = \"@@iterator\";\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}\n\nfunction AsyncFromSyncIterator(s) {\n  function AsyncFromSyncIteratorContinuation(r) {\n    if (Object(r) !== r) return Promise.reject(new TypeError(r + \" is not an object.\"));\n    var done = r.done;\n    return Promise.resolve(r.value).then(function (value) {\n      return {\n        value: value,\n        done: done\n      };\n    });\n  }\n\n  return AsyncFromSyncIterator = function AsyncFromSyncIterator(s) {\n    this.s = s, this.n = s.next;\n  }, AsyncFromSyncIterator.prototype = {\n    s: null,\n    n: null,\n    next: function next() {\n      return AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments));\n    },\n    return: function _return(value) {\n      var ret = this.s.return;\n      return void 0 === ret ? Promise.resolve({\n        value: value,\n        done: !0\n      }) : AsyncFromSyncIteratorContinuation(ret.apply(this.s, arguments));\n    },\n    throw: function _throw(value) {\n      var thr = this.s.return;\n      return void 0 === thr ? Promise.reject(value) : AsyncFromSyncIteratorContinuation(thr.apply(this.s, arguments));\n    }\n  }, new AsyncFromSyncIterator(s);\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { makeFn } from \"@snek-at/functions\";\nexport var url = process.env.IS_OFFLINE ? process.env.CODESPACE_NAME ? \"https://\".concat(process.env.CODESPACE_NAME, \"-4020.githubpreview.dev/graphql\") : \"http://localhost:4020/graphql\" : \"\".concat(process.env.ENDPOINT_URL_AUTHENTICATION);\nexport var fn = makeFn({\n  url: url\n});\nexport function spawnChild(command, scriptName, args, options) {\n  return _spawnChild.apply(this, arguments);\n}\n\nfunction _spawnChild() {\n  _spawnChild = _asyncToGenerator(function (command, scriptName, args, options) {\n    var spawn, fileURLToPath, ref, path, dirname, __filename, __dirname, scriptPath, child, data, _iteratorAbruptCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk, err, error, _iteratorAbruptCompletion1, _didIteratorError1, _iteratorError1, _iterator1, _step1, _value1, chunk1, err1, exitCode;\n\n    return __generator(this, function (_state) {\n      switch (_state.label) {\n        case 0:\n          return [4, import(\"child_process\")];\n\n        case 1:\n          spawn = _state.sent().spawn;\n          return [4, import(\"url\")];\n\n        case 2:\n          fileURLToPath = _state.sent().fileURLToPath;\n          return [4, import(\"path\")];\n\n        case 3:\n          ref = _state.sent(), path = ref.default, dirname = ref.dirname;\n          __filename = fileURLToPath(import.meta.url);\n          __dirname = dirname(__filename);\n          scriptPath = path.resolve(__dirname, scriptName);\n          child = spawn(command, [scriptPath].concat(args || []), options);\n          data = \"\";\n          _iteratorAbruptCompletion = false, _didIteratorError = false;\n          _state.label = 4;\n\n        case 4:\n          _state.trys.push([4, 9, 10, 15]);\n\n          _iterator = _asyncIterator(child.stdout);\n          _state.label = 5;\n\n        case 5:\n          return [4, _iterator.next()];\n\n        case 6:\n          if (!(_iteratorAbruptCompletion = !(_step = _state.sent()).done)) return [3, 8];\n          _value = _step.value;\n          chunk = _value;\n          console.log(\"stdout chunk: \" + chunk);\n          data += chunk;\n          _state.label = 7;\n\n        case 7:\n          _iteratorAbruptCompletion = false;\n          return [3, 5];\n\n        case 8:\n          return [3, 15];\n\n        case 9:\n          err = _state.sent();\n          _didIteratorError = true;\n          _iteratorError = err;\n          return [3, 15];\n\n        case 10:\n          _state.trys.push([10,, 13, 14]);\n\n          if (!(_iteratorAbruptCompletion && _iterator.return != null)) return [3, 12];\n          return [4, _iterator.return()];\n\n        case 11:\n          _state.sent();\n\n          _state.label = 12;\n\n        case 12:\n          return [3, 14];\n\n        case 13:\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n\n          return [7];\n\n        case 14:\n          return [7];\n\n        case 15:\n          error = \"\";\n          _iteratorAbruptCompletion1 = false, _didIteratorError1 = false;\n          _state.label = 16;\n\n        case 16:\n          _state.trys.push([16, 21, 22, 27]);\n\n          _iterator1 = _asyncIterator(child.stderr);\n          _state.label = 17;\n\n        case 17:\n          return [4, _iterator1.next()];\n\n        case 18:\n          if (!(_iteratorAbruptCompletion1 = !(_step1 = _state.sent()).done)) return [3, 20];\n          _value1 = _step1.value;\n          chunk1 = _value1;\n          console.error(\"stderr chunk: \" + chunk1);\n          error += chunk1;\n          _state.label = 19;\n\n        case 19:\n          _iteratorAbruptCompletion1 = false;\n          return [3, 17];\n\n        case 20:\n          return [3, 27];\n\n        case 21:\n          err1 = _state.sent();\n          _didIteratorError1 = true;\n          _iteratorError1 = err1;\n          return [3, 27];\n\n        case 22:\n          _state.trys.push([22,, 25, 26]);\n\n          if (!(_iteratorAbruptCompletion1 && _iterator1.return != null)) return [3, 24];\n          return [4, _iterator1.return()];\n\n        case 23:\n          _state.sent();\n\n          _state.label = 24;\n\n        case 24:\n          return [3, 26];\n\n        case 25:\n          if (_didIteratorError1) {\n            throw _iteratorError1;\n          }\n\n          return [7];\n\n        case 26:\n          return [7];\n\n        case 27:\n          return [4, new Promise(function (resolve, _) {\n            child.on(\"close\", resolve);\n          })];\n\n        case 28:\n          exitCode = _state.sent();\n\n          if (exitCode) {\n            throw new Error(\"subprocess error exit \".concat(exitCode, \", \").concat(error));\n          }\n\n          return [2, data];\n      }\n    });\n  });\n  return _spawnChild.apply(this, arguments);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { fn, spawnChild } from \"./factory.js\";\nvar authenticate = fn(function () {\n  var _ref = _asyncToGenerator(function (param, _, req) {\n    var username, password, userStr, user, hash, _tmp;\n\n    return __generator(this, function (_state) {\n      switch (_state.label) {\n        case 0:\n          username = param.username, password = param.password; // Does one alias per user really make sense?\n\n          console.log(process.env.CODESPACE_NAME);\n          return [4, spawnChild(\"venv/bin/python\", \"internal/storage.py\", [username])];\n\n        case 1:\n          userStr = _state.sent();\n          console.log(\"test:\".concat(userStr));\n          user = JSON.parse(userStr);\n          console.log(\"test: \", user);\n          return [4, import(\"./internal/index.js\")];\n\n        case 2:\n          hash = _state.sent().hash;\n          if (!(user.user_id != \"0\")) return [3, 4];\n          return [4, hash.verify(password, user.password_hash)];\n\n        case 3:\n          _tmp = {}; // const user: User = {\n          //   user_id: '1',\n          //   alias: username,\n          //   password: password\n          // }\n\n          if (_state.sent()) {\n            return [2, (_tmp.user_id = user.user_id.toString(), _tmp)];\n          }\n\n          _state.label = 4;\n\n        case 4:\n          throw new Error(\"Unable to authenticate: \".concat(username));\n      }\n    });\n  });\n\n  return function (_1, _, req) {\n    return _ref.apply(this, arguments);\n  };\n}(), {\n  name: \"authenticate\"\n});\nexport default authenticate;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { authenticate } from \"@snek-functions/authentication\";\nimport { fn } from \"./factory.js\";\nvar login = fn(function () {\n  var _ref = _asyncToGenerator(function (args, _, param) {\n    var res, ref, newAccessToken, newRefreshToken, newUserDataToken, setAuthenticationCookies, setUserCookie, ref1, data, errors, scope, _tmp, accessToken, _tmp1, refreshToken, _tmp2, userDataToken, _tmp3;\n\n    return __generator(this, function (_state) {\n      switch (_state.label) {\n        case 0:\n          res = param.res;\n          return [4, import(\"./internal/token/factory.js\")];\n\n        case 1:\n          ref = _state.sent(), newAccessToken = ref.newAccessToken, newRefreshToken = ref.newRefreshToken, newUserDataToken = ref.newUserDataToken;\n          return [4, import(\"./helper/auth.js\")];\n\n        case 2:\n          setAuthenticationCookies = _state.sent().setAuthenticationCookies;\n          return [4, import(\"./helper/user.js\")];\n\n        case 3:\n          setUserCookie = _state.sent().setUserCookie;\n          return [4, authenticate.execute(args)];\n\n        case 4:\n          ref1 = _state.sent(), data = ref1.data, errors = ref1.errors;\n\n          if (errors.length > 0) {\n            throw new Error(errors[0].message);\n          }\n\n          if (!data) return [3, 6];\n          _tmp = {};\n          scope = (_tmp.res1 = [\"read\", \"write\"], _tmp.res2 = [\"read\", \"write\"], _tmp);\n          _tmp1 = {};\n          accessToken = newAccessToken((_tmp1.subject = data.user_id, _tmp1.scope = scope, _tmp1)).accessToken;\n          _tmp2 = {};\n          refreshToken = newRefreshToken((_tmp2.accessToken = accessToken, _tmp2.scope = scope, _tmp2)).refreshToken;\n          _tmp3 = {};\n          return [4, newUserDataToken((_tmp3.userId = data.user_id, _tmp3))];\n\n        case 5:\n          userDataToken = _state.sent();\n          setAuthenticationCookies(res, accessToken, refreshToken);\n          setUserCookie(res, userDataToken);\n          _state.label = 6;\n\n        case 6:\n          return [2];\n      }\n    });\n  });\n\n  return function (args, _, _1) {\n    return _ref.apply(this, arguments);\n  };\n}(), {\n  name: \"login\",\n  decorators: []\n});\nexport default login;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { fn } from \"./factory.js\";\nimport { COOKIE_OPTIONS, REFRESH_TOKEN_COOKIE_NAME, TOKEN_COOKIE_NAME, USER_DATA_TOKEN_NAME } from \"./constants.js\";\nimport loginRequired from \"./decorators/loginRequired.js\";\nvar logout = fn(function () {\n  var _ref = _asyncToGenerator(function (args, _, param) {\n    var res;\n    return __generator(this, function (_state) {\n      res = param.res;\n      res.clearCookie(TOKEN_COOKIE_NAME, COOKIE_OPTIONS);\n      res.clearCookie(REFRESH_TOKEN_COOKIE_NAME, COOKIE_OPTIONS);\n      res.clearCookie(USER_DATA_TOKEN_NAME, COOKIE_OPTIONS);\n      return [2];\n    });\n  });\n\n  return function (args, _, _1) {\n    return _ref.apply(this, arguments);\n  };\n}(), {\n  name: \"logout\",\n  decorators: [loginRequired]\n});\nexport default logout;","import { makeFn } from \"@snek-at/functions\";\nexport var url = process.env.IS_OFFLINE ? process.env.CODESPACE_NAME ? \"https://\".concat(process.env.CODESPACE_NAME, \"-4040.githubpreview.dev/graphql\") : \"http://localhost:4040/graphql\" : \"\".concat(process.env.ENDPOINT_URL_EMAIL);\nexport var fn = makeFn({\n  url: url\n});","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { fn } from \"./factory.js\";\nvar send = fn(function () {\n  var _ref = _asyncToGenerator(function (param, _, req) {\n    var email, subject, msg, sendMail, res, _tmp, _tmp1;\n\n    return __generator(this, function (_state) {\n      switch (_state.label) {\n        case 0:\n          email = param.email, subject = param.subject, msg = param.msg;\n          return [4, import(\"./internal/email.js\")];\n\n        case 1:\n          sendMail = _state.sent().sendMail;\n          _tmp = {};\n          _tmp1 = {};\n          return [4, sendMail((_tmp.from = \"\".concat((process.env.SMTP_SENDER, process.env.SMTP_USER)), _tmp.to = email, _tmp.subject = subject, _tmp.html = msg, _tmp), (_tmp1.host = \"\".concat(process.env.SMTP_HOST), _tmp1.port = \"\".concat(process.env.SMTP_PORT), _tmp1.secure = true, _tmp1.user = \"\".concat(process.env.SMTP_USER), _tmp1.password = \"\".concat(process.env.SMTP_PASSWORD), _tmp1))];\n\n        case 2:\n          res = _state.sent();\n          console.log(email);\n          console.log(msg);\n          console.log(res);\n          return [2];\n      }\n    });\n  });\n\n  return function (_1, _, req) {\n    return _ref.apply(this, arguments);\n  };\n}(), {\n  name: \"send\"\n});\nexport default send;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var f,\n      y,\n      t,\n      g,\n      _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { send } from \"@snek-functions/email\";\nimport { fn, url } from \"./factory.js\";\nvar signup = fn(function () {\n  var _ref = _asyncToGenerator(function (args, _, param) {\n    var res, newAccessToken, scope, _tmp, accessToken, _tmp1, emailRes, _tmp2;\n\n    return __generator(this, function (_state) {\n      switch (_state.label) {\n        case 0:\n          res = param.res;\n          return [4, import(\"./internal/token/factory.js\")];\n\n        case 1:\n          newAccessToken = _state.sent().newAccessToken;\n          _tmp = {};\n          scope = (_tmp.res1 = [\"read\", \"write\"], _tmp.res2 = [\"read\", \"write\"], _tmp);\n          _tmp1 = {};\n          accessToken = newAccessToken((_tmp1.subject = \"0\", _tmp1.data = args, _tmp1.scope = scope, _tmp1)).accessToken;\n          _tmp2 = {};\n          return [4, send.execute((_tmp2.email = args.email, _tmp2.subject = \"Confirm Signup\", _tmp2.msg = 'Please follow the link to complete your registration: \\n        <a href=\"'.concat(url.replace(\"/graphql\", \"/submit\"), \"?token=\").concat(accessToken, '\" target=\"_blank\">Confirm Registration</a>'), _tmp2))];\n\n        case 2:\n          emailRes = _state.sent();\n\n          if (emailRes.errors.length > 0) {\n            throw new Error(emailRes.errors[0].message);\n          }\n\n          return [2];\n      }\n    });\n  });\n\n  return function (args, _, _1) {\n    return _ref.apply(this, arguments);\n  };\n}(), {\n  name: \"signup\",\n  decorators: []\n});\nexport default signup;","import {ExperimentResolution} from './type.experiment'\n\nexport const BASE_ENDPOINT_URL = process.env.GATSBY_API_URL || '/api'\n\nexport enum Endpoint {\n  Experiment = '/experiments',\n  Experiments = '/experiments',\n  Login = '/login',\n  Register = '/signup'\n}\n\nexport enum Method {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n  DELETE = 'DELETE'\n}\n\nexport interface BaseApiFetchPayload<T> {\n  body?: T\n  endpoint: Endpoint\n  method: Method\n  params?: string\n  token?: string\n}\n\nexport interface GetExperimentResponse extends ExperimentResolution {}\n\nexport interface ResolutionType {}\n","import {jsonFetch, login, logout, signup} from '@snek-functions/origin'\n\nimport {\n  BaseApiFetchPayload,\n  BASE_ENDPOINT_URL,\n  Endpoint,\n  GetExperimentResponse,\n  Method\n} from './types/type.api'\nimport {LoginCredentials, RegisterCredentials} from './types/type.auth'\nimport {\n  CreateExperimentPayload,\n  ExperimentResolution\n} from './types/type.experiment'\n\n/**\n *\n * @param params\n * @param method\n * @param endpoint\n * @param stringifiedBody\n */\nasync function baseApiFetch<T>({\n  params,\n  method,\n  endpoint,\n  body\n}: BaseApiFetchPayload<T>) {\n  const url = `${BASE_ENDPOINT_URL}${endpoint}${params ? '/' + params : ''}`\n  const init = {\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzY29wZSI6WyJyZWFkIiwid3JpdGUiXSwiZnJlc2giOmZhbHNlLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNjYyNDQ1MTQzLCJleHAiOjE2NjI0NDU0NDMsImF1ZCI6IiIsImlzcyI6InNuZWstMCIsInN1YiI6IjEiLCJqdGkiOiI2NDk2MGQ1Yi1iMmVlLTQyNTctYTk5NC1iNTFmNDlmYTliN2YifQ.GHghLa0cEfICoYnLSfQab4vaHAZvx7t998EIO5OES34`\n    },\n    method,\n    body: JSON.stringify(body)\n  }\n\n  const response = await jsonFetch([url, JSON.stringify(init)])\n\n  console.log('response', response)\n\n  return response\n\n  // return fetch(`${BASE_ENDPOINT_URL}${endpoint}${params ? '/' + params : ''}`)\n}\n\n/**\n *\n * @param id\n */\nexport async function getExperiment(\n  id: string\n): Promise<GetExperimentResponse> {\n  const response = await baseApiFetch({\n    method: Method.GET,\n    params: id,\n    endpoint: Endpoint.Experiment\n  })\n  if (!response.ok) throw new Error('Could not get Experiment ' + id)\n  return response.json\n}\n\n/**\n *\n * @param id\n */\nexport async function getExperimentResult(id: string): Promise<any> {\n  const response = await baseApiFetch({\n    method: Method.GET,\n    params: `${id}/results`,\n    endpoint: Endpoint.Experiment\n  })\n  if (!response.ok)\n    throw new Error('Could not get full Experiment results' + id)\n  return response.json\n}\n\n/**\n *\n */\nexport async function getExperiments(): Promise<ExperimentResolution[]> {\n  const response = await baseApiFetch({\n    method: Method.GET,\n    endpoint: Endpoint.Experiments\n  })\n  if (!response.ok) throw new Error('Could not get Experiments')\n  return response.json\n}\n\n/**\n *\n * @param id\n * @param newExperiment\n */\nexport async function updateExperiment(\n  id: string,\n  newExperiment: CreateExperimentPayload\n): Promise<ExperimentResolution> {\n  await deleteExperiment(id)\n  return createExperiment(newExperiment)\n}\n\n/**\n *\n * @param id\n */\nexport async function deleteExperiment(id: string) {\n  const response = await baseApiFetch({\n    method: Method.DELETE,\n    params: id,\n    endpoint: Endpoint.Experiment\n  })\n  if (!response.ok) throw new Error('Could not delete Experiment: ' + id)\n  return response\n}\n\n/**\n *\n * @param experimentPayload\n */\nexport async function createExperiment(\n  experimentPayload: CreateExperimentPayload\n): Promise<ExperimentResolution> {\n  const response = await baseApiFetch<CreateExperimentPayload>({\n    method: Method.POST,\n    endpoint: Endpoint.Experiment,\n    body: experimentPayload\n  })\n  if (!response.ok) {\n    throw new Error('Could not create Experiment: ' + experimentPayload)\n  }\n  return response.json\n}\n\n/**\n *\n * @param credentials\n */\nexport async function loginWthUserNameAndPassword(\n  credentials: LoginCredentials\n) {\n  await login({\n    username: credentials.username,\n    password: credentials.password\n  })\n}\n\nexport async function logoutUser() {\n  await logout()\n}\n\n/**\n *\n * @param credentials\n */\nexport async function register(credentials: RegisterCredentials) {\n  await signup({\n    email: credentials.email,\n    password: credentials.password,\n    details: {firstName: credentials.firstName, lastName: credentials.lastName}\n  })\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","id","module","exports","getTypographyUtilityClass","slot","generateUtilityClass","_excluded","TypographyRoot","styled","name","overridesResolver","props","styles","ownerState","root","variant","align","concat","capitalize","noWrap","gutterBottom","paragraph","_ref","theme","margin","typography","textAlign","overflow","textOverflow","whiteSpace","marginBottom","defaultVariantMapping","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","colorTransformations","primary","textPrimary","secondary","textSecondary","error","inProps","ref","themeProps","useThemeProps","color","transformDeprecatedColors","extendSxProp","_props$align","className","component","_props$gutterBottom","_props$noWrap","_props$paragraph","_props$variant","_props$variantMapping","variantMapping","other","Component","classes","slots","composeClasses","useUtilityClasses","as","hadFocusVisibleRecentlyTimeout","hadKeyboardEvent","hadFocusVisibleRecently","inputTypesWhitelist","text","search","url","tel","email","password","number","date","month","week","time","datetime","handleKeyDown","event","metaKey","altKey","ctrlKey","handlePointerDown","handleVisibilityChange","this","visibilityState","isFocusVisible","node","type","tagName","target","matches","readOnly","isContentEditable","doc","ownerDocument","addEventListener","isFocusVisibleRef","onFocus","current","onBlur","window","clearTimeout","setTimeout","finalSx","inSx","sx","_splitProps","result","systemProps","otherProps","Object","forEach","prop","splitProps","Array","isArray","apply","arguments","setRef","value","useForkRef","refA","refB","refValue","stringify","data","JSON","map","key","join","buildGraphqlQueryString","args","argsQuery","query","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","from","test","_unsupportedIterableToArray","length","i","F","s","done","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","thisArg","_arguments","P","generator","reject","fulfilled","rejected","browserMakeFn","snekFunction","options","decorators","fn","_callee","_yield$fn$execute","errors","_context","prev","execute","sent","message","abrupt","stop","init","_callee2","snekApiHeaders","res","_yield$res$json","_context2","console","log","fetch","method","headers","assign","body","credentials","json","parse","t0","undefined","server","globalDecorators","_step","shouldSkipDecorator","decorator","includes","excludes","_iterator","_step$value","push","SHARED_SECRET","TOKEN_COOKIE_NAME","REFRESH_TOKEN_COOKIE_NAME","USER_DATA_TOKEN_NAME","LOGIN_COOKIE_DOMAIN","URL","hostname","LOGIN_TOKEN_COOKIE_MAX_AGE","LOGIN_REFRESH_TOKEN_COOKIE_MAX_AGE","COOKIE_OPTIONS","httpOnly","secure","sameSite","path","domain","IS_OFFLINE","CODESPACE_NAME","ENDPOINT_URL_ORIGIN","createDefinition","propNames","isEnabled","some","featureDefinitions","measureLayout","animation","exit","drag","focus","hover","tap","pan","layoutAnimation","LazyContext","createContext","strict","featureNames","numFeatures","MotionConfigContext","transformPagePoint","p","isStatic","MotionContext","useConstant","useRef","usePresence","context","useContext","isPresent","onExitComplete","register","useUniqueId","useEffect","counter","incrementId","LayoutGroupContext","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect","useVisualElement","visualState","createVisualElement","config","lazyContext","parent","visualElement","presenceContext","layoutId","_a","layoutGroupId","useLayoutId","visualElementRef","renderer","presenceId","blockInitialAnimation","initial","setProps","isPresenceRoot","syncRender","animationState","animateChanges","notifyUnmount","isRefObject","hasOwnProperty","isVariantLabels","v","isVariantLabel","resolveVariantFromProps","definition","custom","currentValues","currentVelocity","variants","resolveVariant","getProps","forEachValue","get","getCurrent","velocity","getVelocity","checkIfControllingVariants","animate","start","whileHover","whileDrag","whileTap","whileFocus","checkIfVariantNode","Boolean","useCreateMotionContext","getCurrentTreeVariants","useMemo","variantLabelsAsDependency","preloadedFeatures","useRender","useVisualState","features","loadFeatures","forwardRef","externalRef","name_1","useFeatures","Provider","useCallback","instance","mount","unmount","useMotionRef","createMotionProxy","createConfig","customMotionComponentConfig","componentCache","Map","Proxy","_target","has","set","lowercaseSVGElements","isSVGComponent","indexOf","valueScaleCorrection","transformAxes","transformProps","sortTransformProps","a","b","operationKey","axesKey","transformPropSet","Set","isTransformProp","transformOriginProps","isTransformOriginProp","isForcedMotionValue","layout","isMotionValue","translateAlias","x","y","z","transformPerspective","isCSSVariable","startsWith","getValueAsType","transform","clamp","min","max","Math","sanitize","Number","toFixed","floatRegex","colorRegex","singleColorRegex","isString","createUnitType","unit","endsWith","split","parseFloat","degrees","percent","px","vh","vw","progressPercentage","alpha","scale","default","round","numberValueTypes","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","size","top","right","bottom","left","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","marginTop","marginRight","marginLeft","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","perspective","opacity","originX","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","buildHTMLStyles","state","latestValues","projection","layoutState","transformTemplate","buildProjectionTransform","buildProjectionTransformOrigin","style","vars","transformKeys","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","isHydrated","correctedValue","process","applyTo","num","deltaFinal","treeScale","_b","transformIsDefault","_c","enableHardwareAcceleration","_d","allowTransformNone","transformString","sort","transformHasZ","numTransformKeys","trim","buildTransform","buildTransformOrigin","createHtmlRenderState","copyRawValuesOnly","source","useStyle","useInitialMotionValues","transformValues","useHTMLProps","htmlProps","draggable","userSelect","WebkitUserSelect","WebkitTouchCallout","touchAction","validMotionProps","isValidMotionProp","shouldForward","emotionIsPropValid_1","calcOrigin","origin","offset","progressToPixels","progress","dashKeys","array","camelKeys","buildSVGAttrs","attrX","attrY","pathLength","pathSpacing","pathOffset","attrs","dimensions","totalPathLength","calcSVGTransformOrigin","totalLength","spacing","useDashCase","buildSVGPath","createSvgRenderState","useSVGProps","visualProps","rawStyles","createUseRender","forwardMotionProps","filteredProps","isDom","filterProps","elementProps","createElement","CAMEL_CASE_PATTERN","camelToDash","str","replace","toLowerCase","renderHTML","element","setProperty","camelCaseAttributes","renderSVG","renderState","setAttribute","scrapeMotionValuesFromProps","newValues","toUpperCase","isAnimationControls","isKeyframesTarget","resolveMotionValue","unwrappedValue","mix","toValue","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","scrapeMotionValues","values","motionValues","isControllingVariants","isVariantNode","variantToSet","resolved","transitionEnd","transition","svgMotionConfig","getBBox","getBoundingClientRect","getTotalLength","AnimationType","htmlMotionConfig","addDomEvent","eventName","handler","removeEventListener","useDomEvent","isMouseEvent","PointerEvent","pointerType","MouseEvent","isTouchEvent","touches","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","point","changedTouches","pointFromMouse","extractEventInfo","wrapHandler","shouldFilterPrimaryPointer","eventHandler","listener","button","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","createHoverEvent","isActive","callback","info","setActive","Hover","isNodeOrChild","child","parentElement","useUnmountEffect","combineFunctions","pipe","transformers","_i","reduce","makeRenderlessComponent","hook","gestureAnimations","onTap","onTapStart","onTapCancel","hasPressListeners","isPressing","cancelPointerEndListeners","removePointerEndListener","checkPointerEnd","Tap","onPointerUp","getInstance","onPointerCancel","Focus","onHoverStart","onHoverEnd","shallowCompare","prevLength","safeMin","findSpring","envelope","derivative","duration","bounce","mass","maxDuration","dampingRatio","undampedFreq","exponentialDecay","delta","calcAngularFreq","c","exp","d","pow","g","initialGuess","approximateRoot","isNaN","stiffness","damping","sqrt","durationKeys","physicsKeys","isSpringType","spring","to","restSpeed","restDelta","springOptions","isResolvedFromDuration","derived","getSpringOptions","resolveSpring","zero","resolveVelocity","createSpring","initialVelocity","initialDelta","undampedAngularFreq","abs","angularFreq_1","t","sin","cos","dampedAngularFreq_1","freqForT","sinh","cosh","isBelowVelocityThreshold","isBelowDisplacementThreshold","flipTarget","needsInterpolation","_t","toFromDifference","isColorString","testProp","splitColor","aName","bName","cName","match","clampRgbUnit","rgbUnit","rgba","red","green","blue","alpha$1","hex","r","substr","parseInt","hsla","hue","saturation","lightness","mixLinearColor","fromExpo","toExpo","colorTypes","getColorType","find","notAnimatable","mixColor","fromColorType","toColorType","fromColor","toColor","blended","mixFunc","colorToken","numberToken","analyse","numColors","colors","numbers","tokenised","createTransformer","numValues","output","convertNumbersToZero","complex","getAnimatableNone","parsed","transformer","isNum","getMixer","mixComplex","mixArray","blendValue","fromThis","mixObject","numNumbers","numRGB","numHSL","template","originStats","targetStats","mixNumber","createMixers","ease","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","interpolate","input","isClamp","inputLength","reverse","interpolator","fastInterpolate","lastInputIndex","mixerIndex","foundMixerIndex","progressInRange","slowInterpolate","power","reverseEasing","easing","mirrorEasing","createBackIn","linear","easeIn","easeOut","easeInOut","circIn","acos","circOut","circInOut","backIn","backOut","backInOut","anticipate","backEasing","createAnticipate","bounceOut","p2","bounceIn","defaultEasing","splice","keyframes","times","convertOffsetToTimes","_value","defaultOffset","createInterpolator","types","decay","timeConstant","_f","modifyTarget","amplitude","ideal","loopElapsed","elapsed","delay","framesync","update","passTimestamp","driverControls","latest","interpolateFromNumber","autoplay","driver","_g","repeat","repeatMax","_h","repeatType","_j","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate","repeatCount","computedDuration","isComplete","isForwardPlayback","animator","detectAnimationFromOptions","reverseElapsed","hasRepeatDelayElapsed","velocityPerSecond","frameDuration","secondsToMilliseconds","seconds","a1","a2","calcBezier","getSlope","kSampleStepSize","cubicBezier","mX1","mY1","mX2","mY2","sampleValues","Float32Array","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","easingLookup","bounceInOut","easingDefinitionToFunction","isAnimatable","underDampedSpring","criticallyDampedSpring","linearTween","defaultTransitions","backgroundColor","maxDefaults","applyDefaultFilter","defaultValue","functionRegex","filter","functions","defaultValueTypes","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","WebkitFilter","getDefaultValueType","defaultValueType","legacyRepeatWarning","convertTransitionToAnimationOptions","yoyo","flip","loop","isEasingArray","getPopmotionAnimationOptions","valueKey","transitionFactory","hydrateKeyframes","when","delayChildren","staggerChildren","staggerDirection","isTransitionDefined","getAnimation","valueTransition","getValueTransition","isTargetAnimatable","isZero","getZeroUnit","isOriginAnimatable","currentAnimation","bounceStiffness","bounceDamping","_onUpdate","isOutOfBounds","boundaryNearest","startAnimation","startSpring","prev_1","current_1","boundary_1","heading_1","inertia","potentialUnitType","delayTimer","controls","getDelayFromTransition","addUniqueItem","item","removeItem","index","SubscriptionManager","subscriptions","add","_this","notify","numSubscriptions","getSize","clear","MotionValue","timeDelta","lastUpdated","updateSubscribers","velocityUpdateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","render","timestamp","scheduleVelocityCheck","velocityCheck","hasAnimated","onChange","subscription","clearListeners","onRenderRequest","attach","passiveEffect","getPrevious","stopAnimation","clearAnimation","isAnimating","destroy","motionValue","testValueType","dimensionValueTypes","findDimensionValueType","valueTypes","findValueType","setMotionValue","hasValue","getValue","addValue","setTarget","makeTargetAnimatable","getOriginFromTransition","animateVariant","getDefaultTransition","transitionOverride","animateTarget","getChildAnimations","variantChildren","forwardDelay","animations","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","notifyAnimationComplete","all","animateChildren","first","last","animationTypeState","getState","valueTarget","shouldBlockAnimation","sortNodePosition","protectedKeys","needsAnimating","shouldBlock","variantPriorityOrder","Animate","Drag","Exit","reversePriorityOrder","numAnimationTypes","animateList","notifyAnimationStart","resolvedDefinition","animateVisualElement","createAnimationState","createTypeState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","acc","changedActiveType","getVariantContext","removedKeys","encounteredKeys","removedVariantIndex","Infinity","_loop_1","typeState","propIsVariant","activeDelta","isInherited","manuallyAnimateOnMount","prevProp","shouldAnimateType","variantsHaveChanged","definitionList","resolvedValues","prevResolvedValues","allKeys","markToAnimate","delete","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","isAnimated","setAnimateFunction","makeAnimator","subscribe","isPoint","isPoint3D","distance1D","xDelta","yDelta","zDelta","PanSession","handlers","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","getPanInfo","history","isPanStarted","isDistancePastThreshold","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","end","onEnd","onSessionEnd","panInfo","initialInfo","onSessionStart","removeListeners","updateHandlers","subtractPoint","lastDevicePoint","startDevicePoint","timestampedPoint","lastPoint","noop","any","convertBoundingBoxToAxisBox","zeroDelta","translate","originPoint","eachAxis","applyConstraints","elastic","calcRelativeAxisConstraints","axis","calcViewportAxisConstraints","layoutAxis","constraintsAxis","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","getBoundingBox","topLeft","bottomRight","transformBoundingBox","isNear","maxDistance","calcLength","sourceLength","targetLength","updateAxisDelta","updateBoxDelta","defaultOrigin","calcRelativeAxis","relative","compareByDepth","depth","isProjecting","shouldResetTransform","collectProjectingAncestors","ancestors","updateLayoutMeasurement","box","getLayoutState","notifyBeforeLayoutMeasure","measureViewportBox","layoutCorrected","notifyLayoutMeasure","prevViewportBox","rebaseProjectionTarget","calcRelativeOffsetAxis","calcRelativeOffset","checkIfParentHasChanged","prevId","getLayoutId","nextId","isDraggable","_dragX","resetAxis","originAxis","scalePoint","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","applyBoxTransforms","finalBox","removePointDelta","removeAxisTransforms","removeAxisDelta","removeBoxTransforms","unresolvedJobs","pushJob","stack","job","pointer","batchLayout","flushLayout","reads","writes","setRead","setWrite","numStacks","executeJob","lastPointerEvent","elementDragControls","WeakMap","VisualElementDragControls","isDragging","currentDirection","constraints","hasMutatedConstraints","cursorProgress","openGlobalLock","panSession","enableLayoutProjection","originEvent","snapToCursor","stopMotion","initialPoint","getViewportPointFromEvent","cancelLayout","read","write","children","addChild","collectProjectingChildren","tree","hasManuallySetCursorOrigin","isLayoutDrag","lockProjectionTarget","resetTransform","restoreTransform","getAxisMotionValue","isExternalDrag","scheduleUpdateLayoutProjection","axisValue","resolveDragConstraints","dragPropagation","onDragStart","dragDirectionLock","lockThreshold","direction","getCurrentDirection","onDirectionLock","updateAxis","onDrag","dragConstraints","resolveRefConstraints","layoutBox","calcRelativeConstraints","resolveDragElastic","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","measuredConstraints","calcViewportConstraints","userConstraints","convertAxisBoxToBoundingBox","cancelDrag","unlockProjectionTarget","animateDragEnd","onDragEnd","shouldDrag","length_1","center","updateAxisMotionValue","updateVisualElementAxis","nextValue","axisLayout","axisLength","axisProgress","calcConstrainedMinPoint","setProjectionTargetAxis","dragMomentum","remainingProps","dragKey","_dragY","dragTransition","isRelative","projectionParent","getProjectionParent","getLatestValues","convertToRelativeProjection","relativeConstraints_1","targetFinal","momentumAnimations","startAxisValueAnimation","startLayoutAnimation","onDragTransitionEnd","stopLayoutAnimation","currentValue","boxProgress","updateConstraints","calcPositionFromProgress","onReady","stopPointerListener","dragListener","stopResizeListener","stopLayoutUpdateListener","onLayoutUpdate","prevDragCursor","Presence","VisibilityAction","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","groupDragControls","dragControls","cssVariableRegex","getVariableValue","exec","parseCSSVariable","token","fallback","getComputedStyle","getPropertyValue","pixelsToPercent","pixels","varToken","borderCorrectionDefinition","_layoutState","defaultScaleCorrectors","boxShadow","original","containsCSSVariables","cssVariables","shadow","xScale","yScale","averageScale","i_1","cssVariable","_super","frameTarget","currentAnimationTarget","stopAxisAnimation","isAnimatingTree","originBox","targetBox","visibilityAction","shouldStackAnimate","prevParent","safeToRemove","prevParentViewportBox","parentLayout","isProvidedCorrectDataForRelativeSharedLayout","boxHasMoved","hasMoved","isTargetLocked","animateAxis","setVisibility","Show","notifyLayoutAnimationComplete","componentDidMount","animateMotionValue","unsubLayoutReady","layoutSafeToRemove","correctors","addScaleCorrection","componentWillUnmount","axisIsEqual","layoutProgress","getProjectionAnimationProgress","frame","tweenAxis","unsubscribeProgress","layoutTransition","defaultLayoutTransition","isZeroBox","zeroAxis","defaultHandler","layoutReady","notifyLayoutReady","createBatcher","queue","flush","order","presence","Present","assignProjectionToSnapshot","SharedLayoutContext","FramerTreeLayoutContext","isSharedLayout","forceUpdate","Measure","syncLayout","framerSyncLayout","onUnmount","remove","getSnapshotBeforeUpdate","syncUpdate","snapshotViewportBox","componentDidUpdate","layoutAnimations","createLayoutState","deltaTransform","zeroLayout","buildLayoutProjectionTransform","latestTransform","identityProjection","buildLayoutProjectionTransformOrigin","names","updateLayoutDeltas","treePath","treeLength","applyTreeDeltas","FlatTree","isDirty","treeType","build","_getBaseTarget","_makeTargetAnimatable","_measureViewportBox","renderInstance","readValueFromInstance","_resetTransform","_restoreTransform","removeValueFromRenderState","_sortNodePosition","unsubscribeFromLeadVisualElement","crossfader","projectionTargetProgress","removeFromVariantTree","lifecycles","managers","propSubscriptions","clearAllListeners","manager","updatePropListeners","on","propListener","createLifecycles","leadProjection","leadLatestValues","hasViewportBoxUpdated","valueSubscriptions","prevMotionValues","baseTarget","isProjectionReady","triggerBuild","valuesToRender","crossfadedValues","getCrossfadeState","notifyUpdate","_updateTreeLayoutProjection","layoutTree","fireUpdateLayoutProjection","initialMotionValues","isVisible","isMounted","newInstance","pointTo","addVariantChild","updateLayoutProjection","closestVariantNode","getClosestVariantNode","updateTreeLayoutProjection","getStaticValue","setStaticValue","visibility","scheduleRender","canMutate","removeValue","removeOnChange","latestValue","removeOnRenderRequest","bindToMotionValue","readValue","setBaseTarget","newProps","prevValue","existingValue","updateMotionValuesFromProps","getVariant","startAtParent","context_1","numVariantProps","variantProps","setCrossfader","newCrossfader","relativeTarget","withTransform","viewportBox","notifySetAxisTarget","force","shouldRebase","relativeOffset","setCurrentViewportBox","notifyLayoutUpdate","prevTreeScaleX","prevTreeScaleY","prevDeltaTransform","notifyViewportBoxUpdate","fireResolveRelativeTargetBox","foundParent","ancestor","resolveRelativeTargetBox","relativeParent","parentProjection","calcRelativeBox","_layoutResetTransform","newLead","onSetAxisTarget","onLayoutAnimationComplete","Entering","BoundingBoxDimension","positionalKeys","isPositionalKey","setAndResetVelocity","isNumOrPxType","getPosFromMatrix","matrix","pos","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","nonTranslationalTransformKeys","positionalValues","checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","fromType","numKeyframes","removedTransforms","removeNonTranslationalTransform","convertedTarget","changedKeys","originBbox","elementComputedStyle","display","originComputedStyle","targetBbox","convertChangedValueTypes","unitConversion","hasPositionalKey","parseDomVariant","HTMLElement","resolveCSSVariables","htmlConfig","domElement","defaultType","computedStyle","compareDocumentPosition","mutableState","getOrigin","newValueKeys","numNewValues","targetValue","checkTargetForNewValues","isProjectionTranform","htmlVisualElement","svgVisualElement","getAttribute","_element","featureBundle","motion","baseConfig","reactPropsRegex","cache","arg","charCodeAt","SUPPORTED_LANGUAGES","checkLanguage","lang","getLangRootNavigationPath","nextPath","NavbarPadding","_jsx","asyncGeneratorStep","gen","_next","_throw","__generator","_","trys","ops","verb","op","pop","loginRequired","self","param","generateInternalToken","setAuthenticationCookies","setUserCookie","ref1","refreshTokens","verify","newUserDataToken","tokenCookie","refreshCookie","accessToken","refreshToken","userDataToken","newTokens","_tmp","_tmp1","_state","cookies","durration","userId","sub","authorization","ressourceId","_1","loginOptional","jsonFetch","fetchParams","proxiedRes","responseData","proxyRequest","ok","redirected","status","statusText","_asyncIterator","iterable","async","sync","retry","asyncIterator","AsyncFromSyncIterator","AsyncFromSyncIteratorContinuation","ret","throw","thr","ENDPOINT_URL_AUTHENTICATION","spawnChild","command","scriptName","_spawnChild","spawn","fileURLToPath","dirname","__filename","__dirname","scriptPath","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","chunk","_iteratorAbruptCompletion1","_didIteratorError1","_iteratorError1","_iterator1","_step1","_value1","chunk1","err1","exitCode","stdout","stderr","authenticate","username","userStr","user","hash","user_id","password_hash","login","newAccessToken","newRefreshToken","scope","_tmp2","_tmp3","res1","res2","subject","logout","clearCookie","ENDPOINT_URL_EMAIL","send","msg","sendMail","SMTP_USER","html","host","SMTP_HOST","port","SMTP_PORT","SMTP_PASSWORD","Endpoint","Method","signup","emailRes","BASE_ENDPOINT_URL","baseApiFetch","params","endpoint","Accept","Authorization","response","getExperiment","GET","Experiment","getExperimentResult","getExperiments","Experiments","deleteExperiment","DELETE","createExperiment","experimentPayload","POST","loginWthUserNameAndPassword","logoutUser","details","firstName","lastName","Constructor","__esModule","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps"],"sourceRoot":""}