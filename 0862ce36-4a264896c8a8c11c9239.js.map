{"version":3,"file":"0862ce36-4a264896c8a8c11c9239.js","mappings":"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","sources":["webpack://my-gatsby-site/./node_modules/@jaenjs/snek-finder/node_modules/@chakra-ui/transition/node_modules/framer-motion/dist/cjs/use-motion-value-4144a8cf.js"],"sourcesContent":["'use strict';\n\nvar tslib = require('tslib');\nvar React = require('react');\nvar heyListen = require('hey-listen');\nvar sync = require('framesync');\nvar popmotion = require('popmotion');\nvar styleValueTypes = require('style-value-types');\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function get() {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\nvar sync__default = /*#__PURE__*/_interopDefaultLegacy(sync);\nvar createDefinition = function createDefinition(propNames) {\n  return {\n    isEnabled: function isEnabled(props) {\n      return propNames.some(function (name) {\n        return !!props[name];\n      });\n    }\n  };\n};\nvar featureDefinitions = {\n  measureLayout: createDefinition([\"layout\", \"layoutId\", \"drag\"]),\n  animation: createDefinition([\"animate\", \"exit\", \"variants\", \"whileHover\", \"whileTap\", \"whileFocus\", \"whileDrag\", \"whileInView\"]),\n  exit: createDefinition([\"exit\"]),\n  drag: createDefinition([\"drag\", \"dragControls\"]),\n  focus: createDefinition([\"whileFocus\"]),\n  hover: createDefinition([\"whileHover\", \"onHoverStart\", \"onHoverEnd\"]),\n  tap: createDefinition([\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"]),\n  pan: createDefinition([\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"]),\n  inView: createDefinition([\"whileInView\", \"onViewportEnter\", \"onViewportLeave\"])\n};\nfunction loadFeatures(features) {\n  for (var key in features) {\n    if (features[key] === null) continue;\n    if (key === \"projectionNodeConstructor\") {\n      featureDefinitions.projectionNodeConstructor = features[key];\n    } else {\n      featureDefinitions[key].Component = features[key];\n    }\n  }\n}\nvar LazyContext = React.createContext({\n  strict: false\n});\nvar featureNames = Object.keys(featureDefinitions);\nvar numFeatures = featureNames.length;\n/**\n * Load features via renderless components based on the provided MotionProps.\n */\nfunction useFeatures(props, visualElement, preloadedFeatures) {\n  var features = [];\n  var lazyContext = React.useContext(LazyContext);\n  if (!visualElement) return null;\n  /**\n   * If we're in development mode, check to make sure we're not rendering a motion component\n   * as a child of LazyMotion, as this will break the file-size benefits of using it.\n   */\n  if (process.env.NODE_ENV !== \"production\" && preloadedFeatures && lazyContext.strict) {\n    heyListen.invariant(false, \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\");\n  }\n  for (var i = 0; i < numFeatures; i++) {\n    var name_1 = featureNames[i];\n    var _a = featureDefinitions[name_1],\n      isEnabled = _a.isEnabled,\n      Component = _a.Component;\n    /**\n     * It might be possible in the future to use this moment to\n     * dynamically request functionality. In initial tests this\n     * was producing a lot of duplication amongst bundles.\n     */\n    if (isEnabled(props) && Component) {\n      features.push(React__namespace.createElement(Component, tslib.__assign({\n        key: name_1\n      }, props, {\n        visualElement: visualElement\n      })));\n    }\n  }\n  return features;\n}\n\n/**\n * @public\n */\nvar MotionConfigContext = React.createContext({\n  transformPagePoint: function transformPagePoint(p) {\n    return p;\n  },\n  isStatic: false\n});\nvar MotionContext = React.createContext({});\nfunction useVisualElementContext() {\n  return React.useContext(MotionContext).visualElement;\n}\n\n/**\n * @public\n */\nvar PresenceContext = React.createContext(null);\nvar isBrowser = typeof window !== \"undefined\";\nvar useIsomorphicLayoutEffect = isBrowser ? React.useLayoutEffect : React.useEffect;\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n  var lazyContext = React.useContext(LazyContext);\n  var parent = useVisualElementContext();\n  var presenceContext = React.useContext(PresenceContext);\n  var visualElementRef = React.useRef(undefined);\n  /**\n   * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n   */\n  if (!createVisualElement) createVisualElement = lazyContext.renderer;\n  if (!visualElementRef.current && createVisualElement) {\n    visualElementRef.current = createVisualElement(Component, {\n      visualState: visualState,\n      parent: parent,\n      props: props,\n      presenceId: presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id,\n      blockInitialAnimation: (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false\n    });\n  }\n  var visualElement = visualElementRef.current;\n  useIsomorphicLayoutEffect(function () {\n    visualElement === null || visualElement === void 0 ? void 0 : visualElement.syncRender();\n  });\n  React.useEffect(function () {\n    var _a;\n    (_a = visualElement === null || visualElement === void 0 ? void 0 : visualElement.animationState) === null || _a === void 0 ? void 0 : _a.animateChanges();\n  });\n  useIsomorphicLayoutEffect(function () {\n    return function () {\n      return visualElement === null || visualElement === void 0 ? void 0 : visualElement.notifyUnmount();\n    };\n  }, []);\n  return visualElement;\n}\nfunction isRefObject(ref) {\n  return typeof ref === \"object\" && Object.prototype.hasOwnProperty.call(ref, \"current\");\n}\n\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nfunction useMotionRef(visualState, visualElement, externalRef) {\n  return React.useCallback(function (instance) {\n    var _a;\n    instance && ((_a = visualState.mount) === null || _a === void 0 ? void 0 : _a.call(visualState, instance));\n    if (visualElement) {\n      instance ? visualElement.mount(instance) : visualElement.unmount();\n    }\n    if (externalRef) {\n      if (typeof externalRef === \"function\") {\n        externalRef(instance);\n      } else if (isRefObject(externalRef)) {\n        externalRef.current = instance;\n      }\n    }\n  },\n  /**\n   * Only pass a new ref callback to React if we've received a visual element\n   * factory. Otherwise we'll be mounting/remounting every time externalRef\n   * or other dependencies change.\n   */\n  [visualElement]);\n}\n\n/**\n * Decides if the supplied variable is an array of variant labels\n */\nfunction isVariantLabels(v) {\n  return Array.isArray(v);\n}\n/**\n * Decides if the supplied variable is variant label\n */\nfunction isVariantLabel(v) {\n  return typeof v === \"string\" || isVariantLabels(v);\n}\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\nfunction getCurrent(visualElement) {\n  var current = {};\n  visualElement.forEachValue(function (value, key) {\n    return current[key] = value.get();\n  });\n  return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\nfunction getVelocity(visualElement) {\n  var velocity = {};\n  visualElement.forEachValue(function (value, key) {\n    return velocity[key] = value.getVelocity();\n  });\n  return velocity;\n}\nfunction resolveVariantFromProps(props, definition, custom, currentValues, currentVelocity) {\n  var _a;\n  if (currentValues === void 0) {\n    currentValues = {};\n  }\n  if (currentVelocity === void 0) {\n    currentVelocity = {};\n  }\n  /**\n   * If the variant definition is a function, resolve.\n   */\n  if (typeof definition === \"function\") {\n    definition = definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity);\n  }\n  /**\n   * If the variant definition is a variant label, or\n   * the function returned a variant label, resolve.\n   */\n  if (typeof definition === \"string\") {\n    definition = (_a = props.variants) === null || _a === void 0 ? void 0 : _a[definition];\n  }\n  /**\n   * At this point we've resolved both functions and variant labels,\n   * but the resolved variant label might itself have been a function.\n   * If so, resolve. This can only have returned a valid target object.\n   */\n  if (typeof definition === \"function\") {\n    definition = definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity);\n  }\n  return definition;\n}\nfunction resolveVariant(visualElement, definition, custom) {\n  var props = visualElement.getProps();\n  return resolveVariantFromProps(props, definition, custom !== null && custom !== void 0 ? custom : props.custom, getCurrent(visualElement), getVelocity(visualElement));\n}\nfunction checkIfControllingVariants(props) {\n  var _a;\n  return typeof ((_a = props.animate) === null || _a === void 0 ? void 0 : _a.start) === \"function\" || isVariantLabel(props.initial) || isVariantLabel(props.animate) || isVariantLabel(props.whileHover) || isVariantLabel(props.whileDrag) || isVariantLabel(props.whileTap) || isVariantLabel(props.whileFocus) || isVariantLabel(props.exit);\n}\nfunction checkIfVariantNode(props) {\n  return Boolean(checkIfControllingVariants(props) || props.variants);\n}\nfunction getCurrentTreeVariants(props, context) {\n  if (checkIfControllingVariants(props)) {\n    var initial = props.initial,\n      animate = props.animate;\n    return {\n      initial: initial === false || isVariantLabel(initial) ? initial : undefined,\n      animate: isVariantLabel(animate) ? animate : undefined\n    };\n  }\n  return props.inherit !== false ? context : {};\n}\nfunction useCreateMotionContext(props) {\n  var _a = getCurrentTreeVariants(props, React.useContext(MotionContext)),\n    initial = _a.initial,\n    animate = _a.animate;\n  return React.useMemo(function () {\n    return {\n      initial: initial,\n      animate: animate\n    };\n  }, [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)]);\n}\nfunction variantLabelsAsDependency(prop) {\n  return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n  var ref = React.useRef(null);\n  if (ref.current === null) {\n    ref.current = init();\n  }\n  return ref.current;\n}\nfunction addUniqueItem(arr, item) {\n  arr.indexOf(item) === -1 && arr.push(item);\n}\nfunction removeItem(arr, item) {\n  var index = arr.indexOf(item);\n  index > -1 && arr.splice(index, 1);\n}\n// Adapted from array-move\nfunction moveItem(_a, fromIndex, toIndex) {\n  var _b = tslib.__read(_a),\n    arr = _b.slice(0);\n  var startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n  if (startIndex >= 0 && startIndex < arr.length) {\n    var endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n    var _c = tslib.__read(arr.splice(fromIndex, 1), 1),\n      item = _c[0];\n    arr.splice(endIndex, 0, item);\n  }\n  return arr;\n}\nvar SubscriptionManager = /** @class */function () {\n  function SubscriptionManager() {\n    this.subscriptions = [];\n  }\n  SubscriptionManager.prototype.add = function (handler) {\n    var _this = this;\n    addUniqueItem(this.subscriptions, handler);\n    return function () {\n      return removeItem(_this.subscriptions, handler);\n    };\n  };\n  SubscriptionManager.prototype.notify = function (a, b, c) {\n    var numSubscriptions = this.subscriptions.length;\n    if (!numSubscriptions) return;\n    if (numSubscriptions === 1) {\n      /**\n       * If there's only a single handler we can just call it without invoking a loop.\n       */\n      this.subscriptions[0](a, b, c);\n    } else {\n      for (var i = 0; i < numSubscriptions; i++) {\n        /**\n         * Check whether the handler exists before firing as it's possible\n         * the subscriptions were modified during this loop running.\n         */\n        var handler = this.subscriptions[i];\n        handler && handler(a, b, c);\n      }\n    }\n  };\n  SubscriptionManager.prototype.getSize = function () {\n    return this.subscriptions.length;\n  };\n  SubscriptionManager.prototype.clear = function () {\n    this.subscriptions.length = 0;\n  };\n  return SubscriptionManager;\n}();\nvar isFloat = function isFloat(value) {\n  return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nvar MotionValue = /** @class */function () {\n  /**\n   * @param init - The initiating value\n   * @param config - Optional configuration options\n   *\n   * -  `transformer`: A function to transform incoming values with.\n   *\n   * @internal\n   */\n  function MotionValue(init) {\n    var _this = this;\n    /**\n     * Duration, in milliseconds, since last updating frame.\n     *\n     * @internal\n     */\n    this.timeDelta = 0;\n    /**\n     * Timestamp of the last time this `MotionValue` was updated.\n     *\n     * @internal\n     */\n    this.lastUpdated = 0;\n    /**\n     * Functions to notify when the `MotionValue` updates.\n     *\n     * @internal\n     */\n    this.updateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the velocity updates.\n     *\n     * @internal\n     */\n    this.velocityUpdateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n     *\n     * @internal\n     */\n    this.renderSubscribers = new SubscriptionManager();\n    /**\n     * Tracks whether this value can output a velocity. Currently this is only true\n     * if the value is numerical, but we might be able to widen the scope here and support\n     * other value types.\n     *\n     * @internal\n     */\n    this.canTrackVelocity = false;\n    this.updateAndNotify = function (v, render) {\n      if (render === void 0) {\n        render = true;\n      }\n      _this.prev = _this.current;\n      _this.current = v;\n      // Update timestamp\n      var _a = sync.getFrameData(),\n        delta = _a.delta,\n        timestamp = _a.timestamp;\n      if (_this.lastUpdated !== timestamp) {\n        _this.timeDelta = delta;\n        _this.lastUpdated = timestamp;\n        sync__default[\"default\"].postRender(_this.scheduleVelocityCheck);\n      }\n      // Update update subscribers\n      if (_this.prev !== _this.current) {\n        _this.updateSubscribers.notify(_this.current);\n      }\n      // Update velocity subscribers\n      if (_this.velocityUpdateSubscribers.getSize()) {\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n      // Update render subscribers\n      if (render) {\n        _this.renderSubscribers.notify(_this.current);\n      }\n    };\n    /**\n     * Schedule a velocity check for the next frame.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n    this.scheduleVelocityCheck = function () {\n      return sync__default[\"default\"].postRender(_this.velocityCheck);\n    };\n    /**\n     * Updates `prev` with `current` if the value hasn't been updated this frame.\n     * This ensures velocity calculations return `0`.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n    this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n    };\n    this.hasAnimated = false;\n    this.prev = this.current = init;\n    this.canTrackVelocity = isFloat(this.current);\n  }\n  /**\n   * Adds a function that will be notified when the `MotionValue` is updated.\n   *\n   * It returns a function that, when called, will cancel the subscription.\n   *\n   * When calling `onChange` inside a React component, it should be wrapped with the\n   * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n   * from the `useEffect` function to ensure you don't add duplicate subscribers..\n   *\n   * ```jsx\n   * export const MyComponent = () => {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <motion.div style={{ x }} />\n   * }\n   * ```\n   *\n   * @internalremarks\n   *\n   * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n   *\n   * ```jsx\n   * useOnChange(x, () => {})\n   * ```\n   *\n   * @param subscriber - A function that receives the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @public\n   */\n  MotionValue.prototype.onChange = function (subscription) {\n    return this.updateSubscribers.add(subscription);\n  };\n  MotionValue.prototype.clearListeners = function () {\n    this.updateSubscribers.clear();\n  };\n  /**\n   * Adds a function that will be notified when the `MotionValue` requests a render.\n   *\n   * @param subscriber - A function that's provided the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @internal\n   */\n  MotionValue.prototype.onRenderRequest = function (subscription) {\n    // Render immediately\n    subscription(this.get());\n    return this.renderSubscribers.add(subscription);\n  };\n  /**\n   * Attaches a passive effect to the `MotionValue`.\n   *\n   * @internal\n   */\n  MotionValue.prototype.attach = function (passiveEffect) {\n    this.passiveEffect = passiveEffect;\n  };\n  /**\n   * Sets the state of the `MotionValue`.\n   *\n   * @remarks\n   *\n   * ```jsx\n   * const x = useMotionValue(0)\n   * x.set(10)\n   * ```\n   *\n   * @param latest - Latest value to set.\n   * @param render - Whether to notify render subscribers. Defaults to `true`\n   *\n   * @public\n   */\n  MotionValue.prototype.set = function (v, render) {\n    if (render === void 0) {\n      render = true;\n    }\n    if (!render || !this.passiveEffect) {\n      this.updateAndNotify(v, render);\n    } else {\n      this.passiveEffect(v, this.updateAndNotify);\n    }\n  };\n  /**\n   * Returns the latest state of `MotionValue`\n   *\n   * @returns - The latest state of `MotionValue`\n   *\n   * @public\n   */\n  MotionValue.prototype.get = function () {\n    return this.current;\n  };\n  /**\n   * @public\n   */\n  MotionValue.prototype.getPrevious = function () {\n    return this.prev;\n  };\n  /**\n   * Returns the latest velocity of `MotionValue`\n   *\n   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n   *\n   * @public\n   */\n  MotionValue.prototype.getVelocity = function () {\n    // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n    return this.canTrackVelocity ?\n    // These casts could be avoided if parseFloat would be typed better\n    popmotion.velocityPerSecond(parseFloat(this.current) - parseFloat(this.prev), this.timeDelta) : 0;\n  };\n  /**\n   * Registers a new animation to control this `MotionValue`. Only one\n   * animation can drive a `MotionValue` at one time.\n   *\n   * ```jsx\n   * value.start()\n   * ```\n   *\n   * @param animation - A function that starts the provided animation\n   *\n   * @internal\n   */\n  MotionValue.prototype.start = function (animation) {\n    var _this = this;\n    this.stop();\n    return new Promise(function (resolve) {\n      _this.hasAnimated = true;\n      _this.stopAnimation = animation(resolve);\n    }).then(function () {\n      return _this.clearAnimation();\n    });\n  };\n  /**\n   * Stop the currently active animation.\n   *\n   * @public\n   */\n  MotionValue.prototype.stop = function () {\n    if (this.stopAnimation) this.stopAnimation();\n    this.clearAnimation();\n  };\n  /**\n   * Returns `true` if this value is currently animating.\n   *\n   * @public\n   */\n  MotionValue.prototype.isAnimating = function () {\n    return !!this.stopAnimation;\n  };\n  MotionValue.prototype.clearAnimation = function () {\n    this.stopAnimation = null;\n  };\n  /**\n   * Destroy and clean up subscribers to this `MotionValue`.\n   *\n   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n   * created a `MotionValue` via the `motionValue` function.\n   *\n   * @public\n   */\n  MotionValue.prototype.destroy = function () {\n    this.updateSubscribers.clear();\n    this.renderSubscribers.clear();\n    this.stop();\n  };\n  return MotionValue;\n}();\n/**\n * @internal\n */\nfunction motionValue(init) {\n  return new MotionValue(init);\n}\nvar isMotionValue = function isMotionValue(value) {\n  return Boolean(value !== null && typeof value === \"object\" && value.getVelocity);\n};\n\n/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function secondsToMilliseconds(seconds) {\n  return seconds * 1000;\n};\nvar easingLookup = {\n  linear: popmotion.linear,\n  easeIn: popmotion.easeIn,\n  easeInOut: popmotion.easeInOut,\n  easeOut: popmotion.easeOut,\n  circIn: popmotion.circIn,\n  circInOut: popmotion.circInOut,\n  circOut: popmotion.circOut,\n  backIn: popmotion.backIn,\n  backInOut: popmotion.backInOut,\n  backOut: popmotion.backOut,\n  anticipate: popmotion.anticipate,\n  bounceIn: popmotion.bounceIn,\n  bounceInOut: popmotion.bounceInOut,\n  bounceOut: popmotion.bounceOut\n};\nvar easingDefinitionToFunction = function easingDefinitionToFunction(definition) {\n  if (Array.isArray(definition)) {\n    // If cubic bezier definition, create bezier curve\n    heyListen.invariant(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n    var _a = tslib.__read(definition, 4),\n      x1 = _a[0],\n      y1 = _a[1],\n      x2 = _a[2],\n      y2 = _a[3];\n    return popmotion.cubicBezier(x1, y1, x2, y2);\n  } else if (typeof definition === \"string\") {\n    // Else lookup from table\n    heyListen.invariant(easingLookup[definition] !== undefined, \"Invalid easing type '\".concat(definition, \"'\"));\n    return easingLookup[definition];\n  }\n  return definition;\n};\nvar isEasingArray = function isEasingArray(ease) {\n  return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nvar isAnimatable = function isAnimatable(key, value) {\n  // If the list of keys tat might be non-animatable grows, replace with Set\n  if (key === \"zIndex\") return false;\n  // If it's a number or a keyframes array, we can animate it. We might at some point\n  // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n  // but for now lets leave it like this for performance reasons\n  if (typeof value === \"number\" || Array.isArray(value)) return true;\n  if (typeof value === \"string\" &&\n  // It's animatable if we have a string\n  styleValueTypes.complex.test(value) &&\n  // And it contains numbers and/or colors\n  !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n  ) {\n    return true;\n  }\n  return false;\n};\nvar isKeyframesTarget = function isKeyframesTarget(v) {\n  return Array.isArray(v);\n};\nvar underDampedSpring = function underDampedSpring() {\n  return {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restSpeed: 10\n  };\n};\nvar criticallyDampedSpring = function criticallyDampedSpring(to) {\n  return {\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restSpeed: 10\n  };\n};\nvar linearTween = function linearTween() {\n  return {\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3\n  };\n};\nvar keyframes = function keyframes(values) {\n  return {\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values\n  };\n};\nvar defaultTransitions = {\n  x: underDampedSpring,\n  y: underDampedSpring,\n  z: underDampedSpring,\n  rotate: underDampedSpring,\n  rotateX: underDampedSpring,\n  rotateY: underDampedSpring,\n  rotateZ: underDampedSpring,\n  scaleX: criticallyDampedSpring,\n  scaleY: criticallyDampedSpring,\n  scale: criticallyDampedSpring,\n  opacity: linearTween,\n  backgroundColor: linearTween,\n  color: linearTween,\n  default: criticallyDampedSpring\n};\nvar getDefaultTransition = function getDefaultTransition(valueKey, to) {\n  var transitionFactory;\n  if (isKeyframesTarget(to)) {\n    transitionFactory = keyframes;\n  } else {\n    transitionFactory = defaultTransitions[valueKey] || defaultTransitions.default;\n  }\n  return tslib.__assign({\n    to: to\n  }, transitionFactory(to));\n};\nvar int = tslib.__assign(tslib.__assign({}, styleValueTypes.number), {\n  transform: Math.round\n});\nvar numberValueTypes = {\n  // Border props\n  borderWidth: styleValueTypes.px,\n  borderTopWidth: styleValueTypes.px,\n  borderRightWidth: styleValueTypes.px,\n  borderBottomWidth: styleValueTypes.px,\n  borderLeftWidth: styleValueTypes.px,\n  borderRadius: styleValueTypes.px,\n  radius: styleValueTypes.px,\n  borderTopLeftRadius: styleValueTypes.px,\n  borderTopRightRadius: styleValueTypes.px,\n  borderBottomRightRadius: styleValueTypes.px,\n  borderBottomLeftRadius: styleValueTypes.px,\n  // Positioning props\n  width: styleValueTypes.px,\n  maxWidth: styleValueTypes.px,\n  height: styleValueTypes.px,\n  maxHeight: styleValueTypes.px,\n  size: styleValueTypes.px,\n  top: styleValueTypes.px,\n  right: styleValueTypes.px,\n  bottom: styleValueTypes.px,\n  left: styleValueTypes.px,\n  // Spacing props\n  padding: styleValueTypes.px,\n  paddingTop: styleValueTypes.px,\n  paddingRight: styleValueTypes.px,\n  paddingBottom: styleValueTypes.px,\n  paddingLeft: styleValueTypes.px,\n  margin: styleValueTypes.px,\n  marginTop: styleValueTypes.px,\n  marginRight: styleValueTypes.px,\n  marginBottom: styleValueTypes.px,\n  marginLeft: styleValueTypes.px,\n  // Transform props\n  rotate: styleValueTypes.degrees,\n  rotateX: styleValueTypes.degrees,\n  rotateY: styleValueTypes.degrees,\n  rotateZ: styleValueTypes.degrees,\n  scale: styleValueTypes.scale,\n  scaleX: styleValueTypes.scale,\n  scaleY: styleValueTypes.scale,\n  scaleZ: styleValueTypes.scale,\n  skew: styleValueTypes.degrees,\n  skewX: styleValueTypes.degrees,\n  skewY: styleValueTypes.degrees,\n  distance: styleValueTypes.px,\n  translateX: styleValueTypes.px,\n  translateY: styleValueTypes.px,\n  translateZ: styleValueTypes.px,\n  x: styleValueTypes.px,\n  y: styleValueTypes.px,\n  z: styleValueTypes.px,\n  perspective: styleValueTypes.px,\n  transformPerspective: styleValueTypes.px,\n  opacity: styleValueTypes.alpha,\n  originX: styleValueTypes.progressPercentage,\n  originY: styleValueTypes.progressPercentage,\n  originZ: styleValueTypes.px,\n  // Misc\n  zIndex: int,\n  // SVG\n  fillOpacity: styleValueTypes.alpha,\n  strokeOpacity: styleValueTypes.alpha,\n  numOctaves: int\n};\n\n/**\n * A map of default value types for common values\n */\nvar defaultValueTypes = tslib.__assign(tslib.__assign({}, numberValueTypes), {\n  // Color props\n  color: styleValueTypes.color,\n  backgroundColor: styleValueTypes.color,\n  outlineColor: styleValueTypes.color,\n  fill: styleValueTypes.color,\n  stroke: styleValueTypes.color,\n  // Border props\n  borderColor: styleValueTypes.color,\n  borderTopColor: styleValueTypes.color,\n  borderRightColor: styleValueTypes.color,\n  borderBottomColor: styleValueTypes.color,\n  borderLeftColor: styleValueTypes.color,\n  filter: styleValueTypes.filter,\n  WebkitFilter: styleValueTypes.filter\n});\n/**\n * Gets the default ValueType for the provided value key\n */\nvar getDefaultValueType = function getDefaultValueType(key) {\n  return defaultValueTypes[key];\n};\nfunction getAnimatableNone(key, value) {\n  var _a;\n  var defaultValueType = getDefaultValueType(key);\n  if (defaultValueType !== styleValueTypes.filter) defaultValueType = styleValueTypes.complex;\n  // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n  return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\nvar instantAnimationState = {\n  current: false\n};\nvar isCustomValue = function isCustomValue(v) {\n  return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nvar resolveFinalValueInKeyframes = function resolveFinalValueInKeyframes(v) {\n  // TODO maybe throw if v.length - 1 is placeholder token?\n  return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined(_a) {\n  _a.when;\n  _a.delay;\n  _a.delayChildren;\n  _a.staggerChildren;\n  _a.staggerDirection;\n  _a.repeat;\n  _a.repeatType;\n  _a.repeatDelay;\n  _a.from;\n  var transition = tslib.__rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n  return !!Object.keys(transition).length;\n}\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\nfunction convertTransitionToAnimationOptions(_a) {\n  var ease = _a.ease,\n    times = _a.times,\n    yoyo = _a.yoyo,\n    flip = _a.flip,\n    loop = _a.loop,\n    transition = tslib.__rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n  var options = tslib.__assign({}, transition);\n  if (times) options[\"offset\"] = times;\n  /**\n   * Convert any existing durations from seconds to milliseconds\n   */\n  if (transition.duration) options[\"duration\"] = secondsToMilliseconds(transition.duration);\n  if (transition.repeatDelay) options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n  /**\n   * Map easing names to Popmotion's easing functions\n   */\n  if (ease) {\n    options[\"ease\"] = isEasingArray(ease) ? ease.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease);\n  }\n  /**\n   * Support legacy transition API\n   */\n  if (transition.type === \"tween\") options.type = \"keyframes\";\n  /**\n   * TODO: These options are officially removed from the API.\n   */\n  if (yoyo || loop || flip) {\n    heyListen.warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n    legacyRepeatWarning = true;\n    if (yoyo) {\n      options.repeatType = \"reverse\";\n    } else if (loop) {\n      options.repeatType = \"loop\";\n    } else if (flip) {\n      options.repeatType = \"mirror\";\n    }\n    options.repeat = loop || yoyo || flip || transition.repeat;\n  }\n  /**\n   * TODO: Popmotion 9 has the ability to automatically detect whether to use\n   * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n   * It'd be good to introduce a similar thing here.\n   */\n  if (transition.type !== \"spring\") options.type = \"keyframes\";\n  return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\nfunction getDelayFromTransition(transition, key) {\n  var _a, _b;\n  var valueTransition = getValueTransition(transition, key) || {};\n  return (_b = (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : transition.delay) !== null && _b !== void 0 ? _b : 0;\n}\nfunction hydrateKeyframes(options) {\n  if (Array.isArray(options.to) && options.to[0] === null) {\n    options.to = tslib.__spreadArray([], tslib.__read(options.to), false);\n    options.to[0] = options.from;\n  }\n  return options;\n}\nfunction getPopmotionAnimationOptions(transition, options, key) {\n  var _a;\n  if (Array.isArray(options.to)) {\n    (_a = transition.duration) !== null && _a !== void 0 ? _a : transition.duration = 0.8;\n  }\n  hydrateKeyframes(options);\n  /**\n   * Get a default transition if none is determined to be defined.\n   */\n  if (!isTransitionDefined(transition)) {\n    transition = tslib.__assign(tslib.__assign({}, transition), getDefaultTransition(key, options.to));\n  }\n  return tslib.__assign(tslib.__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\nfunction getAnimation(key, value, target, transition, onComplete) {\n  var _a;\n  var valueTransition = getValueTransition(transition, key);\n  var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n  var isTargetAnimatable = isAnimatable(key, target);\n  if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n    /**\n     * If we're trying to animate from \"none\", try and get an animatable version\n     * of the target. This could be improved to work both ways.\n     */\n    origin = getAnimatableNone(key, target);\n  } else if (isZero(origin) && typeof target === \"string\") {\n    origin = getZeroUnit(target);\n  } else if (!Array.isArray(target) && isZero(target) && typeof origin === \"string\") {\n    target = getZeroUnit(origin);\n  }\n  var isOriginAnimatable = isAnimatable(key, origin);\n  heyListen.warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \".concat(key, \" from \\\"\").concat(origin, \"\\\" to \\\"\").concat(target, \"\\\". \").concat(origin, \" is not an animatable value - to enable this animation set \").concat(origin, \" to a value animatable to \").concat(target, \" via the `style` property.\"));\n  function start() {\n    var options = {\n      from: origin,\n      to: target,\n      velocity: value.getVelocity(),\n      onComplete: onComplete,\n      onUpdate: function onUpdate(v) {\n        return value.set(v);\n      }\n    };\n    return valueTransition.type === \"inertia\" || valueTransition.type === \"decay\" ? popmotion.inertia(tslib.__assign(tslib.__assign({}, options), valueTransition)) : popmotion.animate(tslib.__assign(tslib.__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), {\n      onUpdate: function onUpdate(v) {\n        var _a;\n        options.onUpdate(v);\n        (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n      },\n      onComplete: function onComplete() {\n        var _a;\n        options.onComplete();\n        (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n      }\n    }));\n  }\n  function set() {\n    var _a, _b;\n    var finalTarget = resolveFinalValueInKeyframes(target);\n    value.set(finalTarget);\n    onComplete();\n    (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, finalTarget);\n    (_b = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _b === void 0 ? void 0 : _b.call(valueTransition);\n    return {\n      stop: function stop() {}\n    };\n  }\n  return !isOriginAnimatable || !isTargetAnimatable || valueTransition.type === false ? set : start;\n}\nfunction isZero(value) {\n  return value === 0 || typeof value === \"string\" && parseFloat(value) === 0 && value.indexOf(\" \") === -1;\n}\nfunction getZeroUnit(potentialUnitType) {\n  return typeof potentialUnitType === \"number\" ? 0 : getAnimatableNone(\"\", potentialUnitType);\n}\nfunction getValueTransition(transition, key) {\n  return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\nfunction startAnimation(key, value, target, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n  if (instantAnimationState.current) {\n    transition = {\n      type: false\n    };\n  }\n  return value.start(function (onComplete) {\n    var delayTimer;\n    var controls;\n    var animation = getAnimation(key, value, target, transition, onComplete);\n    var delay = getDelayFromTransition(transition, key);\n    var start = function start() {\n      return controls = animation();\n    };\n    if (delay) {\n      delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n    } else {\n      start();\n    }\n    return function () {\n      clearTimeout(delayTimer);\n      controls === null || controls === void 0 ? void 0 : controls.stop();\n    };\n  });\n}\n\n/**\n * Animate a single value or a `MotionValue`.\n *\n * The first argument is either a `MotionValue` to animate, or an initial animation value.\n *\n * The second is either a value to animate to, or an array of keyframes to animate through.\n *\n * The third argument can be either tween or spring options, and optional lifecycle methods: `onUpdate`, `onPlay`, `onComplete`, `onRepeat` and `onStop`.\n *\n * Returns `AnimationPlaybackControls`, currently just a `stop` method.\n *\n * ```javascript\n * const x = useMotionValue(0)\n *\n * useEffect(() => {\n *   const controls = animate(x, 100, {\n *     type: \"spring\",\n *     stiffness: 2000,\n *     onComplete: v => {}\n *   })\n *\n *   return controls.stop\n * })\n * ```\n *\n * @public\n */\nfunction animate(from, to, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n  var value = isMotionValue(from) ? from : motionValue(from);\n  startAnimation(\"\", value, to, transition);\n  return {\n    stop: function stop() {\n      return value.stop();\n    },\n    isAnimating: function isAnimating() {\n      return value.isAnimating();\n    }\n  };\n}\nvar borders = [\"TopLeft\", \"TopRight\", \"BottomLeft\", \"BottomRight\"];\nvar numBorders = borders.length;\nvar asNumber = function asNumber(value) {\n  return typeof value === \"string\" ? parseFloat(value) : value;\n};\nvar isPx = function isPx(value) {\n  return typeof value === \"number\" || styleValueTypes.px.test(value);\n};\nfunction mixValues(target, follow, lead, progress, shouldCrossfadeOpacity, isOnlyMember) {\n  var _a, _b, _c, _d;\n  if (shouldCrossfadeOpacity) {\n    target.opacity = popmotion.mix(0,\n    // (follow?.opacity as number) ?? 0,\n    // TODO Reinstate this if only child\n    (_a = lead.opacity) !== null && _a !== void 0 ? _a : 1, easeCrossfadeIn(progress));\n    target.opacityExit = popmotion.mix((_b = follow.opacity) !== null && _b !== void 0 ? _b : 1, 0, easeCrossfadeOut(progress));\n  } else if (isOnlyMember) {\n    target.opacity = popmotion.mix((_c = follow.opacity) !== null && _c !== void 0 ? _c : 1, (_d = lead.opacity) !== null && _d !== void 0 ? _d : 1, progress);\n  }\n  /**\n   * Mix border radius\n   */\n  for (var i = 0; i < numBorders; i++) {\n    var borderLabel = \"border\".concat(borders[i], \"Radius\");\n    var followRadius = getRadius(follow, borderLabel);\n    var leadRadius = getRadius(lead, borderLabel);\n    if (followRadius === undefined && leadRadius === undefined) continue;\n    followRadius || (followRadius = 0);\n    leadRadius || (leadRadius = 0);\n    var canMix = followRadius === 0 || leadRadius === 0 || isPx(followRadius) === isPx(leadRadius);\n    if (canMix) {\n      target[borderLabel] = Math.max(popmotion.mix(asNumber(followRadius), asNumber(leadRadius), progress), 0);\n      if (styleValueTypes.percent.test(leadRadius) || styleValueTypes.percent.test(followRadius)) {\n        target[borderLabel] += \"%\";\n      }\n    } else {\n      target[borderLabel] = leadRadius;\n    }\n  }\n  /**\n   * Mix rotation\n   */\n  if (follow.rotate || lead.rotate) {\n    target.rotate = popmotion.mix(follow.rotate || 0, lead.rotate || 0, progress);\n  }\n}\nfunction getRadius(values, radiusName) {\n  var _a;\n  return (_a = values[radiusName]) !== null && _a !== void 0 ? _a : values.borderRadius;\n}\n// /**\n//  * We only want to mix the background color if there's a follow element\n//  * that we're not crossfading opacity between. For instance with switch\n//  * AnimateSharedLayout animations, this helps the illusion of a continuous\n//  * element being animated but also cuts down on the number of paints triggered\n//  * for elements where opacity is doing that work for us.\n//  */\n// if (\n//     !hasFollowElement &&\n//     latestLeadValues.backgroundColor &&\n//     latestFollowValues.backgroundColor\n// ) {\n//     /**\n//      * This isn't ideal performance-wise as mixColor is creating a new function every frame.\n//      * We could probably create a mixer that runs at the start of the animation but\n//      * the idea behind the crossfader is that it runs dynamically between two potentially\n//      * changing targets (ie opacity or borderRadius may be animating independently via variants)\n//      */\n//     leadState.backgroundColor = followState.backgroundColor = mixColor(\n//         latestFollowValues.backgroundColor as string,\n//         latestLeadValues.backgroundColor as string\n//     )(p)\n// }\nvar easeCrossfadeIn = compress(0, 0.5, popmotion.circOut);\nvar easeCrossfadeOut = compress(0.5, 0.95, popmotion.linear);\nfunction compress(min, max, easing) {\n  return function (p) {\n    // Could replace ifs with clamp\n    if (p < min) return 0;\n    if (p > max) return 1;\n    return easing(popmotion.progress(min, max, p));\n  };\n}\n\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyAxisInto(axis, originAxis) {\n  axis.min = originAxis.min;\n  axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyBoxInto(box, originBox) {\n  copyAxisInto(box.x, originBox.x);\n  copyAxisInto(box.y, originBox.y);\n}\nfunction isIdentityScale(scale) {\n  return scale === undefined || scale === 1;\n}\nfunction hasScale(_a) {\n  var scale = _a.scale,\n    scaleX = _a.scaleX,\n    scaleY = _a.scaleY;\n  return !isIdentityScale(scale) || !isIdentityScale(scaleX) || !isIdentityScale(scaleY);\n}\nfunction hasTransform(values) {\n  return hasScale(values) || hasTranslate(values.x) || hasTranslate(values.y) || values.z || values.rotate || values.rotateX || values.rotateY;\n}\nfunction hasTranslate(value) {\n  return value && value !== \"0%\";\n}\n\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n  var distanceFromOrigin = point - originPoint;\n  var scaled = scale * distanceFromOrigin;\n  return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n  if (boxScale !== undefined) {\n    point = scalePoint(point, boxScale, originPoint);\n  }\n  return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n  if (scale === void 0) {\n    scale = 1;\n  }\n  axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, _a) {\n  var x = _a.x,\n    y = _a.y;\n  applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n  applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath, isSharedTransition) {\n  var _a, _b;\n  if (isSharedTransition === void 0) {\n    isSharedTransition = false;\n  }\n  var treeLength = treePath.length;\n  if (!treeLength) return;\n  // Reset the treeScale\n  treeScale.x = treeScale.y = 1;\n  var node;\n  var delta;\n  for (var i = 0; i < treeLength; i++) {\n    node = treePath[i];\n    delta = node.projectionDelta;\n    if (((_b = (_a = node.instance) === null || _a === void 0 ? void 0 : _a.style) === null || _b === void 0 ? void 0 : _b.display) === \"contents\") continue;\n    if (isSharedTransition && node.options.layoutScroll && node.scroll && node !== node.root) {\n      transformBox(box, {\n        x: -node.scroll.x,\n        y: -node.scroll.y\n      });\n    }\n    if (delta) {\n      // Incoporate each ancestor's scale into a culmulative treeScale for this component\n      treeScale.x *= delta.x.scale;\n      treeScale.y *= delta.y.scale;\n      // Apply each ancestor's calculated delta into this component's recorded layout box\n      applyBoxDelta(box, delta);\n    }\n    if (isSharedTransition && hasTransform(node.latestValues)) {\n      transformBox(box, node.latestValues);\n    }\n  }\n}\nfunction translateAxis(axis, distance) {\n  axis.min = axis.min + distance;\n  axis.max = axis.max + distance;\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction transformAxis(axis, transforms, _a) {\n  var _b = tslib.__read(_a, 3),\n    key = _b[0],\n    scaleKey = _b[1],\n    originKey = _b[2];\n  var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n  var originPoint = popmotion.mix(axis.min, axis.max, axisOrigin);\n  // Apply the axis delta to the final axis\n  applyAxisDelta(axis, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys$1 = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys$1 = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction transformBox(box, transform) {\n  transformAxis(box.x, transform, xKeys$1);\n  transformAxis(box.y, transform, yKeys$1);\n}\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\nfunction isNear(value, target, maxDistance) {\n  if (target === void 0) {\n    target = 0;\n  }\n  if (maxDistance === void 0) {\n    maxDistance = 0.01;\n  }\n  return popmotion.distance(value, target) < maxDistance;\n}\nfunction calcAxisDelta(delta, source, target, origin) {\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n  delta.origin = origin;\n  delta.originPoint = popmotion.mix(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  if (isNear(delta.scale, 1, 0.0001) || isNaN(delta.scale)) delta.scale = 1;\n  delta.translate = popmotion.mix(target.min, target.max, delta.origin) - delta.originPoint;\n  if (isNear(delta.translate) || isNaN(delta.translate)) delta.translate = 0;\n}\nfunction calcBoxDelta(delta, source, target, origin) {\n  calcAxisDelta(delta.x, source.x, target.x, origin === null || origin === void 0 ? void 0 : origin.originX);\n  calcAxisDelta(delta.y, source.y, target.y, origin === null || origin === void 0 ? void 0 : origin.originY);\n}\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(target, relative, parent) {\n  calcRelativeAxis(target.x, relative.x, parent.x);\n  calcRelativeAxis(target.y, relative.y, parent.y);\n}\nfunction calcRelativeAxisPosition(target, layout, parent) {\n  target.min = layout.min - parent.min;\n  target.max = target.min + calcLength(layout);\n}\nfunction calcRelativePosition(target, layout, parent) {\n  calcRelativeAxisPosition(target.x, layout.x, parent.x);\n  calcRelativeAxisPosition(target.y, layout.y, parent.y);\n}\n\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n  point -= translate;\n  point = scalePoint(point, 1 / scale, originPoint);\n  if (boxScale !== undefined) {\n    point = scalePoint(point, 1 / boxScale, originPoint);\n  }\n  return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale, originAxis, sourceAxis) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n  if (scale === void 0) {\n    scale = 1;\n  }\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n  if (originAxis === void 0) {\n    originAxis = axis;\n  }\n  if (sourceAxis === void 0) {\n    sourceAxis = axis;\n  }\n  if (styleValueTypes.percent.test(translate)) {\n    translate = parseFloat(translate);\n    var relativeProgress = popmotion.mix(sourceAxis.min, sourceAxis.max, translate / 100);\n    translate = relativeProgress - sourceAxis.min;\n  }\n  if (typeof translate !== \"number\") return;\n  var originPoint = popmotion.mix(originAxis.min, originAxis.max, origin);\n  if (axis === originAxis) originPoint -= translate;\n  axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, _a, origin, sourceAxis) {\n  var _b = tslib.__read(_a, 3),\n    key = _b[0],\n    scaleKey = _b[1],\n    originKey = _b[2];\n  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale, origin, sourceAxis);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms, originBox, sourceBox) {\n  removeAxisTransforms(box.x, transforms, xKeys, originBox === null || originBox === void 0 ? void 0 : originBox.x, sourceBox === null || sourceBox === void 0 ? void 0 : sourceBox.x);\n  removeAxisTransforms(box.y, transforms, yKeys, originBox === null || originBox === void 0 ? void 0 : originBox.y, sourceBox === null || sourceBox === void 0 ? void 0 : sourceBox.y);\n}\nvar createAxisDelta = function createAxisDelta() {\n  return {\n    translate: 0,\n    scale: 1,\n    origin: 0,\n    originPoint: 0\n  };\n};\nvar createDelta = function createDelta() {\n  return {\n    x: createAxisDelta(),\n    y: createAxisDelta()\n  };\n};\nvar createAxis = function createAxis() {\n  return {\n    min: 0,\n    max: 0\n  };\n};\nvar createBox = function createBox() {\n  return {\n    x: createAxis(),\n    y: createAxis()\n  };\n};\nfunction isAxisDeltaZero(delta) {\n  return delta.translate === 0 && delta.scale === 1;\n}\nfunction isDeltaZero(delta) {\n  return isAxisDeltaZero(delta.x) && isAxisDeltaZero(delta.y);\n}\nfunction boxEquals(a, b) {\n  return a.x.min === b.x.min && a.x.max === b.x.max && a.y.min === b.y.min && a.y.max === b.y.max;\n}\nvar NodeStack = /** @class */function () {\n  function NodeStack() {\n    this.members = [];\n  }\n  NodeStack.prototype.add = function (node) {\n    addUniqueItem(this.members, node);\n    node.scheduleRender();\n  };\n  NodeStack.prototype.remove = function (node) {\n    removeItem(this.members, node);\n    if (node === this.prevLead) {\n      this.prevLead = undefined;\n    }\n    if (node === this.lead) {\n      var prevLead = this.members[this.members.length - 1];\n      if (prevLead) {\n        this.promote(prevLead);\n      }\n    }\n  };\n  NodeStack.prototype.relegate = function (node) {\n    var indexOfNode = this.members.findIndex(function (member) {\n      return node === member;\n    });\n    if (indexOfNode === 0) return false;\n    /**\n     * Find the next projection node that is present\n     */\n    var prevLead;\n    for (var i = indexOfNode; i >= 0; i--) {\n      var member = this.members[i];\n      if (member.isPresent !== false) {\n        prevLead = member;\n        break;\n      }\n    }\n    if (prevLead) {\n      this.promote(prevLead);\n      return true;\n    } else {\n      return false;\n    }\n  };\n  NodeStack.prototype.promote = function (node, preserveFollowOpacity) {\n    var _a;\n    var prevLead = this.lead;\n    if (node === prevLead) return;\n    this.prevLead = prevLead;\n    this.lead = node;\n    node.show();\n    if (prevLead) {\n      prevLead.instance && prevLead.scheduleRender();\n      node.scheduleRender();\n      node.resumeFrom = prevLead;\n      if (preserveFollowOpacity) {\n        node.resumeFrom.preserveOpacity = true;\n      }\n      if (prevLead.snapshot) {\n        node.snapshot = prevLead.snapshot;\n        node.snapshot.latestValues = prevLead.animationValues || prevLead.latestValues;\n        node.snapshot.isShared = true;\n      }\n      if ((_a = node.root) === null || _a === void 0 ? void 0 : _a.isUpdating) {\n        node.isLayoutDirty = true;\n      }\n      var crossfade = node.options.crossfade;\n      if (crossfade === false) {\n        prevLead.hide();\n      }\n      /**\n       * TODO:\n       *   - Test border radius when previous node was deleted\n       *   - boxShadow mixing\n       *   - Shared between element A in scrolled container and element B (scroll stays the same or changes)\n       *   - Shared between element A in transformed container and element B (transform stays the same or changes)\n       *   - Shared between element A in scrolled page and element B (scroll stays the same or changes)\n       * ---\n       *   - Crossfade opacity of root nodes\n       *   - layoutId changes after animation\n       *   - layoutId changes mid animation\n       */\n    }\n  };\n\n  NodeStack.prototype.exitAnimationComplete = function () {\n    this.members.forEach(function (node) {\n      var _a, _b, _c, _d, _e;\n      (_b = (_a = node.options).onExitComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n      (_e = (_c = node.resumingFrom) === null || _c === void 0 ? void 0 : (_d = _c.options).onExitComplete) === null || _e === void 0 ? void 0 : _e.call(_d);\n    });\n  };\n  NodeStack.prototype.scheduleRender = function () {\n    this.members.forEach(function (node) {\n      node.instance && node.scheduleRender(false);\n    });\n  };\n  /**\n   * Clear any leads that have been removed this render to prevent them from being\n   * used in future animations and to prevent memory leaks\n   */\n  NodeStack.prototype.removeLeadSnapshot = function () {\n    if (this.lead && this.lead.snapshot) {\n      this.lead.snapshot = undefined;\n    }\n  };\n  return NodeStack;\n}();\nvar scaleCorrectors = {};\nfunction addScaleCorrector(correctors) {\n  Object.assign(scaleCorrectors, correctors);\n}\nvar identityProjection = \"translate3d(0px, 0px, 0) scale(1, 1)\";\nfunction buildProjectionTransform(delta, treeScale, latestTransform) {\n  /**\n   * The translations we use to calculate are always relative to the viewport coordinate space.\n   * But when we apply scales, we also scale the coordinate space of an element and its children.\n   * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n   * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n   */\n  var xTranslate = delta.x.translate / treeScale.x;\n  var yTranslate = delta.y.translate / treeScale.y;\n  var transform = \"translate3d(\".concat(xTranslate, \"px, \").concat(yTranslate, \"px, 0) \");\n  if (latestTransform) {\n    var rotate = latestTransform.rotate,\n      rotateX = latestTransform.rotateX,\n      rotateY = latestTransform.rotateY;\n    if (rotate) transform += \"rotate(\".concat(rotate, \"deg) \");\n    if (rotateX) transform += \"rotateX(\".concat(rotateX, \"deg) \");\n    if (rotateY) transform += \"rotateY(\".concat(rotateY, \"deg) \");\n  }\n  transform += \"scale(\".concat(delta.x.scale, \", \").concat(delta.y.scale, \")\");\n  return transform === identityProjection ? \"none\" : transform;\n}\nfunction eachAxis(callback) {\n  return [callback(\"x\"), callback(\"y\")];\n}\n\n/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\nvar order = [\"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n  return transformAxes.forEach(function (axesKey) {\n    return transformProps.push(operationKey + axesKey);\n  });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\nvar transformPropSet = new Set(transformProps);\nfunction isTransformProp(key) {\n  return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\nvar compareByDepth = function compareByDepth(a, b) {\n  return a.depth - b.depth;\n};\nvar FlatTree = /** @class */function () {\n  function FlatTree() {\n    this.children = [];\n    this.isDirty = false;\n  }\n  FlatTree.prototype.add = function (child) {\n    addUniqueItem(this.children, child);\n    this.isDirty = true;\n  };\n  FlatTree.prototype.remove = function (child) {\n    removeItem(this.children, child);\n    this.isDirty = true;\n  };\n  FlatTree.prototype.forEach = function (callback) {\n    this.isDirty && this.children.sort(compareByDepth);\n    this.isDirty = false;\n    this.children.forEach(callback);\n  };\n  return FlatTree;\n}();\n\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n *\n * @internal\n */\nfunction resolveMotionValue(value) {\n  var unwrappedValue = isMotionValue(value) ? value.get() : value;\n  return isCustomValue(unwrappedValue) ? unwrappedValue.toValue() : unwrappedValue;\n}\n\n/**\n * We use 1000 as the animation target as 0-1000 maps better to pixels than 0-1\n * which has a noticeable difference in spring animations\n */\nvar animationTarget = 1000;\n/**\n * This should only ever be modified on the client otherwise it'll\n * persist through server requests. If we need instanced states we\n * could lazy-init via root.\n */\nvar globalProjectionState = {\n  /**\n   * Global flag as to whether the tree has animated since the last time\n   * we resized the window\n   */\n  hasAnimatedSinceResize: true,\n  /**\n   * We set this to true once, on the first update. Any nodes added to the tree beyond that\n   * update will be given a `data-projection-id` attribute.\n   */\n  hasEverUpdated: false\n};\nfunction createProjectionNode(_a) {\n  var attachResizeListener = _a.attachResizeListener,\n    defaultParent = _a.defaultParent,\n    measureScroll = _a.measureScroll,\n    resetTransform = _a.resetTransform;\n  return (/** @class */function () {\n      function ProjectionNode(id, latestValues, parent) {\n        var _this = this;\n        if (latestValues === void 0) {\n          latestValues = {};\n        }\n        if (parent === void 0) {\n          parent = defaultParent === null || defaultParent === void 0 ? void 0 : defaultParent();\n        }\n        /**\n         * A Set containing all this component's children. This is used to iterate\n         * through the children.\n         *\n         * TODO: This could be faster to iterate as a flat array stored on the root node.\n         */\n        this.children = new Set();\n        /**\n         * Options for the node. We use this to configure what kind of layout animations\n         * we should perform (if any).\n         */\n        this.options = {};\n        /**\n         * We use this to detect when its safe to shut down part of a projection tree.\n         * We have to keep projecting children for scale correction and relative projection\n         * until all their parents stop performing layout animations.\n         */\n        this.isTreeAnimating = false;\n        this.isAnimationBlocked = false;\n        /**\n         * Flag to true if we think this layout has been changed. We can't always know this,\n         * currently we set it to true every time a component renders, or if it has a layoutDependency\n         * if that has changed between renders. Additionally, components can be grouped by LayoutGroup\n         * and if one node is dirtied, they all are.\n         */\n        this.isLayoutDirty = false;\n        /**\n         * Block layout updates for instant layout transitions throughout the tree.\n         */\n        this.updateManuallyBlocked = false;\n        this.updateBlockedByResize = false;\n        /**\n         * Set to true between the start of the first `willUpdate` call and the end of the `didUpdate`\n         * call.\n         */\n        this.isUpdating = false;\n        /**\n         * If this is an SVG element we currently disable projection transforms\n         */\n        this.isSVG = false;\n        /**\n         * Flag to true (during promotion) if a node doing an instant layout transition needs to reset\n         * its projection styles.\n         */\n        this.needsReset = false;\n        /**\n         * Flags whether this node should have its transform reset prior to measuring.\n         */\n        this.shouldResetTransform = false;\n        /**\n         * An object representing the calculated contextual/accumulated/tree scale.\n         * This will be used to scale calculcated projection transforms, as these are\n         * calculated in screen-space but need to be scaled for elements to actually\n         * make it to their calculated destinations.\n         *\n         * TODO: Lazy-init\n         */\n        this.treeScale = {\n          x: 1,\n          y: 1\n        };\n        /**\n         *\n         */\n        this.eventHandlers = new Map();\n        // Note: Currently only running on root node\n        this.potentialNodes = new Map();\n        this.checkUpdateFailed = function () {\n          if (_this.isUpdating) {\n            _this.isUpdating = false;\n            _this.clearAllSnapshots();\n          }\n        };\n        this.updateProjection = function () {\n          _this.nodes.forEach(resolveTargetDelta);\n          _this.nodes.forEach(calcProjection);\n        };\n        this.hasProjected = false;\n        this.isVisible = true;\n        /**\n         * Animation\n         */\n        this.animationProgress = 0;\n        /**\n         * Shared layout\n         */\n        // TODO Only running on root node\n        this.sharedNodes = new Map();\n        this.id = id;\n        this.latestValues = latestValues;\n        this.root = parent ? parent.root || parent : this;\n        this.path = parent ? tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(parent.path), false), [parent], false) : [];\n        this.parent = parent;\n        this.depth = parent ? parent.depth + 1 : 0;\n        id && this.root.registerPotentialNode(id, this);\n        for (var i = 0; i < this.path.length; i++) {\n          this.path[i].shouldResetTransform = true;\n        }\n        if (this.root === this) this.nodes = new FlatTree();\n      }\n      ProjectionNode.prototype.addEventListener = function (name, handler) {\n        if (!this.eventHandlers.has(name)) {\n          this.eventHandlers.set(name, new SubscriptionManager());\n        }\n        return this.eventHandlers.get(name).add(handler);\n      };\n      ProjectionNode.prototype.notifyListeners = function (name) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          args[_i - 1] = arguments[_i];\n        }\n        var subscriptionManager = this.eventHandlers.get(name);\n        subscriptionManager === null || subscriptionManager === void 0 ? void 0 : subscriptionManager.notify.apply(subscriptionManager, tslib.__spreadArray([], tslib.__read(args), false));\n      };\n      ProjectionNode.prototype.hasListeners = function (name) {\n        return this.eventHandlers.has(name);\n      };\n      ProjectionNode.prototype.registerPotentialNode = function (id, node) {\n        this.potentialNodes.set(id, node);\n      };\n      /**\n       * Lifecycles\n       */\n      ProjectionNode.prototype.mount = function (instance, isLayoutDirty) {\n        var _this = this;\n        var _a;\n        if (isLayoutDirty === void 0) {\n          isLayoutDirty = false;\n        }\n        if (this.instance) return;\n        this.isSVG = instance instanceof SVGElement && instance.tagName !== \"svg\";\n        this.instance = instance;\n        var _b = this.options,\n          layoutId = _b.layoutId,\n          layout = _b.layout,\n          visualElement = _b.visualElement;\n        if (visualElement && !visualElement.getInstance()) {\n          visualElement.mount(instance);\n        }\n        this.root.nodes.add(this);\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.add(this);\n        this.id && this.root.potentialNodes.delete(this.id);\n        if (isLayoutDirty && (layout || layoutId)) {\n          this.isLayoutDirty = true;\n        }\n        if (attachResizeListener) {\n          var unblockTimeout_1;\n          var resizeUnblockUpdate_1 = function resizeUnblockUpdate_1() {\n            return _this.root.updateBlockedByResize = false;\n          };\n          attachResizeListener(instance, function () {\n            _this.root.updateBlockedByResize = true;\n            clearTimeout(unblockTimeout_1);\n            unblockTimeout_1 = setTimeout(resizeUnblockUpdate_1, 250);\n            if (globalProjectionState.hasAnimatedSinceResize) {\n              globalProjectionState.hasAnimatedSinceResize = false;\n              _this.nodes.forEach(finishAnimation);\n            }\n          });\n        }\n        if (layoutId) {\n          this.root.registerSharedNode(layoutId, this);\n        }\n        // Only register the handler if it requires layout animation\n        if (this.options.animate !== false && visualElement && (layoutId || layout)) {\n          this.addEventListener(\"didUpdate\", function (_a) {\n            var _b, _c, _d, _e, _f;\n            var delta = _a.delta,\n              hasLayoutChanged = _a.hasLayoutChanged,\n              hasRelativeTargetChanged = _a.hasRelativeTargetChanged,\n              newLayout = _a.layout;\n            if (_this.isTreeAnimationBlocked()) {\n              _this.target = undefined;\n              _this.relativeTarget = undefined;\n              return;\n            }\n            // TODO: Check here if an animation exists\n            var layoutTransition = (_c = (_b = _this.options.transition) !== null && _b !== void 0 ? _b : visualElement.getDefaultTransition()) !== null && _c !== void 0 ? _c : defaultLayoutTransition;\n            var onLayoutAnimationComplete = visualElement.getProps().onLayoutAnimationComplete;\n            /**\n             * The target layout of the element might stay the same,\n             * but its position relative to its parent has changed.\n             */\n            var targetChanged = !_this.targetLayout || !boxEquals(_this.targetLayout, newLayout) || hasRelativeTargetChanged;\n            /**\n             * If the layout hasn't seemed to have changed, it might be that the\n             * element is visually in the same place in the document but its position\n             * relative to its parent has indeed changed. So here we check for that.\n             */\n            var hasOnlyRelativeTargetChanged = !hasLayoutChanged && hasRelativeTargetChanged;\n            if (((_d = _this.resumeFrom) === null || _d === void 0 ? void 0 : _d.instance) || hasOnlyRelativeTargetChanged || hasLayoutChanged && (targetChanged || !_this.currentAnimation)) {\n              if (_this.resumeFrom) {\n                _this.resumingFrom = _this.resumeFrom;\n                _this.resumingFrom.resumingFrom = undefined;\n              }\n              _this.setAnimationOrigin(delta, hasOnlyRelativeTargetChanged);\n              _this.startAnimation(tslib.__assign(tslib.__assign({}, getValueTransition(layoutTransition, \"layout\")), {\n                onComplete: onLayoutAnimationComplete\n              }));\n            } else {\n              _this.isLead() && ((_f = (_e = _this.options).onExitComplete) === null || _f === void 0 ? void 0 : _f.call(_e));\n            }\n            _this.targetLayout = newLayout;\n          });\n        }\n      };\n      ProjectionNode.prototype.unmount = function () {\n        var _a, _b;\n        this.options.layoutId && this.willUpdate();\n        this.root.nodes.remove(this);\n        (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.remove(this);\n        (_b = this.parent) === null || _b === void 0 ? void 0 : _b.children.delete(this);\n        this.instance = undefined;\n        sync.cancelSync.preRender(this.updateProjection);\n      };\n      // only on the root\n      ProjectionNode.prototype.blockUpdate = function () {\n        this.updateManuallyBlocked = true;\n      };\n      ProjectionNode.prototype.unblockUpdate = function () {\n        this.updateManuallyBlocked = false;\n      };\n      ProjectionNode.prototype.isUpdateBlocked = function () {\n        return this.updateManuallyBlocked || this.updateBlockedByResize;\n      };\n      ProjectionNode.prototype.isTreeAnimationBlocked = function () {\n        var _a;\n        return this.isAnimationBlocked || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isTreeAnimationBlocked()) || false;\n      };\n      // Note: currently only running on root node\n      ProjectionNode.prototype.startUpdate = function () {\n        var _a;\n        if (this.isUpdateBlocked()) return;\n        this.isUpdating = true;\n        (_a = this.nodes) === null || _a === void 0 ? void 0 : _a.forEach(resetRotation);\n      };\n      ProjectionNode.prototype.willUpdate = function (shouldNotifyListeners) {\n        var _a, _b, _c;\n        if (shouldNotifyListeners === void 0) {\n          shouldNotifyListeners = true;\n        }\n        if (this.root.isUpdateBlocked()) {\n          (_b = (_a = this.options).onExitComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n          return;\n        }\n        !this.root.isUpdating && this.root.startUpdate();\n        if (this.isLayoutDirty) return;\n        this.isLayoutDirty = true;\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          node.shouldResetTransform = true;\n          /**\n           * TODO: Check we haven't updated the scroll\n           * since the last didUpdate\n           */\n          node.updateScroll();\n        }\n        var _d = this.options,\n          layoutId = _d.layoutId,\n          layout = _d.layout;\n        if (layoutId === undefined && !layout) return;\n        var transformTemplate = (_c = this.options.visualElement) === null || _c === void 0 ? void 0 : _c.getProps().transformTemplate;\n        this.prevTransformTemplateValue = transformTemplate === null || transformTemplate === void 0 ? void 0 : transformTemplate(this.latestValues, \"\");\n        this.updateSnapshot();\n        shouldNotifyListeners && this.notifyListeners(\"willUpdate\");\n      };\n      // Note: Currently only running on root node\n      ProjectionNode.prototype.didUpdate = function () {\n        var updateWasBlocked = this.isUpdateBlocked();\n        // When doing an instant transition, we skip the layout update,\n        // but should still clean up the measurements so that the next\n        // snapshot could be taken correctly.\n        if (updateWasBlocked) {\n          this.unblockUpdate();\n          this.clearAllSnapshots();\n          this.nodes.forEach(clearMeasurements);\n          return;\n        }\n        if (!this.isUpdating) return;\n        this.isUpdating = false;\n        /**\n         * Search for and mount newly-added projection elements.\n         *\n         * TODO: Every time a new component is rendered we could search up the tree for\n         * the closest mounted node and query from there rather than document.\n         */\n        if (this.potentialNodes.size) {\n          this.potentialNodes.forEach(mountNodeEarly);\n          this.potentialNodes.clear();\n        }\n        /**\n         * Write\n         */\n        this.nodes.forEach(resetTransformStyle);\n        /**\n         * Read ==================\n         */\n        // Update layout measurements of updated children\n        this.nodes.forEach(updateLayout);\n        /**\n         * Write\n         */\n        // Notify listeners that the layout is updated\n        this.nodes.forEach(notifyLayoutUpdate);\n        this.clearAllSnapshots();\n        // Flush any scheduled updates\n        sync.flushSync.update();\n        sync.flushSync.preRender();\n        sync.flushSync.render();\n      };\n      ProjectionNode.prototype.clearAllSnapshots = function () {\n        this.nodes.forEach(clearSnapshot);\n        this.sharedNodes.forEach(removeLeadSnapshots);\n      };\n      ProjectionNode.prototype.scheduleUpdateProjection = function () {\n        sync__default[\"default\"].preRender(this.updateProjection, false, true);\n      };\n      ProjectionNode.prototype.scheduleCheckAfterUnmount = function () {\n        var _this = this;\n        /**\n         * If the unmounting node is in a layoutGroup and did trigger a willUpdate,\n         * we manually call didUpdate to give a chance to the siblings to animate.\n         * Otherwise, cleanup all snapshots to prevents future nodes from reusing them.\n         */\n        sync__default[\"default\"].postRender(function () {\n          if (_this.isLayoutDirty) {\n            _this.root.didUpdate();\n          } else {\n            _this.root.checkUpdateFailed();\n          }\n        });\n      };\n      /**\n       * Update measurements\n       */\n      ProjectionNode.prototype.updateSnapshot = function () {\n        if (this.snapshot || !this.instance) return;\n        var measured = this.measure();\n        var layout = this.removeTransform(this.removeElementScroll(measured));\n        roundBox(layout);\n        this.snapshot = {\n          measured: measured,\n          layout: layout,\n          latestValues: {}\n        };\n      };\n      ProjectionNode.prototype.updateLayout = function () {\n        var _a;\n        if (!this.instance) return;\n        // TODO: Incorporate into a forwarded scroll offset\n        this.updateScroll();\n        if (!(this.options.alwaysMeasureLayout && this.isLead()) && !this.isLayoutDirty) {\n          return;\n        }\n        /**\n         * When a node is mounted, it simply resumes from the prevLead's\n         * snapshot instead of taking a new one, but the ancestors scroll\n         * might have updated while the prevLead is unmounted. We need to\n         * update the scroll again to make sure the layout we measure is\n         * up to date.\n         */\n        if (this.resumeFrom && !this.resumeFrom.instance) {\n          for (var i = 0; i < this.path.length; i++) {\n            var node = this.path[i];\n            node.updateScroll();\n          }\n        }\n        var measured = this.measure();\n        roundBox(measured);\n        var prevLayout = this.layout;\n        this.layout = {\n          measured: measured,\n          actual: this.removeElementScroll(measured)\n        };\n        this.layoutCorrected = createBox();\n        this.isLayoutDirty = false;\n        this.projectionDelta = undefined;\n        this.notifyListeners(\"measure\", this.layout.actual);\n        (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.notifyLayoutMeasure(this.layout.actual, prevLayout === null || prevLayout === void 0 ? void 0 : prevLayout.actual);\n      };\n      ProjectionNode.prototype.updateScroll = function () {\n        if (this.options.layoutScroll && this.instance) {\n          this.scroll = measureScroll(this.instance);\n        }\n      };\n      ProjectionNode.prototype.resetTransform = function () {\n        var _a;\n        if (!resetTransform) return;\n        var isResetRequested = this.isLayoutDirty || this.shouldResetTransform;\n        var hasProjection = this.projectionDelta && !isDeltaZero(this.projectionDelta);\n        var transformTemplate = (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.getProps().transformTemplate;\n        var transformTemplateValue = transformTemplate === null || transformTemplate === void 0 ? void 0 : transformTemplate(this.latestValues, \"\");\n        var transformTemplateHasChanged = transformTemplateValue !== this.prevTransformTemplateValue;\n        if (isResetRequested && (hasProjection || hasTransform(this.latestValues) || transformTemplateHasChanged)) {\n          resetTransform(this.instance, transformTemplateValue);\n          this.shouldResetTransform = false;\n          this.scheduleRender();\n        }\n      };\n      ProjectionNode.prototype.measure = function () {\n        var visualElement = this.options.visualElement;\n        if (!visualElement) return createBox();\n        var box = visualElement.measureViewportBox();\n        // Remove viewport scroll to give page-relative coordinates\n        var scroll = this.root.scroll;\n        if (scroll) {\n          translateAxis(box.x, scroll.x);\n          translateAxis(box.y, scroll.y);\n        }\n        return box;\n      };\n      ProjectionNode.prototype.removeElementScroll = function (box) {\n        var boxWithoutScroll = createBox();\n        copyBoxInto(boxWithoutScroll, box);\n        /**\n         * Performance TODO: Keep a cumulative scroll offset down the tree\n         * rather than loop back up the path.\n         */\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          var scroll_1 = node.scroll,\n            options = node.options;\n          if (node !== this.root && scroll_1 && options.layoutScroll) {\n            translateAxis(boxWithoutScroll.x, scroll_1.x);\n            translateAxis(boxWithoutScroll.y, scroll_1.y);\n          }\n        }\n        return boxWithoutScroll;\n      };\n      ProjectionNode.prototype.applyTransform = function (box, transformOnly) {\n        if (transformOnly === void 0) {\n          transformOnly = false;\n        }\n        var withTransforms = createBox();\n        copyBoxInto(withTransforms, box);\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          if (!transformOnly && node.options.layoutScroll && node.scroll && node !== node.root) {\n            transformBox(withTransforms, {\n              x: -node.scroll.x,\n              y: -node.scroll.y\n            });\n          }\n          if (!hasTransform(node.latestValues)) continue;\n          transformBox(withTransforms, node.latestValues);\n        }\n        if (hasTransform(this.latestValues)) {\n          transformBox(withTransforms, this.latestValues);\n        }\n        return withTransforms;\n      };\n      ProjectionNode.prototype.removeTransform = function (box) {\n        var _a;\n        var boxWithoutTransform = createBox();\n        copyBoxInto(boxWithoutTransform, box);\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          if (!node.instance) continue;\n          if (!hasTransform(node.latestValues)) continue;\n          hasScale(node.latestValues) && node.updateSnapshot();\n          var sourceBox = createBox();\n          var nodeBox = node.measure();\n          copyBoxInto(sourceBox, nodeBox);\n          removeBoxTransforms(boxWithoutTransform, node.latestValues, (_a = node.snapshot) === null || _a === void 0 ? void 0 : _a.layout, sourceBox);\n        }\n        if (hasTransform(this.latestValues)) {\n          removeBoxTransforms(boxWithoutTransform, this.latestValues);\n        }\n        return boxWithoutTransform;\n      };\n      /**\n       *\n       */\n      ProjectionNode.prototype.setTargetDelta = function (delta) {\n        this.targetDelta = delta;\n        this.root.scheduleUpdateProjection();\n      };\n      ProjectionNode.prototype.setOptions = function (options) {\n        var _a;\n        this.options = tslib.__assign(tslib.__assign(tslib.__assign({}, this.options), options), {\n          crossfade: (_a = options.crossfade) !== null && _a !== void 0 ? _a : true\n        });\n      };\n      ProjectionNode.prototype.clearMeasurements = function () {\n        this.scroll = undefined;\n        this.layout = undefined;\n        this.snapshot = undefined;\n        this.prevTransformTemplateValue = undefined;\n        this.targetDelta = undefined;\n        this.target = undefined;\n        this.isLayoutDirty = false;\n      };\n      /**\n       * Frame calculations\n       */\n      ProjectionNode.prototype.resolveTargetDelta = function () {\n        var _a;\n        var _b = this.options,\n          layout = _b.layout,\n          layoutId = _b.layoutId;\n        /**\n         * If we have no layout, we can't perform projection, so early return\n         */\n        if (!this.layout || !(layout || layoutId)) return;\n        /**\n         * If we don't have a targetDelta but do have a layout, we can attempt to resolve\n         * a relativeParent. This will allow a component to perform scale correction\n         * even if no animation has started.\n         */\n        // TODO If this is unsuccessful this currently happens every frame\n        if (!this.targetDelta && !this.relativeTarget) {\n          // TODO: This is a semi-repetition of further down this function, make DRY\n          this.relativeParent = this.getClosestProjectingParent();\n          if (this.relativeParent && this.relativeParent.layout) {\n            this.relativeTarget = createBox();\n            this.relativeTargetOrigin = createBox();\n            calcRelativePosition(this.relativeTargetOrigin, this.layout.actual, this.relativeParent.layout.actual);\n            copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n          }\n        }\n        /**\n         * If we have no relative target or no target delta our target isn't valid\n         * for this frame.\n         */\n        if (!this.relativeTarget && !this.targetDelta) return;\n        /**\n         * Lazy-init target data structure\n         */\n        if (!this.target) {\n          this.target = createBox();\n          this.targetWithTransforms = createBox();\n        }\n        /**\n         * If we've got a relative box for this component, resolve it into a target relative to the parent.\n         */\n        if (this.relativeTarget && this.relativeTargetOrigin && ((_a = this.relativeParent) === null || _a === void 0 ? void 0 : _a.target)) {\n          calcRelativeBox(this.target, this.relativeTarget, this.relativeParent.target);\n          /**\n           * If we've only got a targetDelta, resolve it into a target\n           */\n        } else if (this.targetDelta) {\n          if (Boolean(this.resumingFrom)) {\n            // TODO: This is creating a new object every frame\n            this.target = this.applyTransform(this.layout.actual);\n          } else {\n            copyBoxInto(this.target, this.layout.actual);\n          }\n          applyBoxDelta(this.target, this.targetDelta);\n        } else {\n          /**\n           * If no target, use own layout as target\n           */\n          copyBoxInto(this.target, this.layout.actual);\n        }\n        /**\n         * If we've been told to attempt to resolve a relative target, do so.\n         */\n        if (this.attemptToResolveRelativeTarget) {\n          this.attemptToResolveRelativeTarget = false;\n          this.relativeParent = this.getClosestProjectingParent();\n          if (this.relativeParent && Boolean(this.relativeParent.resumingFrom) === Boolean(this.resumingFrom) && !this.relativeParent.options.layoutScroll && this.relativeParent.target) {\n            this.relativeTarget = createBox();\n            this.relativeTargetOrigin = createBox();\n            calcRelativePosition(this.relativeTargetOrigin, this.target, this.relativeParent.target);\n            copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n          }\n        }\n      };\n      ProjectionNode.prototype.getClosestProjectingParent = function () {\n        if (!this.parent || hasTransform(this.parent.latestValues)) return undefined;\n        if ((this.parent.relativeTarget || this.parent.targetDelta) && this.parent.layout) {\n          return this.parent;\n        } else {\n          return this.parent.getClosestProjectingParent();\n        }\n      };\n      ProjectionNode.prototype.calcProjection = function () {\n        var _a;\n        var _b = this.options,\n          layout = _b.layout,\n          layoutId = _b.layoutId;\n        /**\n         * If this section of the tree isn't animating we can\n         * delete our target sources for the following frame.\n         */\n        this.isTreeAnimating = Boolean(((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isTreeAnimating) || this.currentAnimation || this.pendingAnimation);\n        if (!this.isTreeAnimating) {\n          this.targetDelta = this.relativeTarget = undefined;\n        }\n        if (!this.layout || !(layout || layoutId)) return;\n        var lead = this.getLead();\n        /**\n         * Reset the corrected box with the latest values from box, as we're then going\n         * to perform mutative operations on it.\n         */\n        copyBoxInto(this.layoutCorrected, this.layout.actual);\n        /**\n         * Apply all the parent deltas to this box to produce the corrected box. This\n         * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n         */\n        applyTreeDeltas(this.layoutCorrected, this.treeScale, this.path, Boolean(this.resumingFrom) || this !== lead);\n        var target = lead.target;\n        if (!target) return;\n        if (!this.projectionDelta) {\n          this.projectionDelta = createDelta();\n          this.projectionDeltaWithTransform = createDelta();\n        }\n        var prevTreeScaleX = this.treeScale.x;\n        var prevTreeScaleY = this.treeScale.y;\n        var prevProjectionTransform = this.projectionTransform;\n        /**\n         * Update the delta between the corrected box and the target box before user-set transforms were applied.\n         * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n         * for our layout reprojection, but still allow them to be scaled correctly by the user.\n         * It might be that to simplify this we may want to accept that user-set scale is also corrected\n         * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n         * to allow people to choose whether these styles are corrected based on just the\n         * layout reprojection or the final bounding box.\n         */\n        calcBoxDelta(this.projectionDelta, this.layoutCorrected, target, this.latestValues);\n        this.projectionTransform = buildProjectionTransform(this.projectionDelta, this.treeScale);\n        if (this.projectionTransform !== prevProjectionTransform || this.treeScale.x !== prevTreeScaleX || this.treeScale.y !== prevTreeScaleY) {\n          this.hasProjected = true;\n          this.scheduleRender();\n          this.notifyListeners(\"projectionUpdate\", target);\n        }\n      };\n      ProjectionNode.prototype.hide = function () {\n        this.isVisible = false;\n        // TODO: Schedule render\n      };\n\n      ProjectionNode.prototype.show = function () {\n        this.isVisible = true;\n        // TODO: Schedule render\n      };\n\n      ProjectionNode.prototype.scheduleRender = function (notifyAll) {\n        var _a, _b, _c;\n        if (notifyAll === void 0) {\n          notifyAll = true;\n        }\n        (_b = (_a = this.options).scheduleRender) === null || _b === void 0 ? void 0 : _b.call(_a);\n        notifyAll && ((_c = this.getStack()) === null || _c === void 0 ? void 0 : _c.scheduleRender());\n        if (this.resumingFrom && !this.resumingFrom.instance) {\n          this.resumingFrom = undefined;\n        }\n      };\n      ProjectionNode.prototype.setAnimationOrigin = function (delta, hasOnlyRelativeTargetChanged) {\n        var _this = this;\n        var _a;\n        if (hasOnlyRelativeTargetChanged === void 0) {\n          hasOnlyRelativeTargetChanged = false;\n        }\n        var snapshot = this.snapshot;\n        var snapshotLatestValues = (snapshot === null || snapshot === void 0 ? void 0 : snapshot.latestValues) || {};\n        var mixedValues = tslib.__assign({}, this.latestValues);\n        var targetDelta = createDelta();\n        this.relativeTarget = this.relativeTargetOrigin = undefined;\n        this.attemptToResolveRelativeTarget = !hasOnlyRelativeTargetChanged;\n        var relativeLayout = createBox();\n        var isSharedLayoutAnimation = snapshot === null || snapshot === void 0 ? void 0 : snapshot.isShared;\n        var isOnlyMember = (((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.members.length) || 0) <= 1;\n        var shouldCrossfadeOpacity = Boolean(isSharedLayoutAnimation && !isOnlyMember && this.options.crossfade === true && !this.path.some(hasOpacityCrossfade));\n        this.mixTargetDelta = function (latest) {\n          var _a;\n          var progress = latest / 1000;\n          mixAxisDelta(targetDelta.x, delta.x, progress);\n          mixAxisDelta(targetDelta.y, delta.y, progress);\n          _this.setTargetDelta(targetDelta);\n          if (_this.relativeTarget && _this.relativeTargetOrigin && _this.layout && ((_a = _this.relativeParent) === null || _a === void 0 ? void 0 : _a.layout)) {\n            calcRelativePosition(relativeLayout, _this.layout.actual, _this.relativeParent.layout.actual);\n            mixBox(_this.relativeTarget, _this.relativeTargetOrigin, relativeLayout, progress);\n          }\n          if (isSharedLayoutAnimation) {\n            _this.animationValues = mixedValues;\n            mixValues(mixedValues, snapshotLatestValues, _this.latestValues, progress, shouldCrossfadeOpacity, isOnlyMember);\n          }\n          _this.root.scheduleUpdateProjection();\n          _this.scheduleRender();\n        };\n        this.mixTargetDelta(0);\n      };\n      ProjectionNode.prototype.startAnimation = function (options) {\n        var _this = this;\n        var _a, _b;\n        (_a = this.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop();\n        if (this.resumingFrom) {\n          (_b = this.resumingFrom.currentAnimation) === null || _b === void 0 ? void 0 : _b.stop();\n        }\n        if (this.pendingAnimation) {\n          sync.cancelSync.update(this.pendingAnimation);\n          this.pendingAnimation = undefined;\n        }\n        /**\n         * Start the animation in the next frame to have a frame with progress 0,\n         * where the target is the same as when the animation started, so we can\n         * calculate the relative positions correctly for instant transitions.\n         */\n        this.pendingAnimation = sync__default[\"default\"].update(function () {\n          globalProjectionState.hasAnimatedSinceResize = true;\n          _this.currentAnimation = animate(0, animationTarget, tslib.__assign(tslib.__assign({}, options), {\n            onUpdate: function onUpdate(latest) {\n              var _a;\n              _this.mixTargetDelta(latest);\n              (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, latest);\n            },\n            onComplete: function onComplete() {\n              var _a;\n              (_a = options.onComplete) === null || _a === void 0 ? void 0 : _a.call(options);\n              _this.completeAnimation();\n            }\n          }));\n          if (_this.resumingFrom) {\n            _this.resumingFrom.currentAnimation = _this.currentAnimation;\n          }\n          _this.pendingAnimation = undefined;\n        });\n      };\n      ProjectionNode.prototype.completeAnimation = function () {\n        var _a;\n        if (this.resumingFrom) {\n          this.resumingFrom.currentAnimation = undefined;\n          this.resumingFrom.preserveOpacity = undefined;\n        }\n        (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.exitAnimationComplete();\n        this.resumingFrom = this.currentAnimation = this.animationValues = undefined;\n        this.notifyListeners(\"animationComplete\");\n      };\n      ProjectionNode.prototype.finishAnimation = function () {\n        var _a;\n        if (this.currentAnimation) {\n          (_a = this.mixTargetDelta) === null || _a === void 0 ? void 0 : _a.call(this, animationTarget);\n          this.currentAnimation.stop();\n        }\n        this.completeAnimation();\n      };\n      ProjectionNode.prototype.applyTransformsToTarget = function () {\n        var _a = this.getLead(),\n          targetWithTransforms = _a.targetWithTransforms,\n          target = _a.target,\n          layout = _a.layout,\n          latestValues = _a.latestValues;\n        if (!targetWithTransforms || !target || !layout) return;\n        copyBoxInto(targetWithTransforms, target);\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n        transformBox(targetWithTransforms, latestValues);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n        calcBoxDelta(this.projectionDeltaWithTransform, this.layoutCorrected, targetWithTransforms, latestValues);\n      };\n      ProjectionNode.prototype.registerSharedNode = function (layoutId, node) {\n        var _a, _b, _c;\n        if (!this.sharedNodes.has(layoutId)) {\n          this.sharedNodes.set(layoutId, new NodeStack());\n        }\n        var stack = this.sharedNodes.get(layoutId);\n        stack.add(node);\n        node.promote({\n          transition: (_a = node.options.initialPromotionConfig) === null || _a === void 0 ? void 0 : _a.transition,\n          preserveFollowOpacity: (_c = (_b = node.options.initialPromotionConfig) === null || _b === void 0 ? void 0 : _b.shouldPreserveFollowOpacity) === null || _c === void 0 ? void 0 : _c.call(_b, node)\n        });\n      };\n      ProjectionNode.prototype.isLead = function () {\n        var stack = this.getStack();\n        return stack ? stack.lead === this : true;\n      };\n      ProjectionNode.prototype.getLead = function () {\n        var _a;\n        var layoutId = this.options.layoutId;\n        return layoutId ? ((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.lead) || this : this;\n      };\n      ProjectionNode.prototype.getPrevLead = function () {\n        var _a;\n        var layoutId = this.options.layoutId;\n        return layoutId ? (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.prevLead : undefined;\n      };\n      ProjectionNode.prototype.getStack = function () {\n        var layoutId = this.options.layoutId;\n        if (layoutId) return this.root.sharedNodes.get(layoutId);\n      };\n      ProjectionNode.prototype.promote = function (_a) {\n        var _b = _a === void 0 ? {} : _a,\n          needsReset = _b.needsReset,\n          transition = _b.transition,\n          preserveFollowOpacity = _b.preserveFollowOpacity;\n        var stack = this.getStack();\n        if (stack) stack.promote(this, preserveFollowOpacity);\n        if (needsReset) {\n          this.projectionDelta = undefined;\n          this.needsReset = true;\n        }\n        if (transition) this.setOptions({\n          transition: transition\n        });\n      };\n      ProjectionNode.prototype.relegate = function () {\n        var stack = this.getStack();\n        if (stack) {\n          return stack.relegate(this);\n        } else {\n          return false;\n        }\n      };\n      ProjectionNode.prototype.resetRotation = function () {\n        var visualElement = this.options.visualElement;\n        if (!visualElement) return;\n        // If there's no detected rotation values, we can early return without a forced render.\n        var hasRotate = false;\n        // Keep a record of all the values we've reset\n        var resetValues = {};\n        // Check the rotate value of all axes and reset to 0\n        for (var i = 0; i < transformAxes.length; i++) {\n          var axis = transformAxes[i];\n          var key = \"rotate\" + axis;\n          // If this rotation doesn't exist as a motion value, then we don't\n          // need to reset it\n          if (!visualElement.getStaticValue(key)) {\n            continue;\n          }\n          hasRotate = true;\n          // Record the rotation and then temporarily set it to 0\n          resetValues[key] = visualElement.getStaticValue(key);\n          visualElement.setStaticValue(key, 0);\n        }\n        // If there's no rotation values, we don't need to do any more.\n        if (!hasRotate) return;\n        // Force a render of this element to apply the transform with all rotations\n        // set to 0.\n        visualElement === null || visualElement === void 0 ? void 0 : visualElement.syncRender();\n        // Put back all the values we reset\n        for (var key in resetValues) {\n          visualElement.setStaticValue(key, resetValues[key]);\n        }\n        // Schedule a render for the next frame. This ensures we won't visually\n        // see the element with the reset rotate value applied.\n        visualElement.scheduleRender();\n      };\n      ProjectionNode.prototype.getProjectionStyles = function (styleProp) {\n        var _a, _b, _c, _d, _e, _f;\n        if (styleProp === void 0) {\n          styleProp = {};\n        }\n        // TODO: Return lifecycle-persistent object\n        var styles = {};\n        if (!this.instance || this.isSVG) return styles;\n        if (!this.isVisible) {\n          return {\n            visibility: \"hidden\"\n          };\n        } else {\n          styles.visibility = \"\";\n        }\n        var transformTemplate = (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.getProps().transformTemplate;\n        if (this.needsReset) {\n          this.needsReset = false;\n          styles.opacity = \"\";\n          styles.pointerEvents = resolveMotionValue(styleProp.pointerEvents) || \"\";\n          styles.transform = transformTemplate ? transformTemplate(this.latestValues, \"\") : \"none\";\n          return styles;\n        }\n        var lead = this.getLead();\n        if (!this.projectionDelta || !this.layout || !lead.target) {\n          var emptyStyles = {};\n          if (this.options.layoutId) {\n            emptyStyles.opacity = (_b = this.latestValues.opacity) !== null && _b !== void 0 ? _b : 1;\n            emptyStyles.pointerEvents = resolveMotionValue(styleProp.pointerEvents) || \"\";\n          }\n          if (this.hasProjected && !hasTransform(this.latestValues)) {\n            emptyStyles.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\";\n            this.hasProjected = false;\n          }\n          return emptyStyles;\n        }\n        var valuesToRender = lead.animationValues || lead.latestValues;\n        this.applyTransformsToTarget();\n        styles.transform = buildProjectionTransform(this.projectionDeltaWithTransform, this.treeScale, valuesToRender);\n        if (transformTemplate) {\n          styles.transform = transformTemplate(valuesToRender, styles.transform);\n        }\n        var _g = this.projectionDelta,\n          x = _g.x,\n          y = _g.y;\n        styles.transformOrigin = \"\".concat(x.origin * 100, \"% \").concat(y.origin * 100, \"% 0\");\n        if (lead.animationValues) {\n          /**\n           * If the lead component is animating, assign this either the entering/leaving\n           * opacity\n           */\n          styles.opacity = lead === this ? (_d = (_c = valuesToRender.opacity) !== null && _c !== void 0 ? _c : this.latestValues.opacity) !== null && _d !== void 0 ? _d : 1 : this.preserveOpacity ? this.latestValues.opacity : valuesToRender.opacityExit;\n        } else {\n          /**\n           * Or we're not animating at all, set the lead component to its actual\n           * opacity and other components to hidden.\n           */\n          styles.opacity = lead === this ? (_e = valuesToRender.opacity) !== null && _e !== void 0 ? _e : \"\" : (_f = valuesToRender.opacityExit) !== null && _f !== void 0 ? _f : 0;\n        }\n        /**\n         * Apply scale correction\n         */\n        for (var key in scaleCorrectors) {\n          if (valuesToRender[key] === undefined) continue;\n          var _h = scaleCorrectors[key],\n            correct = _h.correct,\n            applyTo = _h.applyTo;\n          var corrected = correct(valuesToRender[key], lead);\n          if (applyTo) {\n            var num = applyTo.length;\n            for (var i = 0; i < num; i++) {\n              styles[applyTo[i]] = corrected;\n            }\n          } else {\n            styles[key] = corrected;\n          }\n        }\n        /**\n         * Disable pointer events on follow components. This is to ensure\n         * that if a follow component covers a lead component it doesn't block\n         * pointer events on the lead.\n         */\n        if (this.options.layoutId) {\n          styles.pointerEvents = lead === this ? resolveMotionValue(styleProp.pointerEvents) || \"\" : \"none\";\n        }\n        return styles;\n      };\n      ProjectionNode.prototype.clearSnapshot = function () {\n        this.resumeFrom = this.snapshot = undefined;\n      };\n      // Only run on root\n      ProjectionNode.prototype.resetTree = function () {\n        this.root.nodes.forEach(function (node) {\n          var _a;\n          return (_a = node.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop();\n        });\n        this.root.nodes.forEach(clearMeasurements);\n        this.root.sharedNodes.clear();\n      };\n      return ProjectionNode;\n    }()\n  );\n}\nfunction updateLayout(node) {\n  node.updateLayout();\n}\nfunction notifyLayoutUpdate(node) {\n  var _a, _b, _c, _d;\n  var snapshot = (_b = (_a = node.resumeFrom) === null || _a === void 0 ? void 0 : _a.snapshot) !== null && _b !== void 0 ? _b : node.snapshot;\n  if (node.isLead() && node.layout && snapshot && node.hasListeners(\"didUpdate\")) {\n    var _e = node.layout,\n      layout_1 = _e.actual,\n      measuredLayout = _e.measured;\n    // TODO Maybe we want to also resize the layout snapshot so we don't trigger\n    // animations for instance if layout=\"size\" and an element has only changed position\n    if (node.options.animationType === \"size\") {\n      eachAxis(function (axis) {\n        var axisSnapshot = snapshot.isShared ? snapshot.measured[axis] : snapshot.layout[axis];\n        var length = calcLength(axisSnapshot);\n        axisSnapshot.min = layout_1[axis].min;\n        axisSnapshot.max = axisSnapshot.min + length;\n      });\n    } else if (node.options.animationType === \"position\") {\n      eachAxis(function (axis) {\n        var axisSnapshot = snapshot.isShared ? snapshot.measured[axis] : snapshot.layout[axis];\n        var length = calcLength(layout_1[axis]);\n        axisSnapshot.max = axisSnapshot.min + length;\n      });\n    }\n    var layoutDelta = createDelta();\n    calcBoxDelta(layoutDelta, layout_1, snapshot.layout);\n    var visualDelta = createDelta();\n    if (snapshot.isShared) {\n      calcBoxDelta(visualDelta, node.applyTransform(measuredLayout, true), snapshot.measured);\n    } else {\n      calcBoxDelta(visualDelta, layout_1, snapshot.layout);\n    }\n    var hasLayoutChanged = !isDeltaZero(layoutDelta);\n    var hasRelativeTargetChanged = false;\n    if (!node.resumeFrom) {\n      node.relativeParent = node.getClosestProjectingParent();\n      /**\n       * If the relativeParent is itself resuming from a different element then\n       * the relative snapshot is not relavent\n       */\n      if (node.relativeParent && !node.relativeParent.resumeFrom) {\n        var _f = node.relativeParent,\n          parentSnapshot = _f.snapshot,\n          parentLayout = _f.layout;\n        if (parentSnapshot && parentLayout) {\n          var relativeSnapshot = createBox();\n          calcRelativePosition(relativeSnapshot, snapshot.layout, parentSnapshot.layout);\n          var relativeLayout = createBox();\n          calcRelativePosition(relativeLayout, layout_1, parentLayout.actual);\n          if (!boxEquals(relativeSnapshot, relativeLayout)) {\n            hasRelativeTargetChanged = true;\n          }\n        }\n      }\n    }\n    node.notifyListeners(\"didUpdate\", {\n      layout: layout_1,\n      snapshot: snapshot,\n      delta: visualDelta,\n      layoutDelta: layoutDelta,\n      hasLayoutChanged: hasLayoutChanged,\n      hasRelativeTargetChanged: hasRelativeTargetChanged\n    });\n  } else if (node.isLead()) {\n    (_d = (_c = node.options).onExitComplete) === null || _d === void 0 ? void 0 : _d.call(_c);\n  }\n  /**\n   * Clearing transition\n   * TODO: Investigate why this transition is being passed in as {type: false } from Framer\n   * and why we need it at all\n   */\n  node.options.transition = undefined;\n}\nfunction clearSnapshot(node) {\n  node.clearSnapshot();\n}\nfunction clearMeasurements(node) {\n  node.clearMeasurements();\n}\nfunction resetTransformStyle(node) {\n  node.resetTransform();\n}\nfunction finishAnimation(node) {\n  node.finishAnimation();\n  node.targetDelta = node.relativeTarget = node.target = undefined;\n}\nfunction resolveTargetDelta(node) {\n  node.resolveTargetDelta();\n}\nfunction calcProjection(node) {\n  node.calcProjection();\n}\nfunction resetRotation(node) {\n  node.resetRotation();\n}\nfunction removeLeadSnapshots(stack) {\n  stack.removeLeadSnapshot();\n}\nfunction mixAxisDelta(output, delta, p) {\n  output.translate = popmotion.mix(delta.translate, 0, p);\n  output.scale = popmotion.mix(delta.scale, 1, p);\n  output.origin = delta.origin;\n  output.originPoint = delta.originPoint;\n}\nfunction mixAxis(output, from, to, p) {\n  output.min = popmotion.mix(from.min, to.min, p);\n  output.max = popmotion.mix(from.max, to.max, p);\n}\nfunction mixBox(output, from, to, p) {\n  mixAxis(output.x, from.x, to.x, p);\n  mixAxis(output.y, from.y, to.y, p);\n}\nfunction hasOpacityCrossfade(node) {\n  return node.animationValues && node.animationValues.opacityExit !== undefined;\n}\nvar defaultLayoutTransition = {\n  duration: 0.45,\n  ease: [0.4, 0, 0.1, 1]\n};\nfunction mountNodeEarly(node, id) {\n  /**\n   * Rather than searching the DOM from document we can search the\n   * path for the deepest mounted ancestor and search from there\n   */\n  var searchNode = node.root;\n  for (var i = node.path.length - 1; i >= 0; i--) {\n    if (Boolean(node.path[i].instance)) {\n      searchNode = node.path[i];\n      break;\n    }\n  }\n  var searchElement = searchNode && searchNode !== node.root ? searchNode.instance : document;\n  var element = searchElement.querySelector(\"[data-projection-id=\\\"\".concat(id, \"\\\"]\"));\n  if (element) node.mount(element, true);\n}\nfunction roundAxis(axis) {\n  axis.min = Math.round(axis.min);\n  axis.max = Math.round(axis.max);\n}\nfunction roundBox(box) {\n  roundAxis(box.x);\n  roundAxis(box.y);\n}\nvar id = 1;\nfunction useProjectionId() {\n  return useConstant(function () {\n    if (globalProjectionState.hasEverUpdated) {\n      return id++;\n    }\n  });\n}\n\n/**\n * @internal\n */\nvar LayoutGroupContext = React.createContext({});\n\n/**\n * @internal\n */\nvar SwitchLayoutGroupContext = React.createContext({});\nfunction useProjection(projectionId, _a, visualElement, ProjectionNodeConstructor) {\n  var _b;\n  var layoutId = _a.layoutId,\n    layout = _a.layout,\n    drag = _a.drag,\n    dragConstraints = _a.dragConstraints,\n    layoutScroll = _a.layoutScroll;\n  var initialPromotionConfig = React.useContext(SwitchLayoutGroupContext);\n  if (!ProjectionNodeConstructor || !visualElement || (visualElement === null || visualElement === void 0 ? void 0 : visualElement.projection)) {\n    return;\n  }\n  visualElement.projection = new ProjectionNodeConstructor(projectionId, visualElement.getLatestValues(), (_b = visualElement.parent) === null || _b === void 0 ? void 0 : _b.projection);\n  visualElement.projection.setOptions({\n    layoutId: layoutId,\n    layout: layout,\n    alwaysMeasureLayout: Boolean(drag) || dragConstraints && isRefObject(dragConstraints),\n    visualElement: visualElement,\n    scheduleRender: function scheduleRender() {\n      return visualElement.scheduleRender();\n    },\n    /**\n     * TODO: Update options in an effect. This could be tricky as it'll be too late\n     * to update by the time layout animations run.\n     * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,\n     * ensuring it gets called if there's no potential layout animations.\n     *\n     */\n    animationType: typeof layout === \"string\" ? layout : \"both\",\n    initialPromotionConfig: initialPromotionConfig,\n    layoutScroll: layoutScroll\n  });\n}\nvar VisualElementHandler = /** @class */function (_super) {\n  tslib.__extends(VisualElementHandler, _super);\n  function VisualElementHandler() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * Update visual element props as soon as we know this update is going to be commited.\n   */\n  VisualElementHandler.prototype.getSnapshotBeforeUpdate = function () {\n    this.updateProps();\n    return null;\n  };\n  VisualElementHandler.prototype.componentDidUpdate = function () {};\n  VisualElementHandler.prototype.updateProps = function () {\n    var _a = this.props,\n      visualElement = _a.visualElement,\n      props = _a.props;\n    if (visualElement) visualElement.setProps(props);\n  };\n  VisualElementHandler.prototype.render = function () {\n    return this.props.children;\n  };\n  return VisualElementHandler;\n}(React__default[\"default\"].Component);\n\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n *\n * @internal\n */\nfunction createMotionComponent(_a) {\n  var preloadedFeatures = _a.preloadedFeatures,\n    createVisualElement = _a.createVisualElement,\n    projectionNodeConstructor = _a.projectionNodeConstructor,\n    useRender = _a.useRender,\n    useVisualState = _a.useVisualState,\n    Component = _a.Component;\n  preloadedFeatures && loadFeatures(preloadedFeatures);\n  function MotionComponent(props, externalRef) {\n    var layoutId = useLayoutId(props);\n    props = tslib.__assign(tslib.__assign({}, props), {\n      layoutId: layoutId\n    });\n    /**\n     * If we're rendering in a static environment, we only visually update the component\n     * as a result of a React-rerender rather than interactions or animations. This\n     * means we don't need to load additional memory structures like VisualElement,\n     * or any gesture/animation features.\n     */\n    var config = React.useContext(MotionConfigContext);\n    var features = null;\n    var context = useCreateMotionContext(props);\n    /**\n     * Create a unique projection ID for this component. If a new component is added\n     * during a layout animation we'll use this to query the DOM and hydrate its ref early, allowing\n     * us to measure it as soon as any layout effect flushes pending layout animations.\n     *\n     * Performance note: It'd be better not to have to search the DOM for these elements.\n     * For newly-entering components it could be enough to only correct treeScale, in which\n     * case we could mount in a scale-correction mode. This wouldn't be enough for\n     * shared element transitions however. Perhaps for those we could revert to a root node\n     * that gets forceRendered and layout animations are triggered on its layout effect.\n     */\n    var projectionId = config.isStatic ? undefined : useProjectionId();\n    /**\n     *\n     */\n    var visualState = useVisualState(props, config.isStatic);\n    if (!config.isStatic && isBrowser) {\n      /**\n       * Create a VisualElement for this component. A VisualElement provides a common\n       * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n       * providing a way of rendering to these APIs outside of the React render loop\n       * for more performant animations and interactions\n       */\n      context.visualElement = useVisualElement(Component, visualState, tslib.__assign(tslib.__assign({}, config), props), createVisualElement);\n      useProjection(projectionId, props, context.visualElement, projectionNodeConstructor || featureDefinitions.projectionNodeConstructor);\n      /**\n       * Load Motion gesture and animation features. These are rendered as renderless\n       * components so each feature can optionally make use of React lifecycle methods.\n       */\n      features = useFeatures(props, context.visualElement, preloadedFeatures);\n    }\n    /**\n     * The mount order and hierarchy is specific to ensure our element ref\n     * is hydrated by the time features fire their effects.\n     */\n    return React__namespace.createElement(VisualElementHandler, {\n      visualElement: context.visualElement,\n      props: tslib.__assign(tslib.__assign({}, config), props)\n    }, features, React__namespace.createElement(MotionContext.Provider, {\n      value: context\n    }, useRender(Component, props, projectionId, useMotionRef(visualState, context.visualElement, externalRef), visualState, config.isStatic, context.visualElement)));\n  }\n  return React.forwardRef(MotionComponent);\n}\nfunction useLayoutId(_a) {\n  var _b;\n  var layoutId = _a.layoutId;\n  var layoutGroupId = (_b = React.useContext(LayoutGroupContext)) === null || _b === void 0 ? void 0 : _b.id;\n  return layoutGroupId && layoutId !== undefined ? layoutGroupId + \"-\" + layoutId : layoutId;\n}\n\n/**\n * A list of all valid MotionProps.\n *\n * @internalremarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set([\"initial\", \"animate\", \"exit\", \"style\", \"variants\", \"transition\", \"transformTemplate\", \"transformValues\", \"custom\", \"inherit\", \"layout\", \"layoutId\", \"layoutDependency\", \"onLayoutAnimationComplete\", \"onLayoutMeasure\", \"onBeforeLayoutMeasure\", \"onAnimationStart\", \"onAnimationComplete\", \"onUpdate\", \"onDragStart\", \"onDrag\", \"onDragEnd\", \"onMeasureDragConstraints\", \"onDirectionLock\", \"onDragTransitionEnd\", \"drag\", \"dragControls\", \"dragListener\", \"dragConstraints\", \"dragDirectionLock\", \"dragSnapToOrigin\", \"_dragX\", \"_dragY\", \"dragElastic\", \"dragMomentum\", \"dragPropagation\", \"dragTransition\", \"whileDrag\", \"onPan\", \"onPanStart\", \"onPanEnd\", \"onPanSessionStart\", \"onTap\", \"onTapStart\", \"onTapCancel\", \"onHoverStart\", \"onHoverEnd\", \"whileFocus\", \"whileTap\", \"whileHover\", \"whileInView\", \"onViewportEnter\", \"onViewportLeave\", \"viewport\", \"layoutScroll\"]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\nfunction isValidMotionProp(key) {\n  return validMotionProps.has(key);\n}\nvar shouldForward = function shouldForward(key) {\n  return !isValidMotionProp(key);\n};\nfunction loadExternalIsValidProp(isValidProp) {\n  if (!isValidProp) return;\n  // Explicitly filter our events\n  shouldForward = function shouldForward(key) {\n    return key.startsWith(\"on\") ? !isValidMotionProp(key) : isValidProp(key);\n  };\n}\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\ntry {\n  /**\n   * We attempt to import this package but require won't be defined in esm environments, in that case\n   * isPropValid will have to be provided via `MotionContext`. In a 6.0.0 this should probably be removed\n   * in favour of explicit injection.\n   */\n  loadExternalIsValidProp(require(\"@emotion/is-prop-valid\").default);\n} catch (_a) {\n  // We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\nfunction filterProps(props, isDom, forwardMotionProps) {\n  var filteredProps = {};\n  for (var key in props) {\n    if (shouldForward(key) || forwardMotionProps === true && isValidMotionProp(key) || !isDom && !isValidMotionProp(key) ||\n    // If trying to use native HTML drag events, forward drag listeners\n    props[\"draggable\"] && key.startsWith(\"onDrag\")) {\n      filteredProps[key] = props[key];\n    }\n  }\n  return filteredProps;\n}\nfunction isAnimationControls(v) {\n  return typeof v === \"object\" && typeof v.start === \"function\";\n}\nfunction makeState(_a, props, context, presenceContext) {\n  var scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps,\n    createRenderState = _a.createRenderState,\n    onMount = _a.onMount;\n  var state = {\n    latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n    renderState: createRenderState()\n  };\n  if (onMount) {\n    state.mount = function (instance) {\n      return onMount(props, instance, state);\n    };\n  }\n  return state;\n}\nvar makeUseVisualState = function makeUseVisualState(config) {\n  return function (props, isStatic) {\n    var context = React.useContext(MotionContext);\n    var presenceContext = React.useContext(PresenceContext);\n    return isStatic ? makeState(config, props, context, presenceContext) : useConstant(function () {\n      return makeState(config, props, context, presenceContext);\n    });\n  };\n};\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n  var values = {};\n  var blockInitialAnimation = (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false;\n  var motionValues = scrapeMotionValues(props);\n  for (var key in motionValues) {\n    values[key] = resolveMotionValue(motionValues[key]);\n  }\n  var initial = props.initial,\n    animate = props.animate;\n  var isControllingVariants = checkIfControllingVariants(props);\n  var isVariantNode = checkIfVariantNode(props);\n  if (context && isVariantNode && !isControllingVariants && props.inherit !== false) {\n    initial !== null && initial !== void 0 ? initial : initial = context.initial;\n    animate !== null && animate !== void 0 ? animate : animate = context.animate;\n  }\n  var initialAnimationIsBlocked = blockInitialAnimation || initial === false;\n  var variantToSet = initialAnimationIsBlocked ? animate : initial;\n  if (variantToSet && typeof variantToSet !== \"boolean\" && !isAnimationControls(variantToSet)) {\n    var list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n    list.forEach(function (definition) {\n      var resolved = resolveVariantFromProps(props, definition);\n      if (!resolved) return;\n      var transitionEnd = resolved.transitionEnd;\n      resolved.transition;\n      var target = tslib.__rest(resolved, [\"transitionEnd\", \"transition\"]);\n      for (var key in target) {\n        var valueTarget = target[key];\n        if (Array.isArray(valueTarget)) {\n          /**\n           * Take final keyframe if the initial animation is blocked because\n           * we want to initialise at the end of that blocked animation.\n           */\n          var index = initialAnimationIsBlocked ? valueTarget.length - 1 : 0;\n          valueTarget = valueTarget[index];\n        }\n        if (valueTarget !== null) {\n          values[key] = valueTarget;\n        }\n      }\n      for (var key in transitionEnd) {\n        values[key] = transitionEnd[key];\n      }\n    });\n  }\n  return values;\n}\nexports.AnimationType = void 0;\n(function (AnimationType) {\n  AnimationType[\"Animate\"] = \"animate\";\n  AnimationType[\"Hover\"] = \"whileHover\";\n  AnimationType[\"Tap\"] = \"whileTap\";\n  AnimationType[\"Drag\"] = \"whileDrag\";\n  AnimationType[\"Focus\"] = \"whileFocus\";\n  AnimationType[\"InView\"] = \"whileInView\";\n  AnimationType[\"Exit\"] = \"exit\";\n})(exports.AnimationType || (exports.AnimationType = {}));\nfunction addDomEvent(target, eventName, handler, options) {\n  target.addEventListener(eventName, handler, options);\n  return function () {\n    return target.removeEventListener(eventName, handler, options);\n  };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\nfunction useDomEvent(ref, eventName, handler, options) {\n  React.useEffect(function () {\n    var element = ref.current;\n    if (handler && element) {\n      return addDomEvent(element, eventName, handler, options);\n    }\n  }, [ref, eventName, handler, options]);\n}\nfunction isMouseEvent(event) {\n  // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n  if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n    return !!(event.pointerType === \"mouse\");\n  }\n  return event instanceof MouseEvent;\n}\nfunction isTouchEvent(event) {\n  var hasTouches = !!event.touches;\n  return hasTouches;\n}\n\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\nfunction filterPrimaryPointer(eventHandler) {\n  return function (event) {\n    var isMouseEvent = event instanceof MouseEvent;\n    var isPrimaryPointer = !isMouseEvent || isMouseEvent && event.button === 0;\n    if (isPrimaryPointer) {\n      eventHandler(event);\n    }\n  };\n}\nvar defaultPagePoint = {\n  pageX: 0,\n  pageY: 0\n};\nfunction pointFromTouch(e, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  var primaryTouch = e.touches[0] || e.changedTouches[0];\n  var point = primaryTouch || defaultPagePoint;\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\nfunction pointFromMouse(point, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\nfunction extractEventInfo(event, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  return {\n    point: isTouchEvent(event) ? pointFromTouch(event, pointType) : pointFromMouse(event, pointType)\n  };\n}\nvar wrapHandler = function wrapHandler(handler, shouldFilterPrimaryPointer) {\n  if (shouldFilterPrimaryPointer === void 0) {\n    shouldFilterPrimaryPointer = false;\n  }\n  var listener = function listener(event) {\n    return handler(event, extractEventInfo(event));\n  };\n  return shouldFilterPrimaryPointer ? filterPrimaryPointer(listener) : listener;\n};\n\n// We check for event support via functions in case they've been mocked by a testing suite.\nvar supportsPointerEvents = function supportsPointerEvents() {\n  return isBrowser && window.onpointerdown === null;\n};\nvar supportsTouchEvents = function supportsTouchEvents() {\n  return isBrowser && window.ontouchstart === null;\n};\nvar supportsMouseEvents = function supportsMouseEvents() {\n  return isBrowser && window.onmousedown === null;\n};\nvar mouseEventNames = {\n  pointerdown: \"mousedown\",\n  pointermove: \"mousemove\",\n  pointerup: \"mouseup\",\n  pointercancel: \"mousecancel\",\n  pointerover: \"mouseover\",\n  pointerout: \"mouseout\",\n  pointerenter: \"mouseenter\",\n  pointerleave: \"mouseleave\"\n};\nvar touchEventNames = {\n  pointerdown: \"touchstart\",\n  pointermove: \"touchmove\",\n  pointerup: \"touchend\",\n  pointercancel: \"touchcancel\"\n};\nfunction getPointerEventName(name) {\n  if (supportsPointerEvents()) {\n    return name;\n  } else if (supportsTouchEvents()) {\n    return touchEventNames[name];\n  } else if (supportsMouseEvents()) {\n    return mouseEventNames[name];\n  }\n  return name;\n}\nfunction addPointerEvent(target, eventName, handler, options) {\n  return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction usePointerEvent(ref, eventName, handler, options) {\n  return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction createLock(name) {\n  var lock = null;\n  return function () {\n    var openLock = function openLock() {\n      lock = null;\n    };\n    if (lock === null) {\n      lock = name;\n      return openLock;\n    }\n    return false;\n  };\n}\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n  var lock = false;\n  if (drag === \"y\") {\n    lock = globalVerticalLock();\n  } else if (drag === \"x\") {\n    lock = globalHorizontalLock();\n  } else {\n    var openHorizontal_1 = globalHorizontalLock();\n    var openVertical_1 = globalVerticalLock();\n    if (openHorizontal_1 && openVertical_1) {\n      lock = function lock() {\n        openHorizontal_1();\n        openVertical_1();\n      };\n    } else {\n      // Release the locks because we don't use them\n      if (openHorizontal_1) openHorizontal_1();\n      if (openVertical_1) openVertical_1();\n    }\n  }\n  return lock;\n}\nfunction isDragActive() {\n  // Check the gesture lock - if we get it, it means no drag gesture is active\n  // and we can safely fire the tap gesture.\n  var openGestureLock = getGlobalLock(true);\n  if (!openGestureLock) return true;\n  openGestureLock();\n  return false;\n}\nfunction useUnmountEffect(callback) {\n  return React.useEffect(function () {\n    return function () {\n      return callback();\n    };\n  }, []);\n}\nvar makeRenderlessComponent = function makeRenderlessComponent(hook) {\n  return function (props) {\n    hook(props);\n    return null;\n  };\n};\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence() {\n  var context = React.useContext(PresenceContext);\n  if (context === null) return [true, null];\n  var isPresent = context.isPresent,\n    onExitComplete = context.onExitComplete,\n    register = context.register;\n  // It's safe to call the following hooks conditionally (after an early return) because the context will always\n  // either be null or non-null for the lifespan of the component.\n  // Replace with useOpaqueId when released in React\n  var id = useUniqueId();\n  React.useEffect(function () {\n    return register(id);\n  }, []);\n  var safeToRemove = function safeToRemove() {\n    return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id);\n  };\n  return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n  return isPresent(React.useContext(PresenceContext));\n}\nfunction isPresent(context) {\n  return context === null ? true : context.isPresent;\n}\nvar counter = 0;\nvar incrementId = function incrementId() {\n  return counter++;\n};\nvar useUniqueId = function useUniqueId() {\n  return useConstant(incrementId);\n};\nfunction shallowCompare(next, prev) {\n  if (!Array.isArray(prev)) return false;\n  var prevLength = prev.length;\n  if (prevLength !== next.length) return false;\n  for (var i = 0; i < prevLength; i++) {\n    if (prev[i] !== next[i]) return false;\n  }\n  return true;\n}\n\n/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nvar isNumericalString = function isNumericalString(v) {\n  return /^\\-?\\d*\\.?\\d+$/.test(v);\n};\n\n/**\n * Check if the value is a zero value string like \"0px\" or \"0%\"\n */\nvar isZeroValueString = function isZeroValueString(v) {\n  return /^0[^.\\s]+$/.test(v);\n};\n\n/**\n * Tests a provided value against a ValueType\n */\nvar testValueType = function testValueType(v) {\n  return function (type) {\n    return type.test(v);\n  };\n};\n\n/**\n * ValueType for \"auto\"\n */\nvar auto = {\n  test: function test(v) {\n    return v === \"auto\";\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\n\n/**\n * A list of value types commonly used for dimensions\n */\nvar dimensionValueTypes = [styleValueTypes.number, styleValueTypes.px, styleValueTypes.percent, styleValueTypes.degrees, styleValueTypes.vw, styleValueTypes.vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nvar findDimensionValueType = function findDimensionValueType(v) {\n  return dimensionValueTypes.find(testValueType(v));\n};\n\n/**\n * A list of all ValueTypes\n */\nvar valueTypes = tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(dimensionValueTypes), false), [styleValueTypes.color, styleValueTypes.complex], false);\n/**\n * Tests a value against the list of ValueTypes\n */\nvar findValueType = function findValueType(v) {\n  return valueTypes.find(testValueType(v));\n};\n\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\nfunction setMotionValue(visualElement, key, value) {\n  if (visualElement.hasValue(key)) {\n    visualElement.getValue(key).set(value);\n  } else {\n    visualElement.addValue(key, motionValue(value));\n  }\n}\nfunction setTarget(visualElement, definition) {\n  var resolved = resolveVariant(visualElement, definition);\n  var _a = resolved ? visualElement.makeTargetAnimatable(resolved, false) : {},\n    _b = _a.transitionEnd,\n    transitionEnd = _b === void 0 ? {} : _b;\n  _a.transition;\n  var target = tslib.__rest(_a, [\"transitionEnd\", \"transition\"]);\n  target = tslib.__assign(tslib.__assign({}, target), transitionEnd);\n  for (var key in target) {\n    var value = resolveFinalValueInKeyframes(target[key]);\n    setMotionValue(visualElement, key, value);\n  }\n}\nfunction setVariants(visualElement, variantLabels) {\n  var reversedLabels = tslib.__spreadArray([], tslib.__read(variantLabels), false).reverse();\n  reversedLabels.forEach(function (key) {\n    var _a;\n    var variant = visualElement.getVariant(key);\n    variant && setTarget(visualElement, variant);\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      setVariants(child, variantLabels);\n    });\n  });\n}\nfunction setValues(visualElement, definition) {\n  if (Array.isArray(definition)) {\n    return setVariants(visualElement, definition);\n  } else if (typeof definition === \"string\") {\n    return setVariants(visualElement, [definition]);\n  } else {\n    setTarget(visualElement, definition);\n  }\n}\nfunction checkTargetForNewValues(visualElement, target, origin) {\n  var _a, _b, _c;\n  var _d;\n  var newValueKeys = Object.keys(target).filter(function (key) {\n    return !visualElement.hasValue(key);\n  });\n  var numNewValues = newValueKeys.length;\n  if (!numNewValues) return;\n  for (var i = 0; i < numNewValues; i++) {\n    var key = newValueKeys[i];\n    var targetValue = target[key];\n    var value = null;\n    /**\n     * If the target is a series of keyframes, we can use the first value\n     * in the array. If this first value is null, we'll still need to read from the DOM.\n     */\n    if (Array.isArray(targetValue)) {\n      value = targetValue[0];\n    }\n    /**\n     * If the target isn't keyframes, or the first keyframe was null, we need to\n     * first check if an origin value was explicitly defined in the transition as \"from\",\n     * if not read the value from the DOM. As an absolute fallback, take the defined target value.\n     */\n    if (value === null) {\n      value = (_b = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readValue(key)) !== null && _b !== void 0 ? _b : target[key];\n    }\n    /**\n     * If value is still undefined or null, ignore it. Preferably this would throw,\n     * but this was causing issues in Framer.\n     */\n    if (value === undefined || value === null) continue;\n    if (typeof value === \"string\" && (isNumericalString(value) || isZeroValueString(value))) {\n      // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n      value = parseFloat(value);\n    } else if (!findValueType(value) && styleValueTypes.complex.test(targetValue)) {\n      value = getAnimatableNone(key, targetValue);\n    }\n    visualElement.addValue(key, motionValue(value));\n    (_c = (_d = origin)[key]) !== null && _c !== void 0 ? _c : _d[key] = value;\n    visualElement.setBaseTarget(key, value);\n  }\n}\nfunction getOriginFromTransition(key, transition) {\n  if (!transition) return;\n  var valueTransition = transition[key] || transition[\"default\"] || transition;\n  return valueTransition.from;\n}\nfunction getOrigin(target, transition, visualElement) {\n  var _a, _b;\n  var origin = {};\n  for (var key in target) {\n    origin[key] = (_a = getOriginFromTransition(key, transition)) !== null && _a !== void 0 ? _a : (_b = visualElement.getValue(key)) === null || _b === void 0 ? void 0 : _b.get();\n  }\n  return origin;\n}\n\n/**\n * @internal\n */\nfunction animateVisualElement(visualElement, definition, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  visualElement.notifyAnimationStart(definition);\n  var animation;\n  if (Array.isArray(definition)) {\n    var animations = definition.map(function (variant) {\n      return animateVariant(visualElement, variant, options);\n    });\n    animation = Promise.all(animations);\n  } else if (typeof definition === \"string\") {\n    animation = animateVariant(visualElement, definition, options);\n  } else {\n    var resolvedDefinition = typeof definition === \"function\" ? resolveVariant(visualElement, definition, options.custom) : definition;\n    animation = animateTarget(visualElement, resolvedDefinition, options);\n  }\n  return animation.then(function () {\n    return visualElement.notifyAnimationComplete(definition);\n  });\n}\nfunction animateVariant(visualElement, variant, options) {\n  var _a;\n  if (options === void 0) {\n    options = {};\n  }\n  var resolved = resolveVariant(visualElement, variant, options.custom);\n  var _b = (resolved || {}).transition,\n    transition = _b === void 0 ? visualElement.getDefaultTransition() || {} : _b;\n  if (options.transitionOverride) {\n    transition = options.transitionOverride;\n  }\n  /**\n   * If we have a variant, create a callback that runs it as an animation.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n  var getAnimation = resolved ? function () {\n    return animateTarget(visualElement, resolved, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If we have children, create a callback that runs all their animations.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n  var getChildAnimations = ((_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.size) ? function (forwardDelay) {\n    if (forwardDelay === void 0) {\n      forwardDelay = 0;\n    }\n    var _a = transition.delayChildren,\n      delayChildren = _a === void 0 ? 0 : _a,\n      staggerChildren = transition.staggerChildren,\n      staggerDirection = transition.staggerDirection;\n    return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If the transition explicitly defines a \"when\" option, we need to resolve either\n   * this animation or all children animations before playing the other.\n   */\n  var when = transition.when;\n  if (when) {\n    var _c = tslib.__read(when === \"beforeChildren\" ? [getAnimation, getChildAnimations] : [getChildAnimations, getAnimation], 2),\n      first = _c[0],\n      last = _c[1];\n    return first().then(last);\n  } else {\n    return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n  }\n}\n/**\n * @internal\n */\nfunction animateTarget(visualElement, definition, _a) {\n  var _b;\n  var _c = _a === void 0 ? {} : _a,\n    _d = _c.delay,\n    delay = _d === void 0 ? 0 : _d,\n    transitionOverride = _c.transitionOverride,\n    type = _c.type;\n  var _e = visualElement.makeTargetAnimatable(definition),\n    _f = _e.transition,\n    transition = _f === void 0 ? visualElement.getDefaultTransition() : _f,\n    transitionEnd = _e.transitionEnd,\n    target = tslib.__rest(_e, [\"transition\", \"transitionEnd\"]);\n  if (transitionOverride) transition = transitionOverride;\n  var animations = [];\n  var animationTypeState = type && ((_b = visualElement.animationState) === null || _b === void 0 ? void 0 : _b.getState()[type]);\n  for (var key in target) {\n    var value = visualElement.getValue(key);\n    var valueTarget = target[key];\n    if (!value || valueTarget === undefined || animationTypeState && shouldBlockAnimation(animationTypeState, key)) {\n      continue;\n    }\n    var animation = startAnimation(key, value, valueTarget, tslib.__assign({\n      delay: delay\n    }, transition));\n    animations.push(animation);\n  }\n  return Promise.all(animations).then(function () {\n    transitionEnd && setTarget(visualElement, transitionEnd);\n  });\n}\nfunction animateChildren(visualElement, variant, delayChildren, staggerChildren, staggerDirection, options) {\n  if (delayChildren === void 0) {\n    delayChildren = 0;\n  }\n  if (staggerChildren === void 0) {\n    staggerChildren = 0;\n  }\n  if (staggerDirection === void 0) {\n    staggerDirection = 1;\n  }\n  var animations = [];\n  var maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n  var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n    return i * staggerChildren;\n  } : function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n    return maxStaggerDuration - i * staggerChildren;\n  };\n  Array.from(visualElement.variantChildren).sort(sortByTreeOrder).forEach(function (child, i) {\n    animations.push(animateVariant(child, variant, tslib.__assign(tslib.__assign({}, options), {\n      delay: delayChildren + generateStaggerDuration(i)\n    })).then(function () {\n      return child.notifyAnimationComplete(variant);\n    }));\n  });\n  return Promise.all(animations);\n}\nfunction stopAnimation(visualElement) {\n  visualElement.forEachValue(function (value) {\n    return value.stop();\n  });\n}\nfunction sortByTreeOrder(a, b) {\n  return a.sortNodePosition(b);\n}\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\nfunction shouldBlockAnimation(_a, key) {\n  var protectedKeys = _a.protectedKeys,\n    needsAnimating = _a.needsAnimating;\n  var shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n  needsAnimating[key] = false;\n  return shouldBlock;\n}\nvar variantPriorityOrder = [exports.AnimationType.Animate, exports.AnimationType.InView, exports.AnimationType.Focus, exports.AnimationType.Hover, exports.AnimationType.Tap, exports.AnimationType.Drag, exports.AnimationType.Exit];\nvar reversePriorityOrder = tslib.__spreadArray([], tslib.__read(variantPriorityOrder), false).reverse();\nvar numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n  return function (animations) {\n    return Promise.all(animations.map(function (_a) {\n      var animation = _a.animation,\n        options = _a.options;\n      return animateVisualElement(visualElement, animation, options);\n    }));\n  };\n}\nfunction createAnimationState(visualElement) {\n  var animate = animateList(visualElement);\n  var state = createState();\n  var allAnimatedKeys = {};\n  var isInitialRender = true;\n  /**\n   * This function will be used to reduce the animation definitions for\n   * each active animation type into an object of resolved values for it.\n   */\n  var buildResolvedTypeValues = function buildResolvedTypeValues(acc, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n    if (resolved) {\n      resolved.transition;\n      var transitionEnd = resolved.transitionEnd,\n        target = tslib.__rest(resolved, [\"transition\", \"transitionEnd\"]);\n      acc = tslib.__assign(tslib.__assign(tslib.__assign({}, acc), target), transitionEnd);\n    }\n    return acc;\n  };\n  function isAnimated(key) {\n    return allAnimatedKeys[key] !== undefined;\n  }\n  /**\n   * This just allows us to inject mocked animation functions\n   * @internal\n   */\n  function setAnimateFunction(makeAnimator) {\n    animate = makeAnimator(visualElement);\n  }\n  /**\n   * When we receive new props, we need to:\n   * 1. Create a list of protected keys for each type. This is a directory of\n   *    value keys that are currently being \"handled\" by types of a higher priority\n   *    so that whenever an animation is played of a given type, these values are\n   *    protected from being animated.\n   * 2. Determine if an animation type needs animating.\n   * 3. Determine if any values have been removed from a type and figure out\n   *    what to animate those to.\n   */\n  function animateChanges(options, changedActiveType) {\n    var _a;\n    var props = visualElement.getProps();\n    var context = visualElement.getVariantContext(true) || {};\n    /**\n     * A list of animations that we'll build into as we iterate through the animation\n     * types. This will get executed at the end of the function.\n     */\n    var animations = [];\n    /**\n     * Keep track of which values have been removed. Then, as we hit lower priority\n     * animation types, we can check if they contain removed values and animate to that.\n     */\n    var removedKeys = new Set();\n    /**\n     * A dictionary of all encountered keys. This is an object to let us build into and\n     * copy it without iteration. Each time we hit an animation type we set its protected\n     * keys - the keys its not allowed to animate - to the latest version of this object.\n     */\n    var encounteredKeys = {};\n    /**\n     * If a variant has been removed at a given index, and this component is controlling\n     * variant animations, we want to ensure lower-priority variants are forced to animate.\n     */\n    var removedVariantIndex = Infinity;\n    var _loop_1 = function _loop_1(i) {\n      var type = reversePriorityOrder[i];\n      var typeState = state[type];\n      var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n      var propIsVariant = isVariantLabel(prop);\n      /**\n       * If this type has *just* changed isActive status, set activeDelta\n       * to that status. Otherwise set to null.\n       */\n      var activeDelta = type === changedActiveType ? typeState.isActive : null;\n      if (activeDelta === false) removedVariantIndex = i;\n      /**\n       * If this prop is an inherited variant, rather than been set directly on the\n       * component itself, we want to make sure we allow the parent to trigger animations.\n       *\n       * TODO: Can probably change this to a !isControllingVariants check\n       */\n      var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n      /**\n       *\n       */\n      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {\n        isInherited = false;\n      }\n      /**\n       * Set all encountered keys so far as the protected keys for this type. This will\n       * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n       */\n      typeState.protectedKeys = tslib.__assign({}, encounteredKeys);\n      // Check if we can skip analysing this prop early\n      if (\n      // If it isn't active and hasn't *just* been set as inactive\n      !typeState.isActive && activeDelta === null ||\n      // If we didn't and don't have any defined prop for this animation type\n      !prop && !typeState.prevProp ||\n      // Or if the prop doesn't define an animation\n      isAnimationControls(prop) || typeof prop === \"boolean\") {\n        return \"continue\";\n      }\n      /**\n       * As we go look through the values defined on this type, if we detect\n       * a changed value or a value that was removed in a higher priority, we set\n       * this to true and add this prop to the animation list.\n       */\n      var variantDidChange = checkVariantsDidChange(typeState.prevProp, prop);\n      var shouldAnimateType = variantDidChange ||\n      // If we're making this variant active, we want to always make it active\n      type === changedActiveType && typeState.isActive && !isInherited && propIsVariant ||\n      // If we removed a higher-priority variant (i is in reverse order)\n      i > removedVariantIndex && propIsVariant;\n      /**\n       * As animations can be set as variant lists, variants or target objects, we\n       * coerce everything to an array if it isn't one already\n       */\n      var definitionList = Array.isArray(prop) ? prop : [prop];\n      /**\n       * Build an object of all the resolved values. We'll use this in the subsequent\n       * animateChanges calls to determine whether a value has changed.\n       */\n      var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n      if (activeDelta === false) resolvedValues = {};\n      /**\n       * Now we need to loop through all the keys in the prev prop and this prop,\n       * and decide:\n       * 1. If the value has changed, and needs animating\n       * 2. If it has been removed, and needs adding to the removedKeys set\n       * 3. If it has been removed in a higher priority type and needs animating\n       * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n       *    needs adding to the type's protectedKeys list.\n       */\n      var _b = typeState.prevResolvedValues,\n        prevResolvedValues = _b === void 0 ? {} : _b;\n      var allKeys = tslib.__assign(tslib.__assign({}, prevResolvedValues), resolvedValues);\n      var markToAnimate = function markToAnimate(key) {\n        shouldAnimateType = true;\n        removedKeys.delete(key);\n        typeState.needsAnimating[key] = true;\n      };\n      for (var key in allKeys) {\n        var next = resolvedValues[key];\n        var prev = prevResolvedValues[key];\n        // If we've already handled this we can just skip ahead\n        if (encounteredKeys.hasOwnProperty(key)) continue;\n        /**\n         * If the value has changed, we probably want to animate it.\n         */\n        if (next !== prev) {\n          /**\n           * If both values are keyframes, we need to shallow compare them to\n           * detect whether any value has changed. If it has, we animate it.\n           */\n          if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n            if (!shallowCompare(next, prev) || variantDidChange) {\n              markToAnimate(key);\n            } else {\n              /**\n               * If it hasn't changed, we want to ensure it doesn't animate by\n               * adding it to the list of protected keys.\n               */\n              typeState.protectedKeys[key] = true;\n            }\n          } else if (next !== undefined) {\n            // If next is defined and doesn't equal prev, it needs animating\n            markToAnimate(key);\n          } else {\n            // If it's undefined, it's been removed.\n            removedKeys.add(key);\n          }\n        } else if (next !== undefined && removedKeys.has(key)) {\n          /**\n           * If next hasn't changed and it isn't undefined, we want to check if it's\n           * been removed by a higher priority\n           */\n          markToAnimate(key);\n        } else {\n          /**\n           * If it hasn't changed, we add it to the list of protected values\n           * to ensure it doesn't get animated.\n           */\n          typeState.protectedKeys[key] = true;\n        }\n      }\n      /**\n       * Update the typeState so next time animateChanges is called we can compare the\n       * latest prop and resolvedValues to these.\n       */\n      typeState.prevProp = prop;\n      typeState.prevResolvedValues = resolvedValues;\n      /**\n       *\n       */\n      if (typeState.isActive) {\n        encounteredKeys = tslib.__assign(tslib.__assign({}, encounteredKeys), resolvedValues);\n      }\n      if (isInitialRender && visualElement.blockInitialAnimation) {\n        shouldAnimateType = false;\n      }\n      /**\n       * If this is an inherited prop we want to hard-block animations\n       * TODO: Test as this should probably still handle animations triggered\n       * by removed values?\n       */\n      if (shouldAnimateType && !isInherited) {\n        animations.push.apply(animations, tslib.__spreadArray([], tslib.__read(definitionList.map(function (animation) {\n          return {\n            animation: animation,\n            options: tslib.__assign({\n              type: type\n            }, options)\n          };\n        })), false));\n      }\n    };\n    /**\n     * Iterate through all animation types in reverse priority order. For each, we want to\n     * detect which values it's handling and whether or not they've changed (and therefore\n     * need to be animated). If any values have been removed, we want to detect those in\n     * lower priority props and flag for animation.\n     */\n    for (var i = 0; i < numAnimationTypes; i++) {\n      _loop_1(i);\n    }\n    allAnimatedKeys = tslib.__assign({}, encounteredKeys);\n    /**\n     * If there are some removed value that haven't been dealt with,\n     * we need to create a new animation that falls back either to the value\n     * defined in the style prop, or the last read value.\n     */\n    if (removedKeys.size) {\n      var fallbackAnimation_1 = {};\n      removedKeys.forEach(function (key) {\n        var fallbackTarget = visualElement.getBaseTarget(key);\n        if (fallbackTarget !== undefined) {\n          fallbackAnimation_1[key] = fallbackTarget;\n        }\n      });\n      animations.push({\n        animation: fallbackAnimation_1\n      });\n    }\n    var shouldAnimate = Boolean(animations.length);\n    if (isInitialRender && props.initial === false && !visualElement.manuallyAnimateOnMount) {\n      shouldAnimate = false;\n    }\n    isInitialRender = false;\n    return shouldAnimate ? animate(animations) : Promise.resolve();\n  }\n  /**\n   * Change whether a certain animation type is active.\n   */\n  function setActive(type, isActive, options) {\n    var _a;\n    // If the active state hasn't changed, we can safely do nothing here\n    if (state[type].isActive === isActive) return Promise.resolve();\n    // Propagate active change to children\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      var _a;\n      return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive);\n    });\n    state[type].isActive = isActive;\n    return animateChanges(options, type);\n  }\n  return {\n    isAnimated: isAnimated,\n    animateChanges: animateChanges,\n    setActive: setActive,\n    setAnimateFunction: setAnimateFunction,\n    getState: function getState() {\n      return state;\n    }\n  };\n}\nfunction checkVariantsDidChange(prev, next) {\n  if (typeof next === \"string\") {\n    return next !== prev;\n  } else if (isVariantLabels(next)) {\n    return !shallowCompare(next, prev);\n  }\n  return false;\n}\nfunction createTypeState(isActive) {\n  if (isActive === void 0) {\n    isActive = false;\n  }\n  return {\n    isActive: isActive,\n    protectedKeys: {},\n    needsAnimating: {},\n    prevResolvedValues: {}\n  };\n}\nfunction createState() {\n  var _a;\n  return _a = {}, _a[exports.AnimationType.Animate] = createTypeState(true), _a[exports.AnimationType.InView] = createTypeState(), _a[exports.AnimationType.Hover] = createTypeState(), _a[exports.AnimationType.Tap] = createTypeState(), _a[exports.AnimationType.Drag] = createTypeState(), _a[exports.AnimationType.Focus] = createTypeState(), _a[exports.AnimationType.Exit] = createTypeState(), _a;\n}\nvar animations = {\n  animation: makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement,\n      animate = _a.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n    visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n    if (isAnimationControls(animate)) {\n      React.useEffect(function () {\n        return animate.subscribe(visualElement);\n      }, [animate]);\n    }\n  }),\n  exit: makeRenderlessComponent(function (props) {\n    var custom = props.custom,\n      visualElement = props.visualElement;\n    var _a = tslib.__read(usePresence(), 2),\n      isPresent = _a[0],\n      safeToRemove = _a[1];\n    var presenceContext = React.useContext(PresenceContext);\n    React.useEffect(function () {\n      var _a, _b;\n      visualElement.isPresent = isPresent;\n      var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.Exit, !isPresent, {\n        custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom\n      });\n      !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(safeToRemove));\n    }, [isPresent]);\n  })\n};\nvar names = [\"LayoutMeasure\", \"BeforeLayoutMeasure\", \"LayoutUpdate\", \"ViewportBoxUpdate\", \"Update\", \"Render\", \"AnimationComplete\", \"LayoutAnimationComplete\", \"AnimationStart\", \"SetAxisTarget\", \"Unmount\"];\nfunction createLifecycles() {\n  var managers = names.map(function () {\n    return new SubscriptionManager();\n  });\n  var propSubscriptions = {};\n  var lifecycles = {\n    clearAllListeners: function clearAllListeners() {\n      return managers.forEach(function (manager) {\n        return manager.clear();\n      });\n    },\n    updatePropListeners: function updatePropListeners(props) {\n      names.forEach(function (name) {\n        var _a;\n        var on = \"on\" + name;\n        var propListener = props[on];\n        // Unsubscribe existing subscription\n        (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n        // Add new subscription\n        if (propListener) {\n          propSubscriptions[name] = lifecycles[on](propListener);\n        }\n      });\n    }\n  };\n  managers.forEach(function (manager, i) {\n    lifecycles[\"on\" + names[i]] = function (handler) {\n      return manager.add(handler);\n    };\n    lifecycles[\"notify\" + names[i]] = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      manager.notify.apply(manager, tslib.__spreadArray([], tslib.__read(args), false));\n    };\n  });\n  return lifecycles;\n}\nfunction updateMotionValuesFromProps(element, next, prev) {\n  var _a;\n  for (var key in next) {\n    var nextValue = next[key];\n    var prevValue = prev[key];\n    if (isMotionValue(nextValue)) {\n      /**\n       * If this is a motion value found in props or style, we want to add it\n       * to our visual element's motion value map.\n       */\n      element.addValue(key, nextValue);\n    } else if (isMotionValue(prevValue)) {\n      /**\n       * If we're swapping to a new motion value, create a new motion value\n       * from that\n       */\n      element.addValue(key, motionValue(nextValue));\n    } else if (prevValue !== nextValue) {\n      /**\n       * If this is a flat value that has changed, update the motion value\n       * or create one if it doesn't exist. We only want to do this if we're\n       * not handling the value with our animation state.\n       */\n      if (element.hasValue(key)) {\n        var existingValue = element.getValue(key);\n        // TODO: Only update values that aren't being animated or even looked at\n        !existingValue.hasAnimated && existingValue.set(nextValue);\n      } else {\n        element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n      }\n    }\n  }\n  // Handle removed values\n  for (var key in prev) {\n    if (next[key] === undefined) element.removeValue(key);\n  }\n  return next;\n}\nvar visualElement = function visualElement(_a) {\n  var _b = _a.treeType,\n    treeType = _b === void 0 ? \"\" : _b,\n    build = _a.build,\n    _getBaseTarget = _a.getBaseTarget,\n    _makeTargetAnimatable = _a.makeTargetAnimatable,\n    _measureViewportBox = _a.measureViewportBox,\n    renderInstance = _a.render,\n    readValueFromInstance = _a.readValueFromInstance,\n    removeValueFromRenderState = _a.removeValueFromRenderState,\n    _sortNodePosition = _a.sortNodePosition,\n    scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n  return function (_a, options) {\n    var parent = _a.parent,\n      props = _a.props,\n      presenceId = _a.presenceId,\n      blockInitialAnimation = _a.blockInitialAnimation,\n      visualState = _a.visualState;\n    if (options === void 0) {\n      options = {};\n    }\n    var isMounted = false;\n    var latestValues = visualState.latestValues,\n      renderState = visualState.renderState;\n    /**\n     * The instance of the render-specific node that will be hydrated by the\n     * exposed React ref. So for example, this visual element can host a\n     * HTMLElement, plain object, or Three.js object. The functions provided\n     * in VisualElementConfig allow us to interface with this instance.\n     */\n    var instance;\n    /**\n     * Manages the subscriptions for a visual element's lifecycle, for instance\n     * onRender\n     */\n    var lifecycles = createLifecycles();\n    /**\n     * A map of all motion values attached to this visual element. Motion\n     * values are source of truth for any given animated value. A motion\n     * value might be provided externally by the component via props.\n     */\n    var values = new Map();\n    /**\n     * A map of every subscription that binds the provided or generated\n     * motion values onChange listeners to this visual element.\n     */\n    var valueSubscriptions = new Map();\n    /**\n     * A reference to the previously-provided motion values as returned\n     * from scrapeMotionValuesFromProps. We use the keys in here to determine\n     * if any motion values need to be removed after props are updated.\n     */\n    var prevMotionValues = {};\n    /**\n     * When values are removed from all animation props we need to search\n     * for a fallback value to animate to. These values are tracked in baseTarget.\n     */\n    var baseTarget = tslib.__assign({}, latestValues);\n    // Internal methods ========================\n    /**\n     * On mount, this will be hydrated with a callback to disconnect\n     * this visual element from its parent on unmount.\n     */\n    var removeFromVariantTree;\n    /**\n     * Render the element with the latest styles outside of the React\n     * render lifecycle\n     */\n    function render() {\n      if (!instance || !isMounted) return;\n      triggerBuild();\n      renderInstance(instance, renderState, props.style, element.projection);\n    }\n    function triggerBuild() {\n      build(element, renderState, latestValues, options, props);\n    }\n    function update() {\n      lifecycles.notifyUpdate(latestValues);\n    }\n    /**\n     *\n     */\n    function bindToMotionValue(key, value) {\n      var removeOnChange = value.onChange(function (latestValue) {\n        latestValues[key] = latestValue;\n        props.onUpdate && sync__default[\"default\"].update(update, false, true);\n      });\n      var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n      valueSubscriptions.set(key, function () {\n        removeOnChange();\n        removeOnRenderRequest();\n      });\n    }\n    /**\n     * Any motion values that are provided to the element when created\n     * aren't yet bound to the element, as this would technically be impure.\n     * However, we iterate through the motion values and set them to the\n     * initial values for this component.\n     *\n     * TODO: This is impure and we should look at changing this to run on mount.\n     * Doing so will break some tests but this isn't neccessarily a breaking change,\n     * more a reflection of the test.\n     */\n    var initialMotionValues = scrapeMotionValuesFromProps(props);\n    for (var key in initialMotionValues) {\n      var value = initialMotionValues[key];\n      if (latestValues[key] !== undefined && isMotionValue(value)) {\n        value.set(latestValues[key], false);\n      }\n    }\n    /**\n     * Determine what role this visual element should take in the variant tree.\n     */\n    var isControllingVariants = checkIfControllingVariants(props);\n    var isVariantNode = checkIfVariantNode(props);\n    var element = tslib.__assign(tslib.__assign({\n      treeType: treeType,\n      /**\n       * This is a mirror of the internal instance prop, which keeps\n       * VisualElement type-compatible with React's RefObject.\n       */\n      current: null,\n      /**\n       * The depth of this visual element within the visual element tree.\n       */\n      depth: parent ? parent.depth + 1 : 0,\n      parent: parent,\n      children: new Set(),\n      /**\n       *\n       */\n      presenceId: presenceId,\n      /**\n       * If this component is part of the variant tree, it should track\n       * any children that are also part of the tree. This is essentially\n       * a shadow tree to simplify logic around how to stagger over children.\n       */\n      variantChildren: isVariantNode ? new Set() : undefined,\n      /**\n       * Whether this instance is visible. This can be changed imperatively\n       * by the projection tree, is analogous to CSS's visibility in that\n       * hidden elements should take up layout, and needs enacting by the configured\n       * render function.\n       */\n      isVisible: undefined,\n      /**\n       * Normally, if a component is controlled by a parent's variants, it can\n       * rely on that ancestor to trigger animations further down the tree.\n       * However, if a component is created after its parent is mounted, the parent\n       * won't trigger that mount animation so the child needs to.\n       *\n       * TODO: This might be better replaced with a method isParentMounted\n       */\n      manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()),\n      /**\n       * This can be set by AnimatePresence to force components that mount\n       * at the same time as it to mount as if they have initial={false} set.\n       */\n      blockInitialAnimation: blockInitialAnimation,\n      /**\n       * Determine whether this component has mounted yet. This is mostly used\n       * by variant children to determine whether they need to trigger their\n       * own animations on mount.\n       */\n      isMounted: function isMounted() {\n        return Boolean(instance);\n      },\n      mount: function mount(newInstance) {\n        isMounted = true;\n        instance = element.current = newInstance;\n        if (element.projection) {\n          element.projection.mount(newInstance);\n        }\n        if (isVariantNode && parent && !isControllingVariants) {\n          removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n        }\n        parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n        element.setProps(props);\n      },\n      /**\n       *\n       */\n      unmount: function unmount() {\n        var _a;\n        (_a = element.projection) === null || _a === void 0 ? void 0 : _a.unmount();\n        sync.cancelSync.update(update);\n        sync.cancelSync.render(render);\n        valueSubscriptions.forEach(function (remove) {\n          return remove();\n        });\n        removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n        parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n        lifecycles.clearAllListeners();\n        instance = undefined;\n        isMounted = false;\n      },\n      /**\n       * Add a child visual element to our set of children.\n       */\n      addVariantChild: function addVariantChild(child) {\n        var _a;\n        var closestVariantNode = element.getClosestVariantNode();\n        if (closestVariantNode) {\n          (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n          return function () {\n            return closestVariantNode.variantChildren.delete(child);\n          };\n        }\n      },\n      sortNodePosition: function sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!_sortNodePosition || treeType !== other.treeType) return 0;\n        return _sortNodePosition(element.getInstance(), other.getInstance());\n      },\n      /**\n       * Returns the closest variant node in the tree starting from\n       * this visual element.\n       */\n      getClosestVariantNode: function getClosestVariantNode() {\n        return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n      },\n      /**\n       * Expose the latest layoutId prop.\n       */\n      getLayoutId: function getLayoutId() {\n        return props.layoutId;\n      },\n      /**\n       * Returns the current instance.\n       */\n      getInstance: function getInstance() {\n        return instance;\n      },\n      /**\n       * Get/set the latest static values.\n       */\n      getStaticValue: function getStaticValue(key) {\n        return latestValues[key];\n      },\n      setStaticValue: function setStaticValue(key, value) {\n        return latestValues[key] = value;\n      },\n      /**\n       * Returns the latest motion value state. Currently only used to take\n       * a snapshot of the visual element - perhaps this can return the whole\n       * visual state\n       */\n      getLatestValues: function getLatestValues() {\n        return latestValues;\n      },\n      /**\n       * Set the visiblity of the visual element. If it's changed, schedule\n       * a render to reflect these changes.\n       */\n      setVisibility: function setVisibility(visibility) {\n        if (element.isVisible === visibility) return;\n        element.isVisible = visibility;\n        element.scheduleRender();\n      },\n      /**\n       * Make a target animatable by Popmotion. For instance, if we're\n       * trying to animate width from 100px to 100vw we need to measure 100vw\n       * in pixels to determine what we really need to animate to. This is also\n       * pluggable to support Framer's custom value types like Color,\n       * and CSS variables.\n       */\n      makeTargetAnimatable: function makeTargetAnimatable(target, canMutate) {\n        if (canMutate === void 0) {\n          canMutate = true;\n        }\n        return _makeTargetAnimatable(element, target, props, canMutate);\n      },\n      /**\n       * Measure the current viewport box with or without transforms.\n       * Only measures axis-aligned boxes, rotate and skew must be manually\n       * removed with a re-render to work.\n       */\n      measureViewportBox: function measureViewportBox() {\n        return _measureViewportBox(instance, props);\n      },\n      // Motion values ========================\n      /**\n       * Add a motion value and bind it to this visual element.\n       */\n      addValue: function addValue(key, value) {\n        // Remove existing value if it exists\n        if (element.hasValue(key)) element.removeValue(key);\n        values.set(key, value);\n        latestValues[key] = value.get();\n        bindToMotionValue(key, value);\n      },\n      /**\n       * Remove a motion value and unbind any active subscriptions.\n       */\n      removeValue: function removeValue(key) {\n        var _a;\n        values.delete(key);\n        (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        valueSubscriptions.delete(key);\n        delete latestValues[key];\n        removeValueFromRenderState(key, renderState);\n      },\n      /**\n       * Check whether we have a motion value for this key\n       */\n      hasValue: function hasValue(key) {\n        return values.has(key);\n      },\n      /**\n       * Get a motion value for this key. If called with a default\n       * value, we'll create one if none exists.\n       */\n      getValue: function getValue(key, defaultValue) {\n        var value = values.get(key);\n        if (value === undefined && defaultValue !== undefined) {\n          value = motionValue(defaultValue);\n          element.addValue(key, value);\n        }\n        return value;\n      },\n      /**\n       * Iterate over our motion values.\n       */\n      forEachValue: function forEachValue(callback) {\n        return values.forEach(callback);\n      },\n      /**\n       * If we're trying to animate to a previously unencountered value,\n       * we need to check for it in our state and as a last resort read it\n       * directly from the instance (which might have performance implications).\n       */\n      readValue: function readValue(key) {\n        var _a;\n        return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options);\n      },\n      /**\n       * Set the base target to later animate back to. This is currently\n       * only hydrated on creation and when we first read a value.\n       */\n      setBaseTarget: function setBaseTarget(key, value) {\n        baseTarget[key] = value;\n      },\n      /**\n       * Find the base target for a value thats been removed from all animation\n       * props.\n       */\n      getBaseTarget: function getBaseTarget(key) {\n        if (_getBaseTarget) {\n          var target = _getBaseTarget(props, key);\n          if (target !== undefined && !isMotionValue(target)) return target;\n        }\n        return baseTarget[key];\n      }\n    }, lifecycles), {\n      /**\n       * Build the renderer state based on the latest visual state.\n       */\n      build: function build() {\n        triggerBuild();\n        return renderState;\n      },\n      /**\n       * Schedule a render on the next animation frame.\n       */\n      scheduleRender: function scheduleRender() {\n        sync__default[\"default\"].render(render, false, true);\n      },\n      /**\n       * Synchronously fire render. It's prefered that we batch renders but\n       * in many circumstances, like layout measurement, we need to run this\n       * synchronously. However in those instances other measures should be taken\n       * to batch reads/writes.\n       */\n      syncRender: render,\n      /**\n       * Update the provided props. Ensure any newly-added motion values are\n       * added to our map, old ones removed, and listeners updated.\n       */\n      setProps: function setProps(newProps) {\n        if (newProps.transformTemplate || props.transformTemplate) {\n          element.scheduleRender();\n        }\n        props = newProps;\n        lifecycles.updatePropListeners(newProps);\n        prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n      },\n      getProps: function getProps() {\n        return props;\n      },\n      // Variants ==============================\n      /**\n       * Returns the variant definition with a given name.\n       */\n      getVariant: function getVariant(name) {\n        var _a;\n        return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name];\n      },\n      /**\n       * Returns the defined default transition on this component.\n       */\n      getDefaultTransition: function getDefaultTransition() {\n        return props.transition;\n      },\n      getTransformPagePoint: function getTransformPagePoint() {\n        return props.transformPagePoint;\n      },\n      /**\n       * Used by child variant nodes to get the closest ancestor variant props.\n       */\n      getVariantContext: function getVariantContext(startAtParent) {\n        if (startAtParent === void 0) {\n          startAtParent = false;\n        }\n        if (startAtParent) return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n        if (!isControllingVariants) {\n          var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n          if (props.initial !== undefined) {\n            context_1.initial = props.initial;\n          }\n          return context_1;\n        }\n        var context = {};\n        for (var i = 0; i < numVariantProps; i++) {\n          var name_1 = variantProps[i];\n          var prop = props[name_1];\n          if (isVariantLabel(prop) || prop === false) {\n            context[name_1] = prop;\n          }\n        }\n        return context;\n      }\n    });\n    return element;\n  };\n};\nvar variantProps = tslib.__spreadArray([\"initial\"], tslib.__read(variantPriorityOrder), false);\nvar numVariantProps = variantProps.length;\nfunction useForceUpdate() {\n  var isUnmountingRef = React.useRef(false);\n  var _a = tslib.__read(React.useState(0), 2),\n    forcedRenderCount = _a[0],\n    setForcedRenderCount = _a[1];\n  useUnmountEffect(function () {\n    return isUnmountingRef.current = true;\n  });\n  var forceRender = React.useCallback(function () {\n    !isUnmountingRef.current && setForcedRenderCount(forcedRenderCount + 1);\n  }, [forcedRenderCount]);\n  /**\n   * Defer this to the end of the next animation frame in case there are multiple\n   * synchronous calls.\n   */\n  var deferredForceRender = React.useCallback(function () {\n    return sync__default[\"default\"].postRender(forceRender);\n  }, [forceRender]);\n  return [deferredForceRender, forcedRenderCount];\n}\n\n/**\n * Creates a `MotionValue` to track the state and velocity of a value.\n *\n * Usually, these are created automatically. For advanced use-cases, like use with `useTransform`, you can create `MotionValue`s externally and pass them into the animated component via the `style` prop.\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const scale = useMotionValue(1)\n *\n *   return <motion.div style={{ scale }} />\n * }\n * ```\n *\n * @param initial - The initial state.\n *\n * @public\n */\nfunction useMotionValue(initial) {\n  var value = useConstant(function () {\n    return motionValue(initial);\n  });\n  /**\n   * If this motion value is being used in static mode, like on\n   * the Framer canvas, force components to rerender when the motion\n   * value is updated.\n   */\n  var isStatic = React.useContext(MotionConfigContext).isStatic;\n  if (isStatic) {\n    var _a = tslib.__read(React.useState(initial), 2),\n      setLatest_1 = _a[1];\n    React.useEffect(function () {\n      return value.onChange(setLatest_1);\n    }, []);\n  }\n  return value;\n}\nexports.FlatTree = FlatTree;\nexports.LayoutGroupContext = LayoutGroupContext;\nexports.LazyContext = LazyContext;\nexports.MotionConfigContext = MotionConfigContext;\nexports.MotionContext = MotionContext;\nexports.MotionValue = MotionValue;\nexports.PresenceContext = PresenceContext;\nexports.SwitchLayoutGroupContext = SwitchLayoutGroupContext;\nexports.addDomEvent = addDomEvent;\nexports.addPointerEvent = addPointerEvent;\nexports.addScaleCorrector = addScaleCorrector;\nexports.animate = animate;\nexports.animateVisualElement = animateVisualElement;\nexports.animations = animations;\nexports.calcLength = calcLength;\nexports.checkTargetForNewValues = checkTargetForNewValues;\nexports.createBox = createBox;\nexports.createMotionComponent = createMotionComponent;\nexports.createProjectionNode = createProjectionNode;\nexports.eachAxis = eachAxis;\nexports.extractEventInfo = extractEventInfo;\nexports.filterProps = filterProps;\nexports.findDimensionValueType = findDimensionValueType;\nexports.getDefaultValueType = getDefaultValueType;\nexports.getGlobalLock = getGlobalLock;\nexports.getOrigin = getOrigin;\nexports.globalProjectionState = globalProjectionState;\nexports.instantAnimationState = instantAnimationState;\nexports.isDragActive = isDragActive;\nexports.isKeyframesTarget = isKeyframesTarget;\nexports.isMotionValue = isMotionValue;\nexports.isMouseEvent = isMouseEvent;\nexports.isRefObject = isRefObject;\nexports.isTouchEvent = isTouchEvent;\nexports.isTransformOriginProp = isTransformOriginProp;\nexports.isTransformProp = isTransformProp;\nexports.isValidMotionProp = isValidMotionProp;\nexports.loadExternalIsValidProp = loadExternalIsValidProp;\nexports.loadFeatures = loadFeatures;\nexports.makeRenderlessComponent = makeRenderlessComponent;\nexports.makeUseVisualState = makeUseVisualState;\nexports.motionValue = motionValue;\nexports.moveItem = moveItem;\nexports.numberValueTypes = numberValueTypes;\nexports.resolveMotionValue = resolveMotionValue;\nexports.scaleCorrectors = scaleCorrectors;\nexports.secondsToMilliseconds = secondsToMilliseconds;\nexports.setValues = setValues;\nexports.sortTransformProps = sortTransformProps;\nexports.startAnimation = startAnimation;\nexports.stopAnimation = stopAnimation;\nexports.transformProps = transformProps;\nexports.translateAxis = translateAxis;\nexports.useConstant = useConstant;\nexports.useDomEvent = useDomEvent;\nexports.useForceUpdate = useForceUpdate;\nexports.useIsPresent = useIsPresent;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\nexports.useMotionValue = useMotionValue;\nexports.usePointerEvent = usePointerEvent;\nexports.usePresence = usePresence;\nexports.useUnmountEffect = useUnmountEffect;\nexports.useVisualElementContext = useVisualElementContext;\nexports.visualElement = visualElement;\nexports.wrapHandler = wrapHandler;"],"names":["tslib","React","heyListen","sync","popmotion","styleValueTypes","_interopDefaultLegacy","e","_interopNamespace","__esModule","n","Object","create","keys","forEach","k","d","getOwnPropertyDescriptor","defineProperty","get","enumerable","freeze","React__namespace","React__default","sync__default","createDefinition","propNames","isEnabled","props","some","name","featureDefinitions","measureLayout","animation","exit","drag","focus","hover","tap","pan","inView","loadFeatures","features","key","projectionNodeConstructor","Component","LazyContext","createContext","strict","featureNames","numFeatures","length","MotionConfigContext","transformPagePoint","p","isStatic","MotionContext","useVisualElementContext","useContext","visualElement","PresenceContext","isBrowser","window","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","isRefObject","ref","prototype","hasOwnProperty","call","isVariantLabels","v","Array","isArray","isVariantLabel","resolveVariantFromProps","definition","custom","currentValues","currentVelocity","_a","variants","resolveVariant","getProps","current","forEachValue","value","getCurrent","velocity","getVelocity","checkIfControllingVariants","animate","start","initial","whileHover","whileDrag","whileTap","whileFocus","checkIfVariantNode","Boolean","useCreateMotionContext","context","undefined","inherit","getCurrentTreeVariants","useMemo","variantLabelsAsDependency","prop","join","useConstant","init","useRef","addUniqueItem","arr","item","indexOf","push","removeItem","index","splice","SubscriptionManager","this","subscriptions","add","handler","_this","notify","a","b","c","numSubscriptions","i","getSize","clear","MotionValue","timeDelta","lastUpdated","updateSubscribers","velocityUpdateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","render","prev","getFrameData","delta","timestamp","postRender","scheduleVelocityCheck","velocityCheck","hasAnimated","isNaN","parseFloat","onChange","subscription","clearListeners","onRenderRequest","attach","passiveEffect","set","getPrevious","velocityPerSecond","stop","Promise","resolve","stopAnimation","then","clearAnimation","isAnimating","destroy","motionValue","isMotionValue","secondsToMilliseconds","seconds","easingLookup","linear","easeIn","easeInOut","easeOut","circIn","circInOut","circOut","backIn","backInOut","backOut","anticipate","bounceIn","bounceInOut","bounceOut","easingDefinitionToFunction","invariant","__read","x1","y1","x2","y2","cubicBezier","concat","isAnimatable","complex","test","startsWith","isKeyframesTarget","underDampedSpring","type","stiffness","damping","restSpeed","criticallyDampedSpring","to","Math","sqrt","linearTween","ease","duration","keyframes","values","defaultTransitions","x","y","z","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scale","opacity","backgroundColor","color","default","int","__assign","number","transform","round","numberValueTypes","borderWidth","px","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","size","top","right","bottom","left","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","degrees","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","perspective","transformPerspective","alpha","originX","progressPercentage","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","defaultValueTypes","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","filter","WebkitFilter","getDefaultValueType","getAnimatableNone","defaultValueType","instantAnimationState","resolveFinalValueInKeyframes","legacyRepeatWarning","convertTransitionToAnimationOptions","times","yoyo","flip","loop","transition","__rest","options","repeatDelay","isEasingArray","map","warning","repeatType","repeat","getPopmotionAnimationOptions","valueKey","transitionFactory","__spreadArray","from","hydrateKeyframes","when","delay","delayChildren","staggerChildren","staggerDirection","isTransitionDefined","isZero","getZeroUnit","potentialUnitType","getValueTransition","startAnimation","target","onComplete","delayTimer","controls","valueTransition","origin","isTargetAnimatable","isOriginAnimatable","onUpdate","inertia","_b","finalTarget","getAnimation","getDelayFromTransition","setTimeout","clearTimeout","borders","numBorders","asNumber","isPx","getRadius","radiusName","easeCrossfadeIn","compress","easeCrossfadeOut","min","max","easing","progress","copyAxisInto","axis","originAxis","copyBoxInto","box","originBox","isIdentityScale","hasScale","hasTransform","hasTranslate","scalePoint","point","originPoint","applyPointDelta","translate","boxScale","applyAxisDelta","applyBoxDelta","translateAxis","transformAxis","transforms","scaleKey","originKey","axisOrigin","mix","xKeys$1","yKeys$1","transformBox","calcLength","isNear","maxDistance","calcAxisDelta","source","calcBoxDelta","calcRelativeAxis","relative","parent","calcRelativeAxisPosition","layout","calcRelativePosition","removePointDelta","removeAxisTransforms","sourceAxis","percent","removeAxisDelta","xKeys","yKeys","removeBoxTransforms","sourceBox","createBox","isAxisDeltaZero","isDeltaZero","boxEquals","NodeStack","members","node","scheduleRender","remove","prevLead","lead","promote","relegate","indexOfNode","findIndex","member","isPresent","preserveFollowOpacity","show","instance","resumeFrom","preserveOpacity","snapshot","latestValues","animationValues","isShared","root","isUpdating","isLayoutDirty","crossfade","hide","exitAnimationComplete","_c","_d","_e","onExitComplete","resumingFrom","removeLeadSnapshot","scaleCorrectors","buildProjectionTransform","treeScale","latestTransform","xTranslate","yTranslate","eachAxis","callback","transformAxes","transformProps","operationKey","axesKey","transformPropSet","Set","transformOriginProps","compareByDepth","depth","FlatTree","children","isDirty","child","sort","resolveMotionValue","unwrappedValue","toValue","globalProjectionState","hasAnimatedSinceResize","hasEverUpdated","updateLayout","notifyLayoutUpdate","isLead","hasListeners","layout_1","actual","measuredLayout","measured","animationType","axisSnapshot","layoutDelta","visualDelta","applyTransform","hasLayoutChanged","hasRelativeTargetChanged","relativeParent","getClosestProjectingParent","_f","parentSnapshot","parentLayout","relativeSnapshot","relativeLayout","notifyListeners","clearSnapshot","clearMeasurements","resetTransformStyle","resetTransform","finishAnimation","targetDelta","relativeTarget","resolveTargetDelta","calcProjection","resetRotation","removeLeadSnapshots","stack","mixAxisDelta","output","mixAxis","hasOpacityCrossfade","opacityExit","defaultLayoutTransition","mountNodeEarly","id","searchNode","path","element","document","querySelector","mount","roundAxis","roundBox","LayoutGroupContext","SwitchLayoutGroupContext","VisualElementHandler","_super","apply","arguments","__extends","getSnapshotBeforeUpdate","updateProps","componentDidUpdate","setProps","validMotionProps","isValidMotionProp","has","shouldForward","loadExternalIsValidProp","isValidProp","isAnimationControls","makeState","presenceContext","scrapeMotionValuesFromProps","createRenderState","onMount","state","makeLatestValues","renderState","AnimationType","scrapeMotionValues","blockInitialAnimation","motionValues","isControllingVariants","isVariantNode","initialAnimationIsBlocked","variantToSet","resolved","transitionEnd","valueTarget","addDomEvent","eventName","addEventListener","removeEventListener","useDomEvent","isTouchEvent","event","touches","exports","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","changedTouches","pointFromMouse","extractEventInfo","wrapHandler","shouldFilterPrimaryPointer","eventHandler","listener","isMouseEvent","MouseEvent","button","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","onpointerdown","ontouchstart","onmousedown","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal_1","openVertical_1","useUnmountEffect","makeRenderlessComponent","hook","usePresence","register","useUniqueId","counter","incrementId","shallowCompare","next","prevLength","isZeroValueString","testValueType","dimensionValueTypes","vw","vh","parse","valueTypes","findValueType","find","setMotionValue","hasValue","getValue","addValue","setTarget","makeTargetAnimatable","setVariants","variantLabels","reverse","variant","getVariant","variantChildren","getOriginFromTransition","animateVisualElement","notifyAnimationStart","animations","animateVariant","all","resolvedDefinition","animateTarget","notifyAnimationComplete","getDefaultTransition","transitionOverride","getChildAnimations","forwardDelay","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","animateChildren","first","last","animationTypeState","animationState","getState","shouldBlockAnimation","sortNodePosition","protectedKeys","needsAnimating","shouldBlock","variantPriorityOrder","Animate","InView","Focus","Hover","Tap","Drag","Exit","reversePriorityOrder","numAnimationTypes","createAnimationState","animateList","createTypeState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","acc","animateChanges","changedActiveType","getVariantContext","removedKeys","encounteredKeys","removedVariantIndex","Infinity","_loop_1","typeState","propIsVariant","activeDelta","isActive","isInherited","manuallyAnimateOnMount","prevProp","variantDidChange","checkVariantsDidChange","shouldAnimateType","definitionList","resolvedValues","reduce","prevResolvedValues","allKeys","markToAnimate","delete","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","isAnimated","setActive","setAnimateFunction","makeAnimator","subscribe","safeToRemove","names","variantProps","numVariantProps","addPointerEvent","addScaleCorrector","correctors","assign","checkTargetForNewValues","newValueKeys","numNewValues","targetValue","readValue","setBaseTarget","createMotionComponent","preloadedFeatures","createVisualElement","useRender","useVisualState","forwardRef","externalRef","layoutId","layoutGroupId","useLayoutId","config","projectionId","visualState","lazyContext","visualElementRef","renderer","presenceId","syncRender","notifyUnmount","useVisualElement","ProjectionNodeConstructor","dragConstraints","layoutScroll","initialPromotionConfig","projection","getLatestValues","setOptions","alwaysMeasureLayout","useProjection","name_1","createElement","useFeatures","Provider","useCallback","unmount","useMotionRef","createProjectionNode","attachResizeListener","defaultParent","measureScroll","ProjectionNode","isTreeAnimating","isAnimationBlocked","updateManuallyBlocked","updateBlockedByResize","isSVG","needsReset","shouldResetTransform","eventHandlers","Map","potentialNodes","checkUpdateFailed","clearAllSnapshots","updateProjection","nodes","hasProjected","isVisible","animationProgress","sharedNodes","registerPotentialNode","args","_i","subscriptionManager","SVGElement","tagName","getInstance","unblockTimeout_1","resizeUnblockUpdate_1","registerSharedNode","newLayout","isTreeAnimationBlocked","layoutTransition","onLayoutAnimationComplete","targetChanged","targetLayout","hasOnlyRelativeTargetChanged","currentAnimation","setAnimationOrigin","willUpdate","getStack","cancelSync","preRender","blockUpdate","unblockUpdate","isUpdateBlocked","startUpdate","shouldNotifyListeners","updateScroll","transformTemplate","prevTransformTemplateValue","updateSnapshot","didUpdate","flushSync","update","scheduleUpdateProjection","scheduleCheckAfterUnmount","measure","removeTransform","removeElementScroll","prevLayout","layoutCorrected","projectionDelta","notifyLayoutMeasure","scroll","isResetRequested","hasProjection","transformTemplateValue","transformTemplateHasChanged","measureViewportBox","boxWithoutScroll","scroll_1","transformOnly","withTransforms","boxWithoutTransform","setTargetDelta","relativeTargetOrigin","targetWithTransforms","attemptToResolveRelativeTarget","pendingAnimation","getLead","treePath","isSharedTransition","treeLength","style","display","applyTreeDeltas","projectionDeltaWithTransform","prevTreeScaleX","prevTreeScaleY","prevProjectionTransform","projectionTransform","notifyAll","snapshotLatestValues","mixedValues","isSharedLayoutAnimation","isOnlyMember","shouldCrossfadeOpacity","mixTargetDelta","latest","follow","borderLabel","followRadius","leadRadius","mixValues","completeAnimation","applyTransformsToTarget","shouldPreserveFollowOpacity","getPrevLead","hasRotate","resetValues","getStaticValue","setStaticValue","getProjectionStyles","styleProp","styles","visibility","pointerEvents","emptyStyles","valuesToRender","_g","transformOrigin","_h","correct","applyTo","corrected","num","resetTree","filterProps","isDom","forwardMotionProps","filteredProps","findDimensionValueType","getOrigin","isDragActive","openGestureLock","PointerEvent","pointerType","isTransformOriginProp","isTransformProp","makeUseVisualState","moveItem","fromIndex","toIndex","slice","startIndex","endIndex","setValues","sortTransformProps","useForceUpdate","isUnmountingRef","useState","forcedRenderCount","setForcedRenderCount","forceRender","useIsPresent","useMotionValue","setLatest_1","usePointerEvent","treeType","build","_getBaseTarget","_makeTargetAnimatable","_measureViewportBox","renderInstance","readValueFromInstance","removeValueFromRenderState","_sortNodePosition","removeFromVariantTree","isMounted","lifecycles","managers","propSubscriptions","clearAllListeners","manager","updatePropListeners","on","propListener","createLifecycles","valueSubscriptions","prevMotionValues","baseTarget","triggerBuild","notifyUpdate","initialMotionValues","newInstance","addVariantChild","closestVariantNode","getClosestVariantNode","other","getLayoutId","setVisibility","canMutate","removeValue","removeOnChange","latestValue","removeOnRenderRequest","bindToMotionValue","defaultValue","newProps","nextValue","prevValue","existingValue","updateMotionValuesFromProps","getTransformPagePoint","startAtParent","context_1"],"sourceRoot":""}