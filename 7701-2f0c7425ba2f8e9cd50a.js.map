{"version":3,"file":"7701-2f0c7425ba2f8e9cd50a.js","mappings":"0PAAA,SAASA,EAAgBC,EAAKC,EAAKC,GAYjC,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,CACT,CAEA,SAASQ,EAAcC,GACrB,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,CAAC,EAChDI,EAAUX,OAAOY,KAAKF,GAEkB,mBAAjCV,OAAOa,wBAChBF,EAAUA,EAAQG,OAAOd,OAAOa,sBAAsBH,GAAQK,QAAO,SAAUC,GAC7E,OAAOhB,OAAOiB,yBAAyBP,EAAQM,GAAKd,UACtD,MAGFS,EAAQO,SAAQ,SAAUpB,GACxBF,EAAgBU,EAAQR,EAAKY,EAAOZ,GACtC,GACF,CAEA,OAAOQ,CACT,CAoBA,SAASa,EAAmBb,EAAQI,GAWlC,OAVAA,EAAmB,MAAVA,EAAiBA,EAAS,CAAC,EAEhCV,OAAOoB,0BACTpB,OAAOqB,iBAAiBf,EAAQN,OAAOoB,0BAA0BV,IAtBrE,SAAiBY,EAAQC,GACvB,IAAIX,EAAOZ,OAAOY,KAAKU,GAEvB,GAAItB,OAAOa,sBAAuB,CAChC,IAAIW,EAAUxB,OAAOa,sBAAsBS,GAEvCC,IACFC,EAAUA,EAAQT,QAAO,SAAUC,GACjC,OAAOhB,OAAOiB,yBAAyBK,EAAQN,GAAKd,UACtD,KAGFU,EAAKa,KAAKC,MAAMd,EAAMY,EACxB,CAEA,OAAOZ,CACT,CAQID,CAAQX,OAAOU,IAASQ,SAAQ,SAAUpB,GACxCE,OAAOC,eAAeK,EAAQR,EAAKE,OAAOiB,yBAAyBP,EAAQZ,GAC7E,IAGKQ,CACT,CAIO,SAASqB,EAAyBC,EAAKC,EAAaC,GACzDF,EAAIG,OAAO,KAAmBF,EAAaV,EAAmBd,EAAc,CAAC,EAAG,MAAiB,CAC/F2B,OAAqC,IAA7B,QAEVJ,EAAIG,OAAO,KAA2BD,EAAcX,EAAmBd,EAAc,CAAC,EAAG,MAAiB,CACxG2B,OAA6C,IAArC,OAEZ,CACO,SAASC,EAAsBC,GACpC,IAAIC,EAAcD,EAAMC,YACpBN,EAAcK,EAAML,YACpBO,GAAQ,IAAAC,QAAOR,GAKfS,GAJM,IAAAC,gBAAe,CACvBC,QAASJ,EAAMK,IACfC,MAAON,EAAMM,MAAMP,KAEQN,YAC7B,MAAO,UAAUf,OAAOwB,EAC1B,C","sources":["webpack://my-gatsby-site/./node_modules/@snek-functions/origin/dist/helper/auth.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === \"function\") {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpreadProps(target, source) {\n  source = source != null ? source : {};\n\n  if (Object.getOwnPropertyDescriptors) {\n    Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n  } else {\n    ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nimport { newAccessToken, verify } from \"../internal/token/factory.js\";\nimport { COOKIE_OPTIONS, LOGIN_REFRESH_TOKEN_COOKIE_MAX_AGE, LOGIN_TOKEN_COOKIE_MAX_AGE, REFRESH_TOKEN_COOKIE_NAME, TOKEN_COOKIE_NAME } from \"../constants.js\";\nexport function setAuthenticationCookies(res, accessToken, refreshToken) {\n  res.cookie(TOKEN_COOKIE_NAME, accessToken, _objectSpreadProps(_objectSpread({}, COOKIE_OPTIONS), {\n    maxAge: LOGIN_TOKEN_COOKIE_MAX_AGE * 1000\n  }));\n  res.cookie(REFRESH_TOKEN_COOKIE_NAME, refreshToken, _objectSpreadProps(_objectSpread({}, COOKIE_OPTIONS), {\n    maxAge: LOGIN_REFRESH_TOKEN_COOKIE_MAX_AGE * 1000\n  }));\n}\nexport function generateInternalToken(param) {\n  var ressourceId = param.ressourceId,\n      accessToken = param.accessToken;\n  var parts = verify(accessToken);\n  var ref = newAccessToken({\n    subject: parts.sub,\n    scope: parts.scope[ressourceId]\n  }),\n      limitedAccessToken = ref.accessToken;\n  return \"Bearer \".concat(limitedAccessToken);\n}"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","_objectSpreadProps","getOwnPropertyDescriptors","defineProperties","object","enumerableOnly","symbols","push","apply","setAuthenticationCookies","res","accessToken","refreshToken","cookie","maxAge","generateInternalToken","param","ressourceId","parts","verify","limitedAccessToken","newAccessToken","subject","sub","scope"],"sourceRoot":""}