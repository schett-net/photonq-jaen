{"version":3,"file":"component---src-pages-reset-tsx-2a19a55905de88770244.js","mappings":"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","sources":["webpack://my-gatsby-site/./src/components/Authentification/PasswordResetForm.tsx","webpack://my-gatsby-site/./src/pages/reset.tsx"],"sourcesContent":["import {Field, navigate} from '@jaenjs/jaen'\nimport {Alert, Snackbar, TextField} from '@mui/material'\nimport {red} from '@mui/material/colors'\nimport {Link} from 'gatsby'\nimport React, {useState} from 'react'\nimport {useTranslation} from 'react-i18next'\n\nimport {resetPassword} from '@snek-functions/origin'\n\nimport {Path} from '../../model/model.routes'\nimport LoadingButton from '../LoadingButton'\nimport AuthFormContainer from './AuthFormContainer'\nimport PasswordField from './PasswordField'\n\ninterface PasswordResetValues {\n  password: string\n  passwordConfirmation: string\n}\n\ninterface PasswordResetRequestValues {\n  email: string\n}\n\nconst getResetTokenFromWindowLocation = (): string | null => {\n  if (typeof window === 'undefined') {\n    return null\n  }\n\n  // get the token from the window location query string\n  const searchParams = new URLSearchParams(window.location.search)\n  const token = searchParams.get('token')\n\n  return token\n}\n\nexport default function PasswordResetForm() {\n  const location = typeof window !== 'undefined' ? window.location : null\n\n  const {t} = useTranslation()\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [resetRequested, setResetRequested] = React.useState(false)\n  const [passwordResetValues, setPasswordResetValues] =\n    useState<PasswordResetValues>({\n      password: '',\n      passwordConfirmation: ''\n    })\n\n  const [passwordResetRequestValues, setPasswordResetRequestValues] =\n    useState<PasswordResetRequestValues>({\n      email: ''\n    })\n\n  // If the token is present in the window location, we are in the reset step.\n  // Otherwise, we are in the request step.\n  const [resetToken, setResetToken] = useState(\n    getResetTokenFromWindowLocation()\n  )\n\n  React.useEffect(() => {\n    setResetToken(getResetTokenFromWindowLocation())\n  }, [location])\n\n  const handleResetOnChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>,\n    key: keyof PasswordResetValues\n  ) => {\n    setPasswordResetValues(prev => ({...prev, [key]: e.target.value}))\n  }\n\n  const handleResetRequestOnChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>,\n    key: keyof PasswordResetRequestValues\n  ) => {\n    setPasswordResetRequestValues(prev => ({...prev, [key]: e.target.value}))\n  }\n\n  const reset = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    setIsLoading(true)\n    try {\n      setError('')\n\n      if (resetToken === null) {\n        await resetPassword({\n          email: passwordResetRequestValues.email\n        })\n        setResetRequested(true)\n      } else {\n        if (\n          passwordResetValues.password ===\n          passwordResetValues.passwordConfirmation\n        ) {\n          await resetPassword({\n            password: passwordResetValues.password,\n            token: resetToken\n          })\n\n          // Redirect to the login page\n          navigate(Path.Login)\n        } else {\n          throw new Error('Passwords do not match')\n        }\n      }\n    } catch (e) {\n      setError(e.message)\n    } finally {\n      setIsLoading(() => false)\n    }\n  }\n\n  return (\n    <>\n      <AuthFormContainer\n        header={<Field.Text name=\"reset\" defaultValue=\"Reset password\" />}\n        onSubmit={e => reset(e)}>\n        {resetToken === null ? (\n          <>\n            <Field.Text\n              name=\"resetRequest\"\n              defaultValue=\"Reset your password by entering your email address below. You will\n            receive an email with a link to reset your password.\"\n            />\n\n            <TextField\n              disabled={resetRequested}\n              value={passwordResetRequestValues.email}\n              onChange={e => handleResetRequestOnChange(e, 'email')}\n              fullWidth\n              required\n              variant={'outlined'}\n              type={'email'}\n              label={t('Email Address')}\n            />\n          </>\n        ) : (\n          <>\n            <PasswordField\n              value={passwordResetValues.password}\n              handleOnChange={e => handleResetOnChange(e, 'password')}\n              required\n              fullWidth\n              label={'Password *'}\n            />\n            <PasswordField\n              value={passwordResetValues.passwordConfirmation}\n              handleOnChange={e =>\n                handleResetOnChange(e, 'passwordConfirmation')\n              }\n              required\n              fullWidth\n              label={'Confirm Password *'}\n            />\n          </>\n        )}\n\n        <LoadingButton\n          disabled={resetRequested}\n          text={t('Reset password')}\n          isLoading={isLoading}\n          fullWidth\n          variant={'contained'}\n          type={'submit'}\n        />\n        {error.length ? (\n          <div style={{color: red.A700}} className={'flex justify-center'}>\n            *{t(error)}\n          </div>\n        ) : null}\n        <div className={'flex justify-center'}>\n          <div\n            className={\n              'flex space-x-5 underline cursor-pointer text-primary duration-300'\n            }>\n            <Link to={Path.Login}>\n              <p>{t('Back to login')}</p>\n            </Link>\n          </div>\n        </div>\n      </AuthFormContainer>\n      <Snackbar open={resetRequested} autoHideDuration={2000}>\n        <Alert variant=\"filled\" severity=\"success\" sx={{width: '100%'}}>\n          Reset password email sent! Please check your inbox.\n        </Alert>\n      </Snackbar>\n    </>\n  )\n}\n","import {connectPage, Field} from '@jaenjs/jaen'\nimport {Grid} from '@mui/material'\nimport {graphql, PageProps} from 'gatsby'\nimport React from 'react'\n\nimport AuthContent from '../components/Authentification/AuthContent'\nimport PasswordResetForm from '../components/Authentification/PasswordResetForm'\nimport AuthPageLayout from '../components/Layout/AuthPageLayout'\nimport NavbarPadding from '../components/Layout/NavbarPadding'\nimport PageLayout from '../components/Layout/PageLayout'\n\nexport function ResetPage(props: PageProps) {\n  return (\n    <PageLayout pathname={props.path}>\n      <AuthPageLayout>\n        <div className={'2xl:hidden'}>\n          <NavbarPadding />\n        </div>\n        <Grid container columnSpacing={12}>\n          <Grid item md={7}>\n            <div\n              className={\n                'pt-8 md:pt-0 md:h-screen flex flex-col justify-center'\n              }>\n              <PasswordResetForm />\n            </div>\n          </Grid>\n          <Grid item md={5}>\n            <AuthContent\n              header={\n                <Field.Text\n                  name=\"header\"\n                  defaultValue=\"Start quantum computing with us!\"\n                />\n              }\n              content={\n                <Field.Text\n                  name=\"content\"\n                  defaultValue=\"Our intuitive approach makes it easy for beginners to start with quantum computing and allows experts and educators to run complex photonic experiments on real quantum hardware.\"\n                />\n              }\n            />\n          </Grid>\n        </Grid>\n      </AuthPageLayout>\n    </PageLayout>\n  )\n}\n\nexport const query = graphql`\n  query ($jaenPageId: String!) {\n    ...JaenPageQuery\n  }\n`\n\nexport default connectPage(ResetPage, {displayName: 'ResetPage'})\n"],"names":["getResetTokenFromWindowLocation","window","URLSearchParams","location","search","get","PasswordResetForm","t","useTranslation","useState","isLoading","setIsLoading","error","setError","React","resetRequested","setResetRequested","password","passwordConfirmation","passwordResetValues","setPasswordResetValues","email","passwordResetRequestValues","setPasswordResetRequestValues","resetToken","setResetToken","handleResetOnChange","e","key","prev","target","value","reset","preventDefault","resetPassword","token","navigate","Path","Error","_context","message","_jsxs","AuthFormContainer","header","_jsx","Field","name","defaultValue","onSubmit","TextField","disabled","onChange","handleResetRequestOnChange","fullWidth","required","variant","type","label","PasswordField","handleOnChange","LoadingButton","text","length","style","color","red","className","Link","to","Snackbar","open","autoHideDuration","Alert","severity","sx","width","ResetPage","props","PageLayout","pathname","path","children","AuthPageLayout","NavbarPadding","Grid","container","columnSpacing","item","md","AuthContent","content","connectPage","displayName"],"sourceRoot":""}